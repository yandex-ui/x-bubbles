{"version":3,"sources":["webpack:///x-bubbles-compact.min.js","webpack:///webpack/bootstrap e4ca428888d602b5ddb0","webpack:///./index.js","webpack:///./context.js","webpack:///./core/editor.js","webpack:///./core/bubbleset.js","webpack:///./core/bubble.js","webpack:///./core/text.js","webpack:///./core/utils.js","webpack:///../~/raf/index.js","webpack:///../~/raf/~/performance-now/lib/performance-now.js","webpack:///../~/process/browser.js","webpack:///./core/events.js","webpack:///./polyfills/CustomEventCommon.js","webpack:///./core/constant.js","webpack:///./core/cursor.js","webpack:///./core/select.js","webpack:///./core/drag.js","webpack:///./core/drag/native.js","webpack:///./core/drag/common.js","webpack:///./core/drag/bubbles.png","webpack:///./core/drag/mouse.js","webpack:///external {\"var\":\"window.Modernizr\",\"root\":\"modernizr\",\"commonjs2\":\"modernizr\",\"commonjs\":\"modernizr\",\"amd\":\"modernizr\"}","webpack:///./core/common/blur.js","webpack:///./core/common/click.js","webpack:///./core/common/focus.js","webpack:///./core/common/keydown.js","webpack:///./core/editor/blur.js","webpack:///./core/editor/click.js","webpack:///./core/editor/mousedown.js","webpack:///./core/editor/focus.js","webpack:///./core/editor/keydown.js","webpack:///./core/editor/keypress.js","webpack:///./core/editor/keyup.js","webpack:///./core/editor/paste.js","webpack:///./core/select/blur.js","webpack:///./core/select/click.js","webpack:///./core/select/keydown.js","webpack:///./core/select/keypress.js","webpack:///./core/options.js"],"names":["XBubbles","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","value","_setPrototypeOf","_wrapNativeSuper","Class","_cache","Map","undefined","Wrapper","_construct","arguments","_getPrototypeOf","this","_isNativeFunction","has","get","set","isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","toString","e","Parent","args","a","push","apply","Function","bind","fn","indexOf","o","setPrototypeOf","__proto__","getPrototypeOf","initEditor","node","editor","init","destroyEditor","destroy","context","utils","options","_HTMLDivElement","_getPrototypeOf2","_this","_len","Array","_key","concat","ready","attributes","bubbling","name","data","setContent","canAddBubble","bubbleText","addBubble","nodeBubble","removeBubble","editBubble","getItems","inputValue","HTMLDivElement","customElements","define","extends","eval","bubbleset","getBubbles","selection","getSelection","removeAllRanges","list","select","removeBubbles","fireChange","firstChild","removeChild","text","html2text","appendChild","ownerDocument","createTextNode","bubble","cursor","restore","dataAttributes","text2bubble","fireInput","contains","edit","textRange","currentTextRange","textClean","fireEdit","events","dispatch","EV","BUBBLE_EDIT","bubbles","cancelable","detail","CHANGE","editText","PROPS","BUBBLE_VALUE","BUBBLE_INPUT","fireBeforeRemove","BEFORE_REMOVE","_require","drag","COMMON_EVENTS","blur","click","focus","keydown","EDITOR_EVENTS","mousedown","keypress","keyup","paste","SELECT_EVENTS","PROXY_EVENTS","proxyLocal","mscontrolselect","prevent","resize","resizestart","nodeWrap","nodeEditor","setAttribute","onLocal","on","throttle","off","offLocal","lastBubble","nodeSet","querySelector","headBubble","slice","querySelectorAll","bubblesCount","hasBubbles","Boolean","findBubbleLeft","focusNode","anchorNode","previousSibling","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","isBubbleNode","nodeType","TEXT_NODE","nodeValue","findBubbleRight","nextSibling","closestNodeSet","isEditorNode","parentNode","closestNodeBubble","prevBubble","nextBubble","ELEMENT_NODE","getAttribute","forEach","item","moveBubbles","nodeEditorFrom","nodeEditorTo","remainingCapacity","getRemainingCapacity","movedBubbles","bubblesLimit","Number","POSITIVE_INFINITY","hasAttribute","bubbleDeformation","rangeParams","dataText","innerText","startOffset","endOffset","textFake","createZws","textNode","document","replaceChild","insertBefore","range","createRange","setStart","setEnd","addRange","bubbleFormation","classBubble","draggable","canUseDrag","wrap","createElement","escape","classes","String","trim","split","len","classList","add","begining","ending","separator","tokenizer","ranges","getBubbleRanges","nodes","deleteContents","textParts","map","trimIterator","filter","nonEmptyIterator","reduce","parts","str","parseFragmentByEnding","parseFragmentByBeginning","isArray","fragment","createDocumentFragment","textPart","insertNode","children","childNodes","setEndBefore","setStartBefore","setEndAfter","reg","lastIndex","loop","exec","substring","res","index","isEmptyLeft","_correctSelection","correctSelection","startNode","isEmpty","isEmptyRight","_correctSelection2","endNode","replace","pointNode","remove","rangeCount","anchor","getRangeAt","surroundContents","collapse","replaceString","arrowLeft","extend","_correctSelection3","revert","isCollapsed","isNativeExtend","offset","checkZws","arrowRight","_correctSelection4","DOMContainer","implementation","createHTMLDocument","body","findTextBorderNode","cursorNode","mode","result","sibling","setTextSelection","from","to","selectFromCursorToStrBegin","cursorPosition","anchorOffset","fromNode","selectAll","toNode","hasNear","TEXT_ZWS","REG_ZWS","test","REG_REPLACE_NON_PRINTABLE","unescapeHtmlChar","chr","HTML_UNESCAPES","escapeHtmlChar","HTML_ESCAPES","raf","_require2","&","<",">","\"","'","`","&amp;","&lt;","&gt;","&quot;","&#39;","&#96;","REG_ESCAPED_HTML","REG_UNESCAPED_HTML","REG_HAS_ESCAPED_HTML","RegExp","source","REG_HAS_UNESCAPED_HTML","REG_IE","REG_MOBILE_IE","DOCUMENT_POSITION_CONTAINED_BY","focusOffset","Math","min","max","position","DOCUMENT_POSITION_PRECEDING","callback","runContext","animationCallback","unescape","navigator","userAgent","isIE","isMobileIE","onready","setTimeout","elements","READY","splice","run","lock","readyState","attachEvent","HTMLImports","addEventListener","element","global","now","root","window","vendors","suffix","caf","last","queue","frameDuration","_now","next","cp","cancelled","round","handle","cancel","polyfill","requestAnimationFrame","cancelAnimationFrame","process","getNanoSeconds","hrtime","loadTime","performance","hr","getTime","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","queueIndex","drainQueue","timeout","Item","array","noop","nextTick","title","browser","env","argv","version","versions","addListener","once","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","_defineProperty","scrollX","html","documentElement","scrollLeft","clientLeft","scrollY","scrollTop","clientTop","params","dispatchEvent","Custom","dispatchLocalEvent","event","callbacks","LOCAL_EVENTS","type","sharedData","immediatePropagationStopped","oneCallback","eventName","_callback","removeEventListener","getEventHandlersQueue","toggleEvent","userCallback","isSet","isLocal","isOne","action","EV_ACTIONS","CustomEventCommon","keyCode","charCode","metaKey","ctrlKey","pageX","clientX","pageY","clientY","one","oneLocal","cancelBubble","returnValue","stopImmediatePropagation","stopPropagation","preventDefault","currentTarget","CustomEvent","addLocalEventListener","removeLocalEventListener","doc","protoEvent","Event","issetCustomEvent","createEvent","evt","initCustomEvent","initEvent","KEY","Backspace","Bottom","Cmd","Comma","Delete","Enter","Esc","Home","Left","Right","Semicolon","Space","Tab","Top","x","CLS","DRAGSTART","DROPZONE","DRAGEND","DRAGENTER","DRAGLEAVE","DROP","CLICK_TIME","LOCK_COPY","OPTIONS","setLast","clear","basis","restoreBasis","fakeText","hasChildNodes","lastNode","isEqualNode","uniq","headList","lastList","startRangeSelect","setSelected","all","PATH_NOT_SELECTED","PATH_SELECTED","allLeft","lastSelectedBubble","head","getEditable","removeAttribute","toggleUniq","isSelected","removeSelected","native","mouse","onDragstart","currentDragSet","dataTransfer","effectAllowed","setData","setDragImage","getDragImage","DRAG_IMG","w","h","onDrop","checkBubbleDrop","onDropSuccess","onDragover","dropEffect","onDragenter","onDragleave","onDragend","EVENTS","dragend","dragenter","dragleave","dragover","dragstart","drop","dragImage","Image","src","fromNodeSet","toNodeSet","onMousedown","__drag__","nodeOffsetX","offsetX","nodeOffsetY","offsetY","onMousemove","onMouseup","onScroll","y","currentMoveSet","currentDragElement","dragSet","_","tmpDragSet","moveElement","cloneNode","style","cssText","Modernizr","csstransforms3d","transform","csstransforms","top","left","isDblclick","clickTime","code","shiftKey","onBackspace","onDelete","onArrowLeft","onArrowRight","isTextSelectedFromBeginToCursor","isTextSelectAll","enterBubbling","fromCharCode","separatorCond","isPrintableChar","onPasteSuccess","checkBubblePaste","lineBreakReplacer","isBubbling","onReplaceSuccess","clipboardData","getData","contentType","items","kind","some","getAsString","onTop","onBottom","begin","removeFromRight","firstBubble","secondBubble","copyBubbles","bubbleCopy","editBubbleKeyboardEvent","editableBubble","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","_arr","_n","_d","_e","_s","_i","done","err","handleOptions","reinitOptions","optionsObj","keys","optionName","prepareOptions","optionValue","attrName","_OPTIONS$name","def","OPTIONS_PREPARE","REG_STRREG","innerHTML","join","disableControls","limit","func","bool","match","uint","isNaN"],"mappings":"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","file":"x-bubbles-compact.min.js","sourcesContent":["var XBubbles =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\t\n\tfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\t\n\tfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\t\n\tfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\t\n\tfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\t\n\tfunction isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\t\n\tfunction _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\t\n\tfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\t\n\tfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\t\n\tfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\t\n\t/**\n\t * XBubbles custom element.\n\t * @module x-bubbles\n\t */\n\tvar context = __webpack_require__(1);\n\t\n\tvar editor = __webpack_require__(2);\n\t\n\tvar utils = __webpack_require__(6);\n\t\n\tvar _options = __webpack_require__(37);\n\t\n\tvar XBubbles =\n\t/*#__PURE__*/\n\tfunction (_HTMLDivElement) {\n\t  _inherits(XBubbles, _HTMLDivElement);\n\t\n\t  _createClass(XBubbles, null, [{\n\t    key: \"observedAttributes\",\n\t    get: function get() {\n\t      return _options.attributes;\n\t    }\n\t  }]);\n\t\n\t  function XBubbles() {\n\t    var _getPrototypeOf2;\n\t\n\t    var _this;\n\t\n\t    _classCallCheck(this, XBubbles);\n\t\n\t    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    var self = _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(XBubbles)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\t\n\t    initEditor(self);\n\t    utils.ready(self); // @see https://github.com/WebReflection/document-register-element/tree/0b03ac9747a924e25514e969be7757c39287dea6#upgrading-the-constructor-context\n\t\n\t    return _possibleConstructorReturn(_this, self);\n\t  }\n\t\n\t  _createClass(XBubbles, [{\n\t    key: \"connectedCallback\",\n\t    value: function connectedCallback() {\n\t      initEditor(this);\n\t      this.editor.bubbling();\n\t    }\n\t  }, {\n\t    key: \"disconnectedCallback\",\n\t    value: function disconnectedCallback() {\n\t      destroyEditor(this);\n\t    }\n\t  }, {\n\t    key: \"attributeChangedCallback\",\n\t    value: function attributeChangedCallback()\n\t    /*name, prevValue, value*/\n\t    {\n\t      _options(this);\n\t    }\n\t    /**\n\t     * The receiving and recording settings.\n\t     * @memberof XBubbles\n\t     * @function\n\t     * @param {string|object} name - string, if only one option is inserted, or object - if many options inserted\n\t     * @param {*} value\n\t     * @returns {*}\n\t     * @public\n\t     */\n\t\n\t  }, {\n\t    key: \"options\",\n\t    value: function options(name, value) {\n\t      return _options(this, name, value);\n\t    }\n\t    /**\n\t     * List bablow.\n\t     * @memberof XBubbles\n\t     * @type {array}\n\t     * @public\n\t     */\n\t\n\t  }, {\n\t    key: \"setContent\",\n\t\n\t    /**\n\t     * Set contents of the set.\n\t     * @function\n\t     * @memberof XBubbles\n\t     * @param {string} data\n\t     * @returns {boolean}\n\t     * @public\n\t     */\n\t    value: function setContent(data) {\n\t      return this.editor.setContent(data);\n\t    }\n\t  }, {\n\t    key: \"canAddBubble\",\n\t    value: function canAddBubble() {\n\t      return this.editor.canAddBubble();\n\t    }\n\t    /**\n\t     * Add bubble.\n\t     * @function\n\t     * @memberof XBubbles\n\t     * @param {string} bubbleText\n\t     * @param {Object} [data]\n\t     * @returns {boolean}\n\t     * @public\n\t     */\n\t\n\t  }, {\n\t    key: \"addBubble\",\n\t    value: function addBubble(bubbleText, data) {\n\t      return this.editor.addBubble(bubbleText, data);\n\t    }\n\t    /**\n\t     * Remove bubble.\n\t     * @function\n\t     * @memberof XBubbles\n\t     * @param {HTMLElement} nodeBubble\n\t     * @returns {boolean}\n\t     * @public\n\t     */\n\t\n\t  }, {\n\t    key: \"removeBubble\",\n\t    value: function removeBubble(nodeBubble) {\n\t      return this.editor.removeBubble(nodeBubble);\n\t    }\n\t    /**\n\t     * Edit bubble.\n\t     * @function\n\t     * @memberof XBubbles\n\t     * @param {HTMLElement} nodeBubble\n\t     * @returns {boolean}\n\t     * @public\n\t     */\n\t\n\t  }, {\n\t    key: \"editBubble\",\n\t    value: function editBubble(nodeBubble) {\n\t      return this.editor.editBubble(nodeBubble);\n\t    }\n\t    /**\n\t     * Starting formation bablow.\n\t     * @function\n\t     * @memberof XBubbles\n\t     * @returns {boolean}\n\t     * @public\n\t     */\n\t\n\t  }, {\n\t    key: \"bubbling\",\n\t    value: function bubbling() {\n\t      return this.editor.bubbling();\n\t    }\n\t  }, {\n\t    key: \"items\",\n\t    get: function get() {\n\t      return this.editor.getItems();\n\t    }\n\t    /**\n\t     * The value entered.\n\t     * @memberof XBubbles\n\t     * @type {string}\n\t     * @public\n\t     */\n\t\n\t  }, {\n\t    key: \"inputValue\",\n\t    get: function get() {\n\t      return this.editor.inputValue();\n\t    }\n\t  }]);\n\t\n\t  return XBubbles;\n\t}(_wrapNativeSuper(HTMLDivElement));\n\t\n\tcontext.customElements.define('x-bubbles', XBubbles, {\n\t  extends: 'div'\n\t});\n\tmodule.exports = XBubbles;\n\t\n\tfunction initEditor(node) {\n\t  if (!node.editor) {\n\t    Object.defineProperty(node, 'editor', {\n\t      configurable: true,\n\t      value: editor.init(node)\n\t    });\n\t  }\n\t}\n\t\n\tfunction destroyEditor(node) {\n\t  if (node.editor) {\n\t    editor.destroy(node);\n\t    delete node.editor;\n\t  }\n\t}\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function () {\n\t  /* eslint no-eval: 0 */\n\t  return this || (1, eval)('this');\n\t}();\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar context = __webpack_require__(1);\n\t\n\tvar bubbleset = __webpack_require__(3);\n\t\n\tvar bubble = __webpack_require__(4);\n\t\n\tvar cursor = __webpack_require__(13);\n\t\n\tvar _require = __webpack_require__(12),\n\t    EV = _require.EV,\n\t    PROPS = _require.PROPS;\n\t\n\tvar text = __webpack_require__(5);\n\t\n\tvar events = __webpack_require__(10);\n\t\n\tvar utils = __webpack_require__(6);\n\t\n\tvar drag = __webpack_require__(15);\n\t\n\tvar select = __webpack_require__(14);\n\t\n\tvar COMMON_EVENTS = {\n\t  blur: __webpack_require__(21),\n\t  click: __webpack_require__(22),\n\t  focus: __webpack_require__(23),\n\t  keydown: __webpack_require__(24)\n\t};\n\tvar EDITOR_EVENTS = {\n\t  blur: __webpack_require__(25),\n\t  click: __webpack_require__(26),\n\t  mousedown: __webpack_require__(27),\n\t  focus: __webpack_require__(28),\n\t  keydown: __webpack_require__(29),\n\t  keypress: __webpack_require__(30),\n\t  keyup: __webpack_require__(31),\n\t  paste: __webpack_require__(32)\n\t};\n\tvar SELECT_EVENTS = {\n\t  blur: __webpack_require__(33),\n\t  click: __webpack_require__(34),\n\t  keydown: __webpack_require__(35),\n\t  keypress: __webpack_require__(36)\n\t};\n\tvar PROXY_EVENTS = {\n\t  blur: events.proxyLocal,\n\t  click: events.proxyLocal,\n\t  mousedown: events.proxyLocal,\n\t  focus: events.proxyLocal,\n\t  keydown: events.proxyLocal,\n\t  keypress: events.proxyLocal,\n\t  keyup: events.proxyLocal,\n\t  mscontrolselect: events.prevent,\n\t  paste: events.proxyLocal,\n\t  resize: events.prevent,\n\t  resizestart: events.prevent\n\t};\n\t\n\texports.init = function (nodeWrap) {\n\t  var nodeEditor = nodeWrap;\n\t  nodeEditor.setAttribute('contenteditable', 'true');\n\t  nodeEditor.setAttribute('spellcheck', 'false');\n\t  events.onLocal(nodeEditor, COMMON_EVENTS);\n\t  events.onLocal(nodeEditor, EDITOR_EVENTS);\n\t\n\t  if (nodeEditor.options('selection')) {\n\t    events.onLocal(nodeEditor, SELECT_EVENTS);\n\t    drag.init(nodeEditor);\n\t  }\n\t\n\t  events.on(nodeEditor, PROXY_EVENTS);\n\t  nodeEditor.fireChange = utils.throttle(fireChange, nodeEditor);\n\t  nodeEditor.fireEdit = utils.throttle(fireEdit, nodeEditor);\n\t  nodeEditor.fireInput = utils.throttle(fireInput, nodeEditor);\n\t  nodeEditor.fireBeforeRemove = fireBeforeRemove.bind(nodeEditor);\n\t  return {\n\t    canAddBubble: canAddBubble.bind(nodeEditor),\n\t    addBubble: addBubble.bind(nodeEditor),\n\t    bubbling: bubbling.bind(nodeEditor),\n\t    editBubble: editBubble.bind(nodeEditor),\n\t    getItems: getItems.bind(nodeEditor),\n\t    inputValue: inputValue.bind(nodeEditor),\n\t    removeBubble: removeBubble.bind(nodeEditor),\n\t    setContent: setContent.bind(nodeEditor)\n\t  };\n\t};\n\t\n\texports.destroy = function (nodeWrap) {\n\t  var nodeEditor = nodeWrap;\n\t  events.off(nodeEditor, PROXY_EVENTS);\n\t  events.offLocal(nodeEditor, COMMON_EVENTS);\n\t  events.offLocal(nodeEditor, EDITOR_EVENTS);\n\t\n\t  if (nodeEditor.options('selection')) {\n\t    events.offLocal(nodeEditor, SELECT_EVENTS);\n\t    drag.destroy(nodeEditor);\n\t  }\n\t};\n\t\n\tfunction canAddBubble() {\n\t  return bubbleset.canAddBubble(this);\n\t}\n\t\n\tfunction getItems() {\n\t  return bubbleset.getBubbles(this);\n\t}\n\t\n\tfunction setContent(data) {\n\t  var selection = context.getSelection();\n\t  selection && selection.removeAllRanges();\n\t  var list = select.get(this);\n\t\n\t  if (list.length) {\n\t    bubbleset.removeBubbles(this, list);\n\t    this.fireChange();\n\t  }\n\t\n\t  while (this.firstChild) {\n\t    this.removeChild(this.firstChild);\n\t  }\n\t\n\t  data = text.html2text(data);\n\t  this.appendChild(this.ownerDocument.createTextNode(data));\n\t  bubble.bubbling(this);\n\t  cursor.restore(this);\n\t  return true;\n\t}\n\t\n\tfunction addBubble(bubbleText, dataAttributes) {\n\t  var nodeBubble = bubble.create(this, bubbleText, dataAttributes);\n\t\n\t  if (!this.canAddBubble() || !nodeBubble) {\n\t    return false;\n\t  }\n\t\n\t  if (text.text2bubble(this, nodeBubble)) {\n\t    this.fireInput();\n\t    this.fireChange();\n\t    cursor.restore(this);\n\t    return true;\n\t  }\n\t\n\t  return false;\n\t}\n\t\n\tfunction removeBubble(nodeBubble) {\n\t  if (this.contains(nodeBubble)) {\n\t    bubbleset.removeBubbles(this, [nodeBubble]);\n\t    this.fireChange();\n\t    return true;\n\t  }\n\t\n\t  return false;\n\t}\n\t\n\tfunction editBubble(nodeBubble) {\n\t  if (this.contains(nodeBubble)) {\n\t    return bubble.edit(this, nodeBubble);\n\t  }\n\t\n\t  return false;\n\t}\n\t\n\tfunction inputValue() {\n\t  var textRange = text.currentTextRange(this);\n\t  return textRange && text.textClean(textRange.toString()) || '';\n\t}\n\t\n\tfunction bubbling() {\n\t  bubble.bubbling(this);\n\t}\n\t/**\n\t * Генерация события редактирования бабла.\n\t * Выполняется в контексте узла-обертки.\n\t * @alias module:x-bubbles/editor.fireEdit\n\t * @param {HTMLElement} nodeBubble нода бабл\n\t * @this HTMLElement\n\t * @private\n\t */\n\t\n\t\n\tfunction fireEdit(nodeBubble) {\n\t  events.dispatch(this, EV.BUBBLE_EDIT, {\n\t    bubbles: false,\n\t    cancelable: false,\n\t    detail: {\n\t      data: nodeBubble\n\t    }\n\t  });\n\t}\n\t/**\n\t * Генерация события изменения набора баблов.\n\t * Выполняется в контексте узла-обертки.\n\t * @alias module:x-bubbles/editor.fireChange\n\t * @this HTMLElement\n\t * @private\n\t */\n\t\n\t\n\tfunction fireChange() {\n\t  events.dispatch(this, EV.CHANGE, {\n\t    bubbles: false,\n\t    cancelable: false\n\t  });\n\t}\n\t/**\n\t * Генерация события ввода текста.\n\t * Выполняется в контексте узла-обертки.\n\t * @alias module:x-bubbles/editor.fireInput\n\t * @this HTMLElement\n\t * @private\n\t */\n\t\n\t\n\tfunction fireInput() {\n\t  var editText = inputValue.call(this);\n\t\n\t  if (this[PROPS.BUBBLE_VALUE] !== editText) {\n\t    this[PROPS.BUBBLE_VALUE] = editText;\n\t    events.dispatch(this, EV.BUBBLE_INPUT, {\n\t      bubbles: false,\n\t      cancelable: false,\n\t      detail: {\n\t        data: editText\n\t      }\n\t    });\n\t  }\n\t}\n\t/**\n\t * Генерация события удаления баблов перед выполнением удаления из DOM.\n\t * Выполняется в контексте узла-обертки.\n\t * @alias module:x-bubbles/editor.fireRemove\n\t * @param {array} list список удаляемых узлов\n\t * @this HTMLElement\n\t * @private\n\t */\n\t\n\t\n\tfunction fireBeforeRemove(list) {\n\t  events.dispatch(this, EV.BEFORE_REMOVE, {\n\t    bubbles: false,\n\t    cancelable: false,\n\t    detail: {\n\t      data: list\n\t    }\n\t  });\n\t}\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar bubble = __webpack_require__(4);\n\t\n\tvar text = __webpack_require__(5);\n\t\n\texports.closestNodeBubble = closestNodeBubble;\n\texports.closestNodeSet = closestNodeSet;\n\texports.findBubbleLeft = findBubbleLeft;\n\texports.findBubbleRight = findBubbleRight;\n\texports.getBubbles = getBubbles;\n\texports.bubblesCount = bubblesCount;\n\texports.hasBubbles = hasBubbles;\n\texports.headBubble = headBubble;\n\texports.lastBubble = lastBubble;\n\texports.nextBubble = nextBubble;\n\texports.prevBubble = prevBubble;\n\texports.removeBubbles = removeBubbles;\n\texports.moveBubbles = moveBubbles;\n\texports.canAddBubble = canAddBubble;\n\texports.getRemainingCapacity = getRemainingCapacity;\n\t\n\tfunction lastBubble(nodeSet) {\n\t  return nodeSet.querySelector('[bubble]:last-child');\n\t}\n\t\n\tfunction headBubble(nodeSet) {\n\t  return nodeSet.querySelector('[bubble]:first-child');\n\t}\n\t\n\tfunction getBubbles(nodeSet) {\n\t  return Array.prototype.slice.call(nodeSet.querySelectorAll('[bubble]'));\n\t}\n\t\n\tfunction bubblesCount(nodeSet) {\n\t  var bubbles = getBubbles(nodeSet);\n\t  return bubbles.length;\n\t}\n\t\n\tfunction hasBubbles(nodeSet) {\n\t  return Boolean(nodeSet.querySelector('[bubble]'));\n\t}\n\t\n\tfunction findBubbleLeft(selection) {\n\t  if (!selection.focusNode || !selection.anchorNode) {\n\t    return;\n\t  }\n\t\n\t  var node = selection.focusNode.previousSibling;\n\t\n\t  if (selection.anchorNode !== selection.focusNode && selection.anchorNode.compareDocumentPosition(selection.focusNode) & Node.DOCUMENT_POSITION_FOLLOWING) {\n\t    node = selection.anchorNode.previousSibling;\n\t  }\n\t\n\t  while (node) {\n\t    if (bubble.isBubbleNode(node)) {\n\t      return node;\n\t    }\n\t\n\t    if (node.nodeType === Node.TEXT_NODE && text.textClean(node.nodeValue)) {\n\t      return;\n\t    }\n\t\n\t    node = node.previousSibling;\n\t  }\n\t}\n\t\n\tfunction findBubbleRight(selection) {\n\t  if (!selection.focusNode || !selection.anchorNode) {\n\t    return;\n\t  }\n\t\n\t  var node = selection.focusNode.nextSibling;\n\t\n\t  if (selection.anchorNode !== selection.focusNode && selection.anchorNode.compareDocumentPosition(selection.focusNode) & Node.DOCUMENT_POSITION_FOLLOWING) {\n\t    node = selection.anchorNode.nextSibling;\n\t  }\n\t\n\t  while (node) {\n\t    if (bubble.isBubbleNode(node)) {\n\t      return node;\n\t    }\n\t\n\t    if (node.nodeType === Node.TEXT_NODE && text.textClean(node.nodeValue)) {\n\t      return;\n\t    }\n\t\n\t    node = node.nextSibling;\n\t  }\n\t}\n\t\n\tfunction closestNodeSet(node) {\n\t  while (node) {\n\t    if (isEditorNode(node)) {\n\t      return node;\n\t    }\n\t\n\t    node = node.parentNode;\n\t  }\n\t}\n\t\n\tfunction closestNodeBubble(node) {\n\t  while (node) {\n\t    if (bubble.isBubbleNode(node)) {\n\t      return node;\n\t    }\n\t\n\t    if (isEditorNode(node)) {\n\t      return;\n\t    }\n\t\n\t    node = node.parentNode;\n\t  }\n\t}\n\t\n\tfunction prevBubble(target) {\n\t  var node = target && target.previousSibling;\n\t\n\t  while (node) {\n\t    if (bubble.isBubbleNode(node)) {\n\t      return node;\n\t    }\n\t\n\t    node = node.previousSibling;\n\t  }\n\t}\n\t\n\tfunction nextBubble(target) {\n\t  var node = target && target.nextSibling;\n\t\n\t  while (node) {\n\t    if (bubble.isBubbleNode(node)) {\n\t      return node;\n\t    }\n\t\n\t    node = node.nextSibling;\n\t  }\n\t}\n\t\n\tfunction isEditorNode(node) {\n\t  return node.nodeType === Node.ELEMENT_NODE && node.getAttribute('is') === 'x-bubbles';\n\t}\n\t\n\tfunction removeBubbles(nodeEditor, list) {\n\t  nodeEditor.fireBeforeRemove(list);\n\t  list.forEach(function (item) {\n\t    return nodeEditor.removeChild(item);\n\t  });\n\t}\n\t\n\tfunction moveBubbles(nodeEditorFrom, nodeEditorTo, list) {\n\t  var remainingCapacity = getRemainingCapacity(nodeEditorTo);\n\t\n\t  if (remainingCapacity <= 0) {\n\t    return;\n\t  }\n\t\n\t  var movedBubbles = list.slice(0, remainingCapacity);\n\t  nodeEditorFrom.fireBeforeRemove(movedBubbles);\n\t  movedBubbles.forEach(function (item) {\n\t    return nodeEditorTo.appendChild(item);\n\t  });\n\t}\n\t\n\tfunction canAddBubble(nodeEditor) {\n\t  var bubblesLimit = nodeEditor.options('limit');\n\t  return !bubblesLimit || bubblesCount(nodeEditor) < bubblesLimit;\n\t}\n\t\n\tfunction getRemainingCapacity(nodeEditor) {\n\t  var bubblesLimit = nodeEditor.options('limit');\n\t\n\t  if (!bubblesLimit) {\n\t    return Number.POSITIVE_INFINITY;\n\t  }\n\t\n\t  return bubblesLimit - bubblesCount(nodeEditor);\n\t}\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar context = __webpack_require__(1);\n\t\n\tvar text = __webpack_require__(5);\n\t\n\tvar bubbleset = __webpack_require__(3);\n\t\n\tvar _require = __webpack_require__(6),\n\t    escape = _require.escape,\n\t    canUseDrag = _require.canUseDrag;\n\t\n\texports.isBubbleNode = isBubbleNode;\n\texports.bubbling = bubbling;\n\texports.create = create;\n\texports.edit = edit;\n\t\n\tfunction isBubbleNode(node) {\n\t  if (!node || node.nodeType !== Node.ELEMENT_NODE) {\n\t    return false;\n\t  }\n\t\n\t  return node.hasAttribute('bubble');\n\t}\n\t\n\tfunction edit(nodeSet, nodeBubble) {\n\t  if (nodeBubble.hasAttribute('readonly')) {\n\t    return false;\n\t  }\n\t\n\t  var selection = context.getSelection();\n\t\n\t  if (!selection) {\n\t    return false;\n\t  }\n\t\n\t  var bubbleDeformation = nodeSet.options('bubbleDeformation');\n\t  var rangeParams = bubbleDeformation(nodeBubble);\n\t\n\t  if (!rangeParams) {\n\t    var dataText = text.textClean(nodeBubble.innerText);\n\t    rangeParams = {\n\t      text: dataText,\n\t      startOffset: 0,\n\t      endOffset: dataText.length\n\t    };\n\t  }\n\t\n\t  var textFake = text.createZws();\n\t  var textNode = context.document.createTextNode(rangeParams.text);\n\t  nodeSet.fireEdit(nodeBubble);\n\t  nodeSet.replaceChild(textNode, nodeBubble);\n\t  nodeSet.insertBefore(textFake, textNode);\n\t  var range = context.document.createRange();\n\t  range.setStart(textNode, rangeParams.startOffset);\n\t  range.setEnd(textNode, rangeParams.endOffset);\n\t  selection.removeAllRanges();\n\t  selection.addRange(range);\n\t  return true;\n\t}\n\t/**\n\t * У обертки нельзя делать tabindex=-1, иначе будет слетать фокус с поля ввода.\n\t * @param {HTMLElement} nodeEditor\n\t * @param {string} dataText\n\t * @param {Object} [dataAttributes={}]\n\t * @returns {?HTMLElement}\n\t */\n\t\n\t\n\tfunction create(nodeEditor, dataText) {\n\t  var dataAttributes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t  dataText = text.textClean(dataText);\n\t\n\t  if (!dataText) {\n\t    return;\n\t  }\n\t\n\t  var bubbleFormation = nodeEditor.options('bubbleFormation');\n\t  var classBubble = nodeEditor.options('classBubble');\n\t  var draggable = canUseDrag && nodeEditor.options('draggable') && nodeEditor.options('selection');\n\t  var wrap = nodeEditor.ownerDocument.createElement('span');\n\t  wrap.innerText = dataText;\n\t\n\t  for (var key in dataAttributes) {\n\t    if (dataAttributes[key]) {\n\t      wrap.setAttribute(\"data-\".concat(key), escape(dataAttributes[key]));\n\t    }\n\t  }\n\t\n\t  bubbleFormation(wrap);\n\t\n\t  if (classBubble) {\n\t    var classes = String(classBubble).trim().split(/\\s+/);\n\t    var len = classes.length;\n\t\n\t    while (len--) {\n\t      wrap.classList.add(classes[len]);\n\t    }\n\t  }\n\t\n\t  wrap.setAttribute('bubble', '');\n\t  wrap.setAttribute('contenteditable', 'false');\n\t  draggable && wrap.setAttribute('draggable', 'true');\n\t  return wrap;\n\t}\n\t\n\tfunction bubbling(nodeSet) {\n\t  var begining = nodeSet.options('begining');\n\t  var ending = nodeSet.options('ending');\n\t  var separator = nodeSet.options('separator');\n\t  var tokenizer = nodeSet.options('tokenizer');\n\t  var ranges = getBubbleRanges(nodeSet);\n\t  var nodes = [];\n\t  var remainingCapacity = bubbleset.getRemainingCapacity(nodeSet);\n\t  ranges.forEach(function (range) {\n\t    var dataText = text.textClean(range.toString());\n\t\n\t    if (!dataText) {\n\t      range.deleteContents();\n\t      return;\n\t    }\n\t\n\t    var textParts = [dataText];\n\t\n\t    if (tokenizer) {\n\t      textParts = tokenizer(dataText);\n\t    } else {\n\t      if (separator) {\n\t        textParts = dataText.split(separator).map(trimIterator).filter(nonEmptyIterator);\n\t      }\n\t\n\t      if (ending) {\n\t        textParts = textParts.reduce(function (parts, str) {\n\t          return parts.concat(parseFragmentByEnding(str, ending));\n\t        }, []).map(trimIterator).filter(nonEmptyIterator);\n\t      } else if (begining) {\n\t        textParts = textParts.reduce(function (parts, str) {\n\t          return parts.concat(parseFragmentByBeginning(str, begining));\n\t        }, []).map(trimIterator).filter(nonEmptyIterator);\n\t      }\n\t    }\n\t\n\t    if (!Array.isArray(textParts) || !textParts.length) {\n\t      range.deleteContents();\n\t      return;\n\t    }\n\t\n\t    var fragment = context.document.createDocumentFragment();\n\t    textParts.forEach(function (textPart) {\n\t      if (nodes.length >= remainingCapacity) {\n\t        return;\n\t      }\n\t\n\t      var nodeBubble = create(nodeSet, textPart);\n\t\n\t      if (nodeBubble) {\n\t        fragment.appendChild(nodeBubble);\n\t        nodes.push(nodeBubble);\n\t      }\n\t    });\n\t    range.deleteContents();\n\t    range.insertNode(fragment);\n\t  });\n\t  nodeSet.fireInput();\n\t\n\t  if (nodes.length) {\n\t    nodeSet.fireChange();\n\t  }\n\t\n\t  return nodes;\n\t}\n\t\n\tfunction getBubbleRanges(nodeSet) {\n\t  var ranges = [];\n\t  var children = nodeSet.childNodes;\n\t  var range;\n\t  var node;\n\t\n\t  for (var i = 0; i < children.length; i++) {\n\t    node = children[i];\n\t\n\t    if (isBubbleNode(node)) {\n\t      if (range) {\n\t        range.setEndBefore(node);\n\t        ranges.push(range);\n\t        range = undefined;\n\t      }\n\t    } else {\n\t      if (!range) {\n\t        range = context.document.createRange();\n\t        range.setStartBefore(node);\n\t      }\n\t    }\n\t  }\n\t\n\t  if (range) {\n\t    range.setEndAfter(node);\n\t    ranges.push(range);\n\t  }\n\t\n\t  return ranges;\n\t}\n\t\n\tfunction trimIterator(str) {\n\t  return str.trim();\n\t}\n\t\n\tfunction nonEmptyIterator(str) {\n\t  return Boolean(str);\n\t}\n\t\n\tfunction parseFragmentByEnding(str, reg) {\n\t  var parts = [];\n\t  var lastIndex = 0;\n\t  var loop = 999;\n\t  reg.lastIndex = 0;\n\t\n\t  while (reg.exec(str) !== null && loop) {\n\t    loop--;\n\t    parts.push(str.substring(lastIndex, reg.lastIndex));\n\t    lastIndex = reg.lastIndex;\n\t  }\n\t\n\t  return parts;\n\t}\n\t\n\tfunction parseFragmentByBeginning(str, reg) {\n\t  var parts = [];\n\t  var res;\n\t  var index = 0;\n\t  var loop = 999;\n\t  reg.lastIndex = 0;\n\t\n\t  while ((res = reg.exec(str)) !== null && loop) {\n\t    loop--;\n\t\n\t    if (index !== res.index) {\n\t      parts.push(str.substring(index, res.index));\n\t      index = res.index;\n\t    }\n\t  }\n\t\n\t  parts.push(str.substring(index, str.length));\n\t  return parts;\n\t}\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar context = __webpack_require__(1);\n\t\n\tvar bubbleset = __webpack_require__(3);\n\t\n\tvar _require = __webpack_require__(6),\n\t    getSelection = _require.getSelection,\n\t    correctSelection = _require.correctSelection;\n\t/* eslint-disable max-len */\n\t\n\t\n\tvar REG_REPLACE_NON_PRINTABLE = /[\\0-\\x1F\\x7F-\\x9F\\xAD\\u0378\\u0379\\u037F-\\u0383\\u038B\\u038D\\u03A2\\u0528-\\u0530\\u0557\\u0558\\u0560\\u0588\\u058B-\\u058E\\u0590\\u05C8-\\u05CF\\u05EB-\\u05EF\\u05F5-\\u0605\\u061C\\u061D\\u06DD\\u070E\\u070F\\u074B\\u074C\\u07B2-\\u07BF\\u07FB-\\u07FF\\u082E\\u082F\\u083F\\u085C\\u085D\\u085F-\\u089F\\u08A1\\u08AD-\\u08E3\\u08FF\\u0978\\u0980\\u0984\\u098D\\u098E\\u0991\\u0992\\u09A9\\u09B1\\u09B3-\\u09B5\\u09BA\\u09BB\\u09C5\\u09C6\\u09C9\\u09CA\\u09CF-\\u09D6\\u09D8-\\u09DB\\u09DE\\u09E4\\u09E5\\u09FC-\\u0A00\\u0A04\\u0A0B-\\u0A0E\\u0A11\\u0A12\\u0A29\\u0A31\\u0A34\\u0A37\\u0A3A\\u0A3B\\u0A3D\\u0A43-\\u0A46\\u0A49\\u0A4A\\u0A4E-\\u0A50\\u0A52-\\u0A58\\u0A5D\\u0A5F-\\u0A65\\u0A76-\\u0A80\\u0A84\\u0A8E\\u0A92\\u0AA9\\u0AB1\\u0AB4\\u0ABA\\u0ABB\\u0AC6\\u0ACA\\u0ACE\\u0ACF\\u0AD1-\\u0ADF\\u0AE4\\u0AE5\\u0AF2-\\u0B00\\u0B04\\u0B0D\\u0B0E\\u0B11\\u0B12\\u0B29\\u0B31\\u0B34\\u0B3A\\u0B3B\\u0B45\\u0B46\\u0B49\\u0B4A\\u0B4E-\\u0B55\\u0B58-\\u0B5B\\u0B5E\\u0B64\\u0B65\\u0B78-\\u0B81\\u0B84\\u0B8B-\\u0B8D\\u0B91\\u0B96-\\u0B98\\u0B9B\\u0B9D\\u0BA0-\\u0BA2\\u0BA5-\\u0BA7\\u0BAB-\\u0BAD\\u0BBA-\\u0BBD\\u0BC3-\\u0BC5\\u0BC9\\u0BCE\\u0BCF\\u0BD1-\\u0BD6\\u0BD8-\\u0BE5\\u0BFB-\\u0C00\\u0C04\\u0C0D\\u0C11\\u0C29\\u0C34\\u0C3A-\\u0C3C\\u0C45\\u0C49\\u0C4E-\\u0C54\\u0C57\\u0C5A-\\u0C5F\\u0C64\\u0C65\\u0C70-\\u0C77\\u0C80\\u0C81\\u0C84\\u0C8D\\u0C91\\u0CA9\\u0CB4\\u0CBA\\u0CBB\\u0CC5\\u0CC9\\u0CCE-\\u0CD4\\u0CD7-\\u0CDD\\u0CDF\\u0CE4\\u0CE5\\u0CF0\\u0CF3-\\u0D01\\u0D04\\u0D0D\\u0D11\\u0D3B\\u0D3C\\u0D45\\u0D49\\u0D4F-\\u0D56\\u0D58-\\u0D5F\\u0D64\\u0D65\\u0D76-\\u0D78\\u0D80\\u0D81\\u0D84\\u0D97-\\u0D99\\u0DB2\\u0DBC\\u0DBE\\u0DBF\\u0DC7-\\u0DC9\\u0DCB-\\u0DCE\\u0DD5\\u0DD7\\u0DE0-\\u0DF1\\u0DF5-\\u0E00\\u0E3B-\\u0E3E\\u0E5C-\\u0E80\\u0E83\\u0E85\\u0E86\\u0E89\\u0E8B\\u0E8C\\u0E8E-\\u0E93\\u0E98\\u0EA0\\u0EA4\\u0EA6\\u0EA8\\u0EA9\\u0EAC\\u0EBA\\u0EBE\\u0EBF\\u0EC5\\u0EC7\\u0ECE\\u0ECF\\u0EDA\\u0EDB\\u0EE0-\\u0EFF\\u0F48\\u0F6D-\\u0F70\\u0F98\\u0FBD\\u0FCD\\u0FDB-\\u0FFF\\u10C6\\u10C8-\\u10CC\\u10CE\\u10CF\\u1249\\u124E\\u124F\\u1257\\u1259\\u125E\\u125F\\u1289\\u128E\\u128F\\u12B1\\u12B6\\u12B7\\u12BF\\u12C1\\u12C6\\u12C7\\u12D7\\u1311\\u1316\\u1317\\u135B\\u135C\\u137D-\\u137F\\u139A-\\u139F\\u13F5-\\u13FF\\u169D-\\u169F\\u16F1-\\u16FF\\u170D\\u1715-\\u171F\\u1737-\\u173F\\u1754-\\u175F\\u176D\\u1771\\u1774-\\u177F\\u17DE\\u17DF\\u17EA-\\u17EF\\u17FA-\\u17FF\\u180F\\u181A-\\u181F\\u1878-\\u187F\\u18AB-\\u18AF\\u18F6-\\u18FF\\u191D-\\u191F\\u192C-\\u192F\\u193C-\\u193F\\u1941-\\u1943\\u196E\\u196F\\u1975-\\u197F\\u19AC-\\u19AF\\u19CA-\\u19CF\\u19DB-\\u19DD\\u1A1C\\u1A1D\\u1A5F\\u1A7D\\u1A7E\\u1A8A-\\u1A8F\\u1A9A-\\u1A9F\\u1AAE-\\u1AFF\\u1B4C-\\u1B4F\\u1B7D-\\u1B7F\\u1BF4-\\u1BFB\\u1C38-\\u1C3A\\u1C4A-\\u1C4C\\u1C80-\\u1CBF\\u1CC8-\\u1CCF\\u1CF7-\\u1CFF\\u1DE7-\\u1DFB\\u1F16\\u1F17\\u1F1E\\u1F1F\\u1F46\\u1F47\\u1F4E\\u1F4F\\u1F58\\u1F5A\\u1F5C\\u1F5E\\u1F7E\\u1F7F\\u1FB5\\u1FC5\\u1FD4\\u1FD5\\u1FDC\\u1FF0\\u1FF1\\u1FF5\\u1FFF\\u200B-\\u200F\\u202A-\\u202E\\u2060-\\u206F\\u2072\\u2073\\u208F\\u209D-\\u209F\\u20BB-\\u20CF\\u20F1-\\u20FF\\u218A-\\u218F\\u23F4-\\u23FF\\u2427-\\u243F\\u244B-\\u245F\\u2700\\u2B4D-\\u2B4F\\u2B5A-\\u2BFF\\u2C2F\\u2C5F\\u2CF4-\\u2CF8\\u2D26\\u2D28-\\u2D2C\\u2D2E\\u2D2F\\u2D68-\\u2D6E\\u2D71-\\u2D7E\\u2D97-\\u2D9F\\u2DA7\\u2DAF\\u2DB7\\u2DBF\\u2DC7\\u2DCF\\u2DD7\\u2DDF\\u2E3C-\\u2E7F\\u2E9A\\u2EF4-\\u2EFF\\u2FD6-\\u2FEF\\u2FFC-\\u2FFF\\u3040\\u3097\\u3098\\u3100-\\u3104\\u312E-\\u3130\\u318F\\u31BB-\\u31BF\\u31E4-\\u31EF\\u321F\\u32FF\\u4DB6-\\u4DBF\\u9FCD-\\u9FFF\\uA48D-\\uA48F\\uA4C7-\\uA4CF\\uA62C-\\uA63F\\uA698-\\uA69E\\uA6F8-\\uA6FF\\uA78F\\uA794-\\uA79F\\uA7AB-\\uA7F7\\uA82C-\\uA82F\\uA83A-\\uA83F\\uA878-\\uA87F\\uA8C5-\\uA8CD\\uA8DA-\\uA8DF\\uA8FC-\\uA8FF\\uA954-\\uA95E\\uA97D-\\uA97F\\uA9CE\\uA9DA-\\uA9DD\\uA9E0-\\uA9FF\\uAA37-\\uAA3F\\uAA4E\\uAA4F\\uAA5A\\uAA5B\\uAA7C-\\uAA7F\\uAAC3-\\uAADA\\uAAF7-\\uAB00\\uAB07\\uAB08\\uAB0F\\uAB10\\uAB17-\\uAB1F\\uAB27\\uAB2F-\\uABBF\\uABEE\\uABEF\\uABFA-\\uABFF\\uD7A4-\\uD7AF\\uD7C7-\\uD7CA\\uD7FC-\\uF8FF\\uFA6E\\uFA6F\\uFADA-\\uFAFF\\uFB07-\\uFB12\\uFB18-\\uFB1C\\uFB37\\uFB3D\\uFB3F\\uFB42\\uFB45\\uFBC2-\\uFBD2\\uFD40-\\uFD4F\\uFD90\\uFD91\\uFDC8-\\uFDEF\\uFDFE\\uFDFF\\uFE1A-\\uFE1F\\uFE27-\\uFE2F\\uFE53\\uFE67\\uFE6C-\\uFE6F\\uFE75\\uFEFD-\\uFF00\\uFFBF-\\uFFC1\\uFFC8\\uFFC9\\uFFD0\\uFFD1\\uFFD8\\uFFD9\\uFFDD-\\uFFDF\\uFFE7\\uFFEF-\\uFFFB\\uFFFE\\uFFFF]/g;\n\tvar REG_ZWS = /\\u200B/;\n\tvar TEXT_ZWS = \"\\u200B\";\n\texports.isEmptyLeft = isEmptyLeft;\n\texports.isEmptyRight = isEmptyRight;\n\texports.arrowRight = arrowRight;\n\texports.arrowLeft = arrowLeft;\n\texports.remove = remove;\n\texports.html2text = html2text;\n\texports.currentTextRange = currentTextRange;\n\texports.text2bubble = text2bubble;\n\texports.replaceString = replaceString;\n\texports.findTextBorderNode = findTextBorderNode;\n\texports.selectFromCursorToStrBegin = selectFromCursorToStrBegin;\n\texports.selectAll = selectAll;\n\texports.textClean = textClean;\n\texports.checkZws = checkZws;\n\texports.createZws = createZws;\n\texports.hasNear = hasNear;\n\t\n\tfunction isEmptyLeft(selection) {\n\t  var _correctSelection = correctSelection(selection),\n\t      startNode = _correctSelection.startNode,\n\t      startOffset = _correctSelection.startOffset;\n\t\n\t  var isEmpty = true;\n\t  var node = startNode;\n\t\n\t  while (node) {\n\t    if (node.nodeType === Node.TEXT_NODE) {\n\t      var value = startOffset > 0 ? node.nodeValue.substring(0, startOffset) : node.nodeValue;\n\t\n\t      if (textClean(value)) {\n\t        isEmpty = false;\n\t        break;\n\t      }\n\t    } else {\n\t      break;\n\t    }\n\t\n\t    startOffset = 0;\n\t    node = node.previousSibling;\n\t  }\n\t\n\t  return isEmpty;\n\t}\n\t\n\tfunction isEmptyRight(selection) {\n\t  var _correctSelection2 = correctSelection(selection),\n\t      endNode = _correctSelection2.endNode,\n\t      endOffset = _correctSelection2.endOffset;\n\t\n\t  var node = endNode;\n\t\n\t  while (node) {\n\t    if (node.nodeType === Node.TEXT_NODE) {\n\t      var value = endOffset > -1 && endOffset < node.nodeValue.length ? node.nodeValue.substring(endOffset) : node.nodeValue;\n\t\n\t      if (textClean(value)) {\n\t        return false;\n\t      }\n\t    } else {\n\t      return false;\n\t    }\n\t\n\t    endOffset = -1;\n\t    node = node.nextSibling;\n\t  }\n\t\n\t  return true;\n\t}\n\t\n\tfunction text2bubble(nodeEditor, nodeBubble) {\n\t  var selection = getSelection(nodeEditor);\n\t  var range = selection && currentTextRange(nodeEditor, selection);\n\t\n\t  if (range) {\n\t    selection.removeAllRanges();\n\t    selection.addRange(range);\n\t    replace(selection, nodeBubble);\n\t  } else {\n\t    nodeEditor.appendChild(nodeBubble);\n\t  }\n\t\n\t  return true;\n\t}\n\t\n\tfunction currentTextRange(nodeEditor, selection) {\n\t  selection = selection || getSelection(nodeEditor);\n\t\n\t  if (!selection) {\n\t    return;\n\t  }\n\t\n\t  var pointNode = selection.focusNode && selection.focusNode.nodeType === Node.TEXT_NODE ? selection.focusNode : selection.anchorNode && selection.anchorNode.nodeType === Node.TEXT_NODE ? selection.anchorNode : undefined;\n\t\n\t  if (!pointNode) {\n\t    return;\n\t  }\n\t\n\t  var startNode = pointNode;\n\t  var endNode = pointNode;\n\t  var item = pointNode;\n\t\n\t  while (item && item.nodeType === Node.TEXT_NODE) {\n\t    startNode = item;\n\t    item = item.previousSibling;\n\t  }\n\t\n\t  item = pointNode;\n\t\n\t  while (item && item.nodeType === Node.TEXT_NODE) {\n\t    endNode = item;\n\t    item = item.nextSibling;\n\t  }\n\t\n\t  var range = nodeEditor.ownerDocument.createRange();\n\t  range.setStartBefore(startNode);\n\t  range.setEndAfter(endNode);\n\t  return range;\n\t}\n\t\n\tfunction remove(selection) {\n\t  return replace(selection, createZws());\n\t}\n\t\n\tfunction replace(selection, node) {\n\t  if (!selection || !selection.rangeCount) {\n\t    return false;\n\t  }\n\t\n\t  var anchor = context.document.createElement('span');\n\t  selection.getRangeAt(0).surroundContents(anchor);\n\t  anchor.parentNode.replaceChild(node, anchor);\n\t  selection.removeAllRanges();\n\t\n\t  if (node.nodeType === Node.TEXT_NODE) {\n\t    var range = context.document.createRange(); // для ИЕ обязательно указывать node.nodeValue.length\n\t\n\t    range.setStart(node, node.nodeValue.length);\n\t    range.collapse(false);\n\t    selection.addRange(range);\n\t  } else {\n\t    selection.collapse(node, 0);\n\t  }\n\t\n\t  return true;\n\t}\n\t\n\tfunction replaceString(data, selection) {\n\t  data = textClean(data);\n\t\n\t  if (!data) {\n\t    return false;\n\t  }\n\t\n\t  selection = selection || context.getSelection();\n\t  var textNode = context.document.createTextNode(data);\n\t\n\t  if (!replace(selection, textNode)) {\n\t    return false;\n\t  }\n\t\n\t  selection.collapse(textNode, textNode.nodeValue.length);\n\t  return true;\n\t}\n\t\n\tfunction arrowLeft(selection, extend) {\n\t  selection = selection || context.getSelection();\n\t\n\t  if (!selection || !selection.anchorNode || selection.anchorNode.nodeType !== Node.TEXT_NODE) {\n\t    return false;\n\t  }\n\t\n\t  var _correctSelection3 = correctSelection(selection),\n\t      startNode = _correctSelection3.startNode,\n\t      endNode = _correctSelection3.endNode,\n\t      startOffset = _correctSelection3.startOffset,\n\t      endOffset = _correctSelection3.endOffset,\n\t      revert = _correctSelection3.revert;\n\t\n\t  if (!selection.isCollapsed && !extend) {\n\t    selection.collapse(startNode, startOffset);\n\t    return true;\n\t  }\n\t\n\t  var isNativeExtend = Boolean(selection.extend);\n\t  revert = isNativeExtend ? revert : !revert;\n\t  var node = revert ? startNode : endNode;\n\t  var offset = revert ? startOffset : endOffset;\n\t\n\t  while (node) {\n\t    if (node.nodeType !== Node.TEXT_NODE) {\n\t      return false;\n\t    }\n\t\n\t    if (offset === null) {\n\t      offset = node.nodeValue.length;\n\t    }\n\t\n\t    if (offset - 1 < 0) {\n\t      node = node.previousSibling;\n\t      offset = null;\n\t      continue;\n\t    }\n\t\n\t    var text = node.nodeValue.substring(offset - 1, offset);\n\t\n\t    if (checkZws(text)) {\n\t      offset = offset - 1;\n\t      continue;\n\t    }\n\t\n\t    break;\n\t  }\n\t\n\t  if (!node || offset === null) {\n\t    return false;\n\t  }\n\t\n\t  if (extend) {\n\t    if (isNativeExtend) {\n\t      selection.extend(node, offset - 1);\n\t    } else {\n\t      var range = context.document.createRange();\n\t\n\t      if (revert) {\n\t        range.setStart(node, offset - 1);\n\t        range.setEnd(endNode, endOffset);\n\t      } else {\n\t        range.setStart(startNode, startOffset);\n\t        range.setEnd(node, offset - 1);\n\t      }\n\t\n\t      selection.removeAllRanges();\n\t      selection.addRange(range);\n\t    }\n\t  } else {\n\t    selection.collapse(node, offset - 1);\n\t  }\n\t\n\t  return true;\n\t}\n\t\n\tfunction arrowRight(selection, extend) {\n\t  selection = selection || context.getSelection();\n\t\n\t  if (!selection || !selection.focusNode || selection.focusNode.nodeType !== Node.TEXT_NODE) {\n\t    return false;\n\t  }\n\t\n\t  var _correctSelection4 = correctSelection(selection),\n\t      startNode = _correctSelection4.startNode,\n\t      endNode = _correctSelection4.endNode,\n\t      startOffset = _correctSelection4.startOffset,\n\t      endOffset = _correctSelection4.endOffset,\n\t      revert = _correctSelection4.revert;\n\t\n\t  if (!selection.isCollapsed && !extend) {\n\t    selection.collapse(endNode, endOffset);\n\t    return true;\n\t  }\n\t\n\t  var node = revert ? startNode : endNode;\n\t  var offset = revert ? startOffset : endOffset;\n\t\n\t  while (node) {\n\t    if (node.nodeType !== Node.TEXT_NODE) {\n\t      return false;\n\t    }\n\t\n\t    var len = node.nodeValue.length;\n\t\n\t    if (offset + 1 > len) {\n\t      node = node.nextSibling;\n\t      offset = 0;\n\t      continue;\n\t    }\n\t\n\t    var text = node.nodeValue.substring(offset, offset + 1);\n\t\n\t    if (checkZws(text)) {\n\t      offset = offset + 1;\n\t      continue;\n\t    }\n\t\n\t    break;\n\t  }\n\t\n\t  if (!node) {\n\t    return false;\n\t  }\n\t\n\t  if (extend) {\n\t    var isNativeExtend = Boolean(selection.extend);\n\t\n\t    if (isNativeExtend) {\n\t      selection.extend(node, offset + 1);\n\t    } else {\n\t      var range = context.document.createRange();\n\t\n\t      if (revert) {\n\t        range.setStart(node, offset + 1);\n\t        range.setEnd(endNode, endOffset);\n\t      } else {\n\t        range.setStart(startNode, startOffset);\n\t        range.setEnd(node, offset + 1);\n\t      }\n\t\n\t      selection.removeAllRanges();\n\t      selection.addRange(range);\n\t    }\n\t  } else {\n\t    selection.collapse(node, offset + 1);\n\t  }\n\t\n\t  return true;\n\t}\n\t\n\tfunction html2text(value) {\n\t  if (!value) {\n\t    return '';\n\t  }\n\t\n\t  var DOMContainer = context.document.implementation.createHTMLDocument('').body;\n\t  DOMContainer.innerText = value;\n\t  return DOMContainer.innerText.replace(/^[\\u0020\\u00a0]+$/gm, '').replace(/\\n/gm, ' ').trim();\n\t}\n\t\n\tfunction findTextBorderNode(cursorNode, mode) {\n\t  var item = cursorNode;\n\t  var result = null;\n\t  var sibling = mode === 'begin' ? 'previousSibling' : 'nextSibling';\n\t\n\t  while (item && item.nodeType === Node.TEXT_NODE) {\n\t    result = item;\n\t    item = item[sibling];\n\t  }\n\t\n\t  return result;\n\t}\n\t\n\tfunction setTextSelection(selection, from, to, nodeSet) {\n\t  var hasBubbles = bubbleset.hasBubbles(nodeSet);\n\t  var range = context.document.createRange();\n\t  range.setStart(from.node, from.offset);\n\t  range.setEnd(to.node, to.offset);\n\t  var dataText = textClean(range.toString());\n\t\n\t  if (dataText || !dataText && !hasBubbles) {\n\t    if (!dataText) {\n\t      range.collapse();\n\t    }\n\t\n\t    selection.removeAllRanges();\n\t    selection.addRange(range);\n\t    return true;\n\t  }\n\t\n\t  return false;\n\t}\n\t\n\tfunction selectFromCursorToStrBegin(selection, nodeSet) {\n\t  selection = selection || context.getSelection();\n\t  var node = selection && selection.anchorNode;\n\t\n\t  if (!node || node.nodeType !== Node.TEXT_NODE) {\n\t    return false;\n\t  }\n\t\n\t  var cursorPosition = selection.anchorOffset;\n\t  var fromNode = findTextBorderNode(node, 'begin');\n\t  return setTextSelection(selection, {\n\t    node: fromNode,\n\t    offset: 0\n\t  }, {\n\t    node: node,\n\t    offset: cursorPosition\n\t  }, nodeSet);\n\t}\n\t\n\tfunction selectAll(selection, nodeSet) {\n\t  selection = selection || context.getSelection();\n\t  var node = selection && selection.anchorNode;\n\t\n\t  if (!node || node.nodeType !== Node.TEXT_NODE) {\n\t    return false;\n\t  }\n\t\n\t  var fromNode = findTextBorderNode(node, 'begin');\n\t  var toNode = findTextBorderNode(node, 'end');\n\t  return setTextSelection(selection, {\n\t    node: fromNode,\n\t    offset: 0\n\t  }, {\n\t    node: toNode,\n\t    offset: toNode.nodeValue ? toNode.nodeValue.length : 0\n\t  }, nodeSet);\n\t}\n\t\n\tfunction hasNear(selection) {\n\t  selection = selection || context.getSelection();\n\t  var node = selection && selection.anchorNode;\n\t\n\t  if (!node || node.nodeType !== Node.TEXT_NODE) {\n\t    return false;\n\t  }\n\t\n\t  var fromNode = findTextBorderNode(node, 'begin');\n\t  var toNode = findTextBorderNode(node, 'end');\n\t  var range = context.document.createRange();\n\t  range.setStart(fromNode, 0);\n\t  range.setEnd(toNode, toNode.nodeValue ? toNode.nodeValue.length : 0);\n\t  var dataText = textClean(range.toString());\n\t  return Boolean(dataText);\n\t}\n\t\n\tfunction createZws() {\n\t  return context.document.createTextNode(TEXT_ZWS);\n\t}\n\t\n\tfunction checkZws(value) {\n\t  return REG_ZWS.test(value);\n\t}\n\t\n\tfunction textClean(value) {\n\t  return String(value || '').trim().replace(REG_REPLACE_NON_PRINTABLE, '');\n\t}\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar raf = __webpack_require__(7);\n\t\n\tvar context = __webpack_require__(1);\n\t\n\tvar _require = __webpack_require__(10),\n\t    dispatch = _require.dispatch;\n\t\n\tvar _require2 = __webpack_require__(12),\n\t    EV = _require2.EV;\n\t/* eslint quotes: 0 */\n\t\n\t\n\tvar HTML_ESCAPES = {\n\t  '&': '&amp;',\n\t  '<': '&lt;',\n\t  '>': '&gt;',\n\t  '\"': '&quot;',\n\t  \"'\": '&#39;',\n\t  '`': '&#96;'\n\t};\n\tvar HTML_UNESCAPES = {\n\t  '&amp;': '&',\n\t  '&lt;': '<',\n\t  '&gt;': '>',\n\t  '&quot;': '\"',\n\t  '&#39;': \"'\",\n\t  '&#96;': '`'\n\t};\n\tvar REG_ESCAPED_HTML = /&(?:amp|lt|gt|quot|#39|#96);/g;\n\tvar REG_UNESCAPED_HTML = /[&<>\"'`]/g;\n\tvar REG_HAS_ESCAPED_HTML = RegExp(REG_ESCAPED_HTML.source);\n\tvar REG_HAS_UNESCAPED_HTML = RegExp(REG_UNESCAPED_HTML.source);\n\tvar REG_IE = /Trident|Edge/;\n\tvar REG_MOBILE_IE = /IEMobile/;\n\t\n\texports.getSelection = function (nodeEditor) {\n\t  var selection = context.getSelection();\n\t\n\t  if (selection && selection.anchorNode && nodeEditor.compareDocumentPosition(selection.anchorNode) & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n\t    return selection;\n\t  }\n\t};\n\t\n\texports.correctSelection = function (selection) {\n\t  var endNode = selection.focusNode;\n\t  var endOffset = selection.focusOffset;\n\t  var startNode = selection.anchorNode;\n\t  var startOffset = selection.anchorOffset;\n\t  var revert = false;\n\t\n\t  if (startNode === endNode) {\n\t    startOffset = Math.min(selection.anchorOffset, selection.focusOffset);\n\t    endOffset = Math.max(selection.anchorOffset, selection.focusOffset);\n\t    revert = selection.anchorOffset > selection.focusOffset;\n\t  } else {\n\t    var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n\t\n\t    if (position & Node.DOCUMENT_POSITION_PRECEDING) {\n\t      startNode = selection.focusNode;\n\t      startOffset = selection.focusOffset;\n\t      endNode = selection.anchorNode;\n\t      endOffset = selection.anchorOffset;\n\t      revert = true;\n\t    }\n\t  }\n\t\n\t  return {\n\t    startNode: startNode,\n\t    endNode: endNode,\n\t    startOffset: startOffset,\n\t    endOffset: endOffset,\n\t    revert: revert\n\t  };\n\t};\n\t\n\texports.throttle = function (callback, runContext) {\n\t  var throttle = 0;\n\t\n\t  var animationCallback = function animationCallback() {\n\t    throttle = 0;\n\t  };\n\t\n\t  return function () {\n\t    if (throttle) {\n\t      return;\n\t    }\n\t\n\t    throttle = raf(animationCallback);\n\t    callback.apply(runContext || this, arguments);\n\t  };\n\t};\n\t\n\texports.escape = function (data) {\n\t  data = String(data);\n\t\n\t  if (data && REG_HAS_UNESCAPED_HTML.test(data)) {\n\t    return data.replace(REG_UNESCAPED_HTML, escapeHtmlChar);\n\t  }\n\t\n\t  return data;\n\t};\n\t\n\texports.unescape = function (data) {\n\t  data = String(data);\n\t\n\t  if (data && REG_HAS_ESCAPED_HTML.test(data)) {\n\t    return data.replace(REG_ESCAPED_HTML, unescapeHtmlChar);\n\t  }\n\t\n\t  return data;\n\t};\n\t\n\texports.canUseDrag = function () {\n\t  return !REG_IE.test(context.navigator.userAgent);\n\t}();\n\t\n\texports.isIE = function () {\n\t  return REG_IE.test(context.navigator.userAgent);\n\t}();\n\t\n\texports.isMobileIE = function () {\n\t  return REG_MOBILE_IE.test(context.navigator.userAgent);\n\t}();\n\t\n\texports.ready = function () {\n\t  var elements = [];\n\t  var ready = false;\n\t  var lock = false;\n\t\n\t  function onready() {\n\t    raf(function () {\n\t      context.setTimeout(function () {\n\t        elements.length && dispatch(context, EV.READY, {\n\t          detail: {\n\t            data: elements.splice(0)\n\t          }\n\t        });\n\t        ready = true;\n\t      });\n\t    });\n\t  }\n\t\n\t  function run() {\n\t    if (ready && !lock) {\n\t      lock = true;\n\t      raf(function () {\n\t        dispatch(context, EV.READY, {\n\t          detail: {\n\t            data: elements.splice(0)\n\t          }\n\t        });\n\t        lock = false;\n\t      });\n\t    }\n\t  }\n\t\n\t  if (context.document.readyState === 'complete') {\n\t    onready();\n\t  } else if (context.document.readyState === 'interactive' && !context.attachEvent && (!context.HTMLImports || context.HTMLImports.ready)) {\n\t    onready();\n\t  } else {\n\t    context.addEventListener(context.HTMLImports && !context.HTMLImports.ready ? 'HTMLImportsLoaded' : 'DOMContentLoaded', onready);\n\t  }\n\t\n\t  return function (element) {\n\t    elements.push(element);\n\t    run();\n\t  };\n\t}();\n\t\n\tfunction unescapeHtmlChar(chr) {\n\t  return HTML_UNESCAPES[chr];\n\t}\n\t\n\tfunction escapeHtmlChar(chr) {\n\t  return HTML_ESCAPES[chr];\n\t}\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {var now = __webpack_require__(8)\n\t  , root = typeof window === 'undefined' ? global : window\n\t  , vendors = ['moz', 'webkit']\n\t  , suffix = 'AnimationFrame'\n\t  , raf = root['request' + suffix]\n\t  , caf = root['cancel' + suffix] || root['cancelRequest' + suffix]\n\t\n\tfor(var i = 0; !raf && i < vendors.length; i++) {\n\t  raf = root[vendors[i] + 'Request' + suffix]\n\t  caf = root[vendors[i] + 'Cancel' + suffix]\n\t      || root[vendors[i] + 'CancelRequest' + suffix]\n\t}\n\t\n\t// Some versions of FF have rAF but not cAF\n\tif(!raf || !caf) {\n\t  var last = 0\n\t    , id = 0\n\t    , queue = []\n\t    , frameDuration = 1000 / 60\n\t\n\t  raf = function(callback) {\n\t    if(queue.length === 0) {\n\t      var _now = now()\n\t        , next = Math.max(0, frameDuration - (_now - last))\n\t      last = next + _now\n\t      setTimeout(function() {\n\t        var cp = queue.slice(0)\n\t        // Clear queue here to prevent\n\t        // callbacks from appending listeners\n\t        // to the current frame's queue\n\t        queue.length = 0\n\t        for(var i = 0; i < cp.length; i++) {\n\t          if(!cp[i].cancelled) {\n\t            try{\n\t              cp[i].callback(last)\n\t            } catch(e) {\n\t              setTimeout(function() { throw e }, 0)\n\t            }\n\t          }\n\t        }\n\t      }, Math.round(next))\n\t    }\n\t    queue.push({\n\t      handle: ++id,\n\t      callback: callback,\n\t      cancelled: false\n\t    })\n\t    return id\n\t  }\n\t\n\t  caf = function(handle) {\n\t    for(var i = 0; i < queue.length; i++) {\n\t      if(queue[i].handle === handle) {\n\t        queue[i].cancelled = true\n\t      }\n\t    }\n\t  }\n\t}\n\t\n\tmodule.exports = function(fn) {\n\t  // Wrap in a new function to prevent\n\t  // `cancel` potentially being assigned\n\t  // to the native rAF function\n\t  return raf.call(root, fn)\n\t}\n\tmodule.exports.cancel = function() {\n\t  caf.apply(root, arguments)\n\t}\n\tmodule.exports.polyfill = function() {\n\t  root.requestAnimationFrame = raf\n\t  root.cancelAnimationFrame = caf\n\t}\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process) {// Generated by CoffeeScript 1.7.1\n\t(function() {\n\t  var getNanoSeconds, hrtime, loadTime;\n\t\n\t  if ((typeof performance !== \"undefined\" && performance !== null) && performance.now) {\n\t    module.exports = function() {\n\t      return performance.now();\n\t    };\n\t  } else if ((typeof process !== \"undefined\" && process !== null) && process.hrtime) {\n\t    module.exports = function() {\n\t      return (getNanoSeconds() - loadTime) / 1e6;\n\t    };\n\t    hrtime = process.hrtime;\n\t    getNanoSeconds = function() {\n\t      var hr;\n\t      hr = hrtime();\n\t      return hr[0] * 1e9 + hr[1];\n\t    };\n\t    loadTime = getNanoSeconds();\n\t  } else if (Date.now) {\n\t    module.exports = function() {\n\t      return Date.now() - loadTime;\n\t    };\n\t    loadTime = Date.now();\n\t  } else {\n\t    module.exports = function() {\n\t      return new Date().getTime() - loadTime;\n\t    };\n\t    loadTime = new Date().getTime();\n\t  }\n\t\n\t}).call(this);\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t// shim for using process in browser\n\tvar process = module.exports = {};\n\t\n\t// cached from whatever global is present so that test runners that stub it\n\t// don't break things.  But we need to wrap it in a try catch in case it is\n\t// wrapped in strict mode code which doesn't define any globals.  It's inside a\n\t// function because try/catches deoptimize in certain engines.\n\t\n\tvar cachedSetTimeout;\n\tvar cachedClearTimeout;\n\t\n\tfunction defaultSetTimout() {\n\t    throw new Error('setTimeout has not been defined');\n\t}\n\tfunction defaultClearTimeout () {\n\t    throw new Error('clearTimeout has not been defined');\n\t}\n\t(function () {\n\t    try {\n\t        if (typeof setTimeout === 'function') {\n\t            cachedSetTimeout = setTimeout;\n\t        } else {\n\t            cachedSetTimeout = defaultSetTimout;\n\t        }\n\t    } catch (e) {\n\t        cachedSetTimeout = defaultSetTimout;\n\t    }\n\t    try {\n\t        if (typeof clearTimeout === 'function') {\n\t            cachedClearTimeout = clearTimeout;\n\t        } else {\n\t            cachedClearTimeout = defaultClearTimeout;\n\t        }\n\t    } catch (e) {\n\t        cachedClearTimeout = defaultClearTimeout;\n\t    }\n\t} ())\n\tfunction runTimeout(fun) {\n\t    if (cachedSetTimeout === setTimeout) {\n\t        //normal enviroments in sane situations\n\t        return setTimeout(fun, 0);\n\t    }\n\t    // if setTimeout wasn't available but was latter defined\n\t    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n\t        cachedSetTimeout = setTimeout;\n\t        return setTimeout(fun, 0);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedSetTimeout(fun, 0);\n\t    } catch(e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n\t            return cachedSetTimeout.call(null, fun, 0);\n\t        } catch(e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n\t            return cachedSetTimeout.call(this, fun, 0);\n\t        }\n\t    }\n\t\n\t\n\t}\n\tfunction runClearTimeout(marker) {\n\t    if (cachedClearTimeout === clearTimeout) {\n\t        //normal enviroments in sane situations\n\t        return clearTimeout(marker);\n\t    }\n\t    // if clearTimeout wasn't available but was latter defined\n\t    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n\t        cachedClearTimeout = clearTimeout;\n\t        return clearTimeout(marker);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedClearTimeout(marker);\n\t    } catch (e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n\t            return cachedClearTimeout.call(null, marker);\n\t        } catch (e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n\t            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n\t            return cachedClearTimeout.call(this, marker);\n\t        }\n\t    }\n\t\n\t\n\t\n\t}\n\tvar queue = [];\n\tvar draining = false;\n\tvar currentQueue;\n\tvar queueIndex = -1;\n\t\n\tfunction cleanUpNextTick() {\n\t    if (!draining || !currentQueue) {\n\t        return;\n\t    }\n\t    draining = false;\n\t    if (currentQueue.length) {\n\t        queue = currentQueue.concat(queue);\n\t    } else {\n\t        queueIndex = -1;\n\t    }\n\t    if (queue.length) {\n\t        drainQueue();\n\t    }\n\t}\n\t\n\tfunction drainQueue() {\n\t    if (draining) {\n\t        return;\n\t    }\n\t    var timeout = runTimeout(cleanUpNextTick);\n\t    draining = true;\n\t\n\t    var len = queue.length;\n\t    while(len) {\n\t        currentQueue = queue;\n\t        queue = [];\n\t        while (++queueIndex < len) {\n\t            if (currentQueue) {\n\t                currentQueue[queueIndex].run();\n\t            }\n\t        }\n\t        queueIndex = -1;\n\t        len = queue.length;\n\t    }\n\t    currentQueue = null;\n\t    draining = false;\n\t    runClearTimeout(timeout);\n\t}\n\t\n\tprocess.nextTick = function (fun) {\n\t    var args = new Array(arguments.length - 1);\n\t    if (arguments.length > 1) {\n\t        for (var i = 1; i < arguments.length; i++) {\n\t            args[i - 1] = arguments[i];\n\t        }\n\t    }\n\t    queue.push(new Item(fun, args));\n\t    if (queue.length === 1 && !draining) {\n\t        runTimeout(drainQueue);\n\t    }\n\t};\n\t\n\t// v8 likes predictible objects\n\tfunction Item(fun, array) {\n\t    this.fun = fun;\n\t    this.array = array;\n\t}\n\tItem.prototype.run = function () {\n\t    this.fun.apply(null, this.array);\n\t};\n\tprocess.title = 'browser';\n\tprocess.browser = true;\n\tprocess.env = {};\n\tprocess.argv = [];\n\tprocess.version = ''; // empty string to avoid regexp issues\n\tprocess.versions = {};\n\t\n\tfunction noop() {}\n\t\n\tprocess.on = noop;\n\tprocess.addListener = noop;\n\tprocess.once = noop;\n\tprocess.off = noop;\n\tprocess.removeListener = noop;\n\tprocess.removeAllListeners = noop;\n\tprocess.emit = noop;\n\tprocess.prependListener = noop;\n\tprocess.prependOnceListener = noop;\n\t\n\tprocess.listeners = function (name) { return [] }\n\t\n\tprocess.binding = function (name) {\n\t    throw new Error('process.binding is not supported');\n\t};\n\t\n\tprocess.cwd = function () { return '/' };\n\tprocess.chdir = function (dir) {\n\t    throw new Error('process.chdir is not supported');\n\t};\n\tprocess.umask = function() { return 0; };\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\t\n\t/**\n\t * @module x-bubbles/events\n\t */\n\tvar context = __webpack_require__(1);\n\t\n\tvar CustomEventCommon = __webpack_require__(11);\n\t\n\tvar _require = __webpack_require__(12),\n\t    PROPS = _require.PROPS;\n\t\n\texports.scrollX = scrollX;\n\texports.scrollY = scrollY;\n\texports.dispatch = dispatch;\n\t\n\texports.keyCode = function (event) {\n\t  return event.charCode || event.keyCode;\n\t};\n\t\n\texports.metaKey = function (event) {\n\t  return event.ctrlKey || event.metaKey;\n\t};\n\t\n\texports.pageX = function (event) {\n\t  return event.pageX === null && event.clientX !== null ? event.clientX + scrollX() : event.pageX;\n\t};\n\t\n\texports.pageY = function (event) {\n\t  return event.pageY === null && event.clientY !== null ? event.clientY + scrollY() : event.pageY;\n\t};\n\t\n\texports.one = function (target, eventName, callback) {\n\t  toggleEvent(target, eventName, callback, true, false, true);\n\t};\n\t\n\texports.on = function (target, eventName, callback) {\n\t  toggleEvent(target, eventName, callback);\n\t};\n\t\n\texports.off = function (target, eventName, callback) {\n\t  toggleEvent(target, eventName, callback, false);\n\t};\n\t\n\texports.oneLocal = function (target, eventName, callback) {\n\t  toggleEvent(target, eventName, callback, true, true, true);\n\t};\n\t\n\texports.onLocal = function (target, eventName, callback) {\n\t  toggleEvent(target, eventName, callback, true, true);\n\t};\n\t\n\texports.offLocal = function (target, eventName, callback) {\n\t  toggleEvent(target, eventName, callback, false, true);\n\t};\n\t\n\texports.prevent = function (event) {\n\t  event.cancelBubble = true;\n\t  event.returnValue = false;\n\t  event.stopImmediatePropagation();\n\t  event.stopPropagation();\n\t  event.preventDefault();\n\t  return false;\n\t};\n\t\n\texports.proxyLocal = function (event) {\n\t  dispatchLocalEvent(event.currentTarget, event);\n\t};\n\t\n\tfunction scrollX() {\n\t  var html = context.document.documentElement;\n\t  var body = context.document.body;\n\t  return (html && html.scrollLeft || body && body.scrollLeft || 0) - (html.clientLeft || 0);\n\t}\n\t\n\tfunction scrollY() {\n\t  var html = context.document.documentElement;\n\t  var body = context.document.body;\n\t  return (html && html.scrollTop || body && body.scrollTop || 0) - (html.clientTop || 0);\n\t}\n\t/**\n\t * Designer events.\n\t *\n\t * @example\n\t * const { Custom } = require('event');\n\t *\n\t * new Custom('custom-event', {\n\t *     bubbles: true,\n\t *     cancelable: true,\n\t *     detail: { data: '123' }\n\t * })\n\t *\n\t * @alias module:x-bubbles/event~Custom\n\t * @constructor\n\t */\n\t\n\t\n\tvar Custom = function () {\n\t  if (typeof context.CustomEvent === 'function') {\n\t    return context.CustomEvent;\n\t  }\n\t\n\t  return CustomEventCommon;\n\t}();\n\t/**\n\t * Dispatch event.\n\t *\n\t * @example\n\t * const { dispatch } = require('event');\n\t * dispatch(node, 'custom-event', {\n\t *     bubbles: true,\n\t *     cancelable: true,\n\t *     detail: { data: '123' }\n\t * })\n\t *\n\t * @alias module:x-bubbles/event.dispatch\n\t * @param {HTMLElement} element node events\n\t * @param {string} name event name\n\t * @param {Object} params the event parameters\n\t * @param {boolean} [params.bubbles=false]\n\t * @param {boolean} [params.cancelable=false]\n\t * @param {*} [params.detail]\n\t */\n\t\n\t\n\tfunction dispatch(element, name) {\n\t  var params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t  element.dispatchEvent(new Custom(name, params));\n\t}\n\t\n\tfunction dispatchLocalEvent(element, event) {\n\t  var callbacks = element[PROPS.LOCAL_EVENTS] && element[PROPS.LOCAL_EVENTS][event.type] || [];\n\t  var sharedData = {};\n\t\n\t  for (var i = 0; i < callbacks.length; i++) {\n\t    if (event.immediatePropagationStopped) {\n\t      break;\n\t    }\n\t\n\t    callbacks[i](event, sharedData);\n\t  }\n\t}\n\t\n\tfunction oneCallback(element, eventName, callback) {\n\t  return function _callback(event) {\n\t    element.removeEventListener(eventName, _callback);\n\t    callback(event);\n\t  };\n\t}\n\t\n\tfunction getEventHandlersQueue(element, eventName) {\n\t  if (!element[PROPS.LOCAL_EVENTS]) {\n\t    element[PROPS.LOCAL_EVENTS] = {};\n\t  }\n\t\n\t  if (!element[PROPS.LOCAL_EVENTS][eventName]) {\n\t    element[PROPS.LOCAL_EVENTS][eventName] = [];\n\t  }\n\t\n\t  return element[PROPS.LOCAL_EVENTS][eventName];\n\t}\n\t\n\tvar EV_ACTIONS = {\n\t  addLocalEventListener: function addLocalEventListener(element, eventName, callback) {\n\t    getEventHandlersQueue(element, eventName).push(callback);\n\t  },\n\t  removeLocalEventListener: function removeLocalEventListener(element, eventName, callback) {\n\t    var callbacks = element[PROPS.LOCAL_EVENTS] && element[PROPS.LOCAL_EVENTS][eventName] || [];\n\t    var i = 0;\n\t\n\t    while (i < callbacks.length) {\n\t      if (callbacks[i] === callback) {\n\t        callbacks.splice(i, 1);\n\t      } else {\n\t        i++;\n\t      }\n\t    }\n\t  },\n\t  addEventListener: function addEventListener(element, eventName, callback) {\n\t    element.addEventListener(eventName, callback);\n\t  },\n\t  removeEventListener: function removeEventListener(element, eventName, callback) {\n\t    element.removeEventListener(eventName, callback);\n\t  }\n\t};\n\t\n\tfunction toggleEvent(element, eventName, userCallback) {\n\t  var isSet = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n\t  var isLocal = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\t  var isOne = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n\t  var events = userCallback ? _defineProperty({}, eventName, userCallback) : eventName;\n\t  var action = \"\".concat(isSet ? 'add' : 'remove').concat(isLocal ? 'Local' : '', \"EventListener\");\n\t\n\t  for (var name in events) {\n\t    var callback = isOne ? oneCallback(element, name, events[name]) : events[name];\n\t    EV_ACTIONS[action](element, name, callback);\n\t  }\n\t}\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar context = __webpack_require__(1);\n\t/**\n\t * @constant {Document}\n\t * @private\n\t */\n\t\n\t\n\tvar doc = context.document;\n\t/**\n\t * @constant {Object}\n\t * @private\n\t */\n\t\n\tvar protoEvent = context.Event.prototype;\n\tvar issetCustomEvent = false;\n\t\n\ttry {\n\t  issetCustomEvent = Boolean(doc.createEvent('CustomEvent'));\n\t} catch (e) {} // do nothing\n\t\n\t/**\n\t * The original function \"stopImmediatePropagation\"\n\t * @constant {function}\n\t * @private\n\t */\n\t\n\t\n\tvar stopImmediatePropagation = protoEvent.stopImmediatePropagation;\n\t/**\n\t * Override function to set properties \"immediatePropagationStopped\"\n\t */\n\t\n\tprotoEvent.stopImmediatePropagation = function () {\n\t  this.immediatePropagationStopped = true;\n\t\n\t  if (stopImmediatePropagation) {\n\t    stopImmediatePropagation.call(this);\n\t  } else {\n\t    this.stopPropagation();\n\t  }\n\t};\n\t\n\tvar CustomEventCommon = function () {\n\t  if (issetCustomEvent) {\n\t    return function (eventName, params) {\n\t      params = params || {};\n\t      var bubbles = Boolean(params.bubbles);\n\t      var cancelable = Boolean(params.cancelable);\n\t      var evt = doc.createEvent('CustomEvent');\n\t      evt.initCustomEvent(eventName, bubbles, cancelable, params.detail);\n\t      return evt;\n\t    };\n\t  }\n\t\n\t  return function (eventName, params) {\n\t    params = params || {};\n\t    var bubbles = Boolean(params.bubbles);\n\t    var cancelable = Boolean(params.cancelable);\n\t    var evt = doc.createEvent('Event');\n\t    evt.initEvent(eventName, bubbles, cancelable);\n\t    evt.detail = params.detail;\n\t    return evt;\n\t  };\n\t}();\n\t\n\tCustomEventCommon.prototype = protoEvent;\n\tmodule.exports = CustomEventCommon;\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\texports.KEY = {\n\t  a: 65,\n\t  Backspace: 8,\n\t  Bottom: 40,\n\t  c: 67,\n\t  Cmd: 91,\n\t  Comma: 44,\n\t  // ,\n\t  Delete: 46,\n\t  Enter: 13,\n\t  // Enter\n\t  Esc: 27,\n\t  Home: 36,\n\t  Left: 37,\n\t  Right: 39,\n\t  Semicolon: 59,\n\t  // ;\n\t  Space: 32,\n\t  Tab: 9,\n\t  Top: 38,\n\t  x: 88\n\t};\n\texports.CLS = {\n\t  DRAGSTART: 'drag',\n\t  DROPZONE: 'dropzone'\n\t};\n\texports.EV = {\n\t  BEFORE_REMOVE: 'before-remove',\n\t  BUBBLE_EDIT: 'bubble-edit',\n\t  BUBBLE_INPUT: 'bubble-input',\n\t  CHANGE: 'change',\n\t  DRAGEND: 'dragend',\n\t  DRAGENTER: 'dragenter',\n\t  DRAGLEAVE: 'dragleave',\n\t  DRAGSTART: 'dragstart',\n\t  DROP: 'drop',\n\t  READY: 'x-bubbles-ready'\n\t};\n\texports.PROPS = {\n\t  BUBBLE_VALUE: '__bubble_value__',\n\t  CLICK_TIME: '__click_time__',\n\t  LOCAL_EVENTS: '__events__',\n\t  LOCK_COPY: '__lock_copy__',\n\t  OPTIONS: '__options__'\n\t};\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * @module x-bubbles/cursor\n\t */\n\tvar context = __webpack_require__(1);\n\t\n\tvar text = __webpack_require__(5);\n\t\n\tvar select = __webpack_require__(14);\n\t\n\tvar utils = __webpack_require__(6);\n\t\n\texports.restore = restore;\n\texports.restoreBasis = restoreBasis;\n\t/**\n\t * Reset the cursor position to the end of the input field.\n\t * This action is forbidden in the IE Mobile because it\n\t * causes a browser crash. There is still no workaround.\n\t * @alias module:x-bubbles/cursor.restore\n\t * @param {HTMLElement} nodeSet\n\t */\n\t\n\tfunction restore(nodeSet) {\n\t  if (!utils.isMobileIE) {\n\t    if (!nodeSet.canAddBubble()) {\n\t      select.setLast(nodeSet);\n\t      return;\n\t    }\n\t\n\t    select.clear(nodeSet);\n\t    var basis = restoreBasis(nodeSet);\n\t    var selection = context.getSelection();\n\t    selection.removeAllRanges();\n\t    selection.collapse(basis, 1);\n\t  }\n\t}\n\t/**\n\t * The creation of the fake text at the end childNodes\n\t * @alias module:x-bubbles/cursor.restoreBasis\n\t * @param {HTMLElement} nodeSet\n\t * @returns {HTMLTextElement} fake text node\n\t */\n\t\n\t\n\tfunction restoreBasis(nodeSet) {\n\t  var fakeText = text.createZws();\n\t\n\t  if (nodeSet.hasChildNodes()) {\n\t    var lastNode = nodeSet.childNodes[nodeSet.childNodes.length - 1];\n\t\n\t    if (lastNode.isEqualNode(fakeText)) {\n\t      fakeText = lastNode;\n\t    } else {\n\t      nodeSet.appendChild(fakeText);\n\t    }\n\t  } else {\n\t    nodeSet.appendChild(fakeText);\n\t  }\n\t\n\t  return fakeText;\n\t}\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar context = __webpack_require__(1);\n\t\n\tvar utils = __webpack_require__(6);\n\t\n\tvar bubble = __webpack_require__(4);\n\t\n\tvar bubbleset = __webpack_require__(3);\n\t\n\tvar slice = Array.prototype.slice;\n\tvar PATH_SELECTED = '[bubble][selected]';\n\tvar PATH_NOT_SELECTED = '[bubble]:not([selected])';\n\texports.all = all;\n\texports.allLeft = allLeft;\n\texports.add = add;\n\texports.clear = clear;\n\texports.get = get;\n\texports.uniq = uniq;\n\texports.head = head;\n\texports.last = last;\n\texports.has = has;\n\texports.range = range;\n\texports.toggleUniq = toggleUniq;\n\texports.setLast = setLast;\n\texports.getEditable = getEditable;\n\t\n\tfunction range(node) {\n\t  if (!bubble.isBubbleNode(node)) {\n\t    return;\n\t  }\n\t\n\t  var set = node.parentNode;\n\t  var list = get(set);\n\t\n\t  if (!list.length) {\n\t    uniq(node);\n\t    return;\n\t  }\n\t\n\t  clear(set);\n\t  var headList = list[0];\n\t  var lastList = list[list.length - 1];\n\t\n\t  if (headList === lastList || !set.startRangeSelect) {\n\t    set.startRangeSelect = headList;\n\t  }\n\t\n\t  var fromNode;\n\t  var toNode;\n\t  var position = node.compareDocumentPosition(set.startRangeSelect);\n\t\n\t  if (position & Node.DOCUMENT_POSITION_PRECEDING) {\n\t    fromNode = set.startRangeSelect;\n\t    toNode = node;\n\t  } else {\n\t    fromNode = node;\n\t    toNode = set.startRangeSelect;\n\t  }\n\t\n\t  if (fromNode && toNode) {\n\t    var item = fromNode;\n\t\n\t    while (item) {\n\t      if (!setSelected(item)) {\n\t        break;\n\t      }\n\t\n\t      if (item === toNode) {\n\t        break;\n\t      }\n\t\n\t      item = item.nextSibling;\n\t    }\n\t\n\t    bubble.bubbling(set);\n\t  }\n\t}\n\t\n\tfunction all(nodeSet) {\n\t  slice.call(nodeSet.querySelectorAll(PATH_NOT_SELECTED)).forEach(function (item) {\n\t    return setSelected(item);\n\t  });\n\t  nodeSet.startRangeSelect = nodeSet.querySelector(PATH_SELECTED);\n\t  bubble.bubbling(nodeSet);\n\t  var selection = context.getSelection();\n\t  selection && selection.removeAllRanges();\n\t}\n\t\n\tfunction allLeft(nodeSet) {\n\t  var lastSelectedBubble = last(nodeSet);\n\t\n\t  if (!lastSelectedBubble) {\n\t    return;\n\t  }\n\t\n\t  for (var item = bubbleset.prevBubble(lastSelectedBubble); item; item = bubbleset.prevBubble(item)) {\n\t    setSelected(item);\n\t  }\n\t\n\t  nodeSet.startRangeSelect = nodeSet.querySelector(PATH_SELECTED);\n\t  bubble.bubbling(nodeSet);\n\t  var selection = context.getSelection();\n\t  selection && selection.removeAllRanges();\n\t}\n\t\n\tfunction has(nodeSet) {\n\t  return Boolean(nodeSet.querySelector(PATH_SELECTED));\n\t}\n\t\n\tfunction head(set) {\n\t  return get(set)[0];\n\t}\n\t\n\tfunction last(set) {\n\t  var list = get(set);\n\t  return list[list.length - 1];\n\t}\n\t\n\tfunction get(nodeSet) {\n\t  return slice.call(nodeSet.querySelectorAll(PATH_SELECTED));\n\t}\n\t\n\tfunction getEditable(nodeSet) {\n\t  if (!nodeSet.options('selection')) {\n\t    return false;\n\t  }\n\t\n\t  var selection = utils.getSelection(nodeSet);\n\t\n\t  if (selection && selection.rangeCount) {\n\t    return false;\n\t  }\n\t\n\t  var list = get(nodeSet);\n\t\n\t  if (list.length !== 1) {\n\t    return false;\n\t  }\n\t\n\t  return list[0];\n\t}\n\t\n\tfunction clear(nodeSet) {\n\t  get(nodeSet).forEach(function (item) {\n\t    return item.removeAttribute('selected');\n\t  });\n\t}\n\t\n\tfunction add(node) {\n\t  if (setSelected(node)) {\n\t    var nodeSet = bubbleset.closestNodeSet(node);\n\t    nodeSet.startRangeSelect = node; // ???\n\t\n\t    bubble.bubbling(nodeSet);\n\t    return true;\n\t  }\n\t\n\t  return false;\n\t}\n\t\n\tfunction uniq(node) {\n\t  if (!bubble.isBubbleNode(node)) {\n\t    return false;\n\t  }\n\t\n\t  var nodeSet = bubbleset.closestNodeSet(node);\n\t  var selection = context.getSelection();\n\t  selection && selection.removeAllRanges();\n\t  clear(nodeSet);\n\t  return add(node);\n\t}\n\t\n\tfunction setLast(nodeEditor) {\n\t  return uniq(bubbleset.lastBubble(nodeEditor));\n\t}\n\t\n\tfunction toggleUniq(node) {\n\t  if (isSelected(node)) {\n\t    var nodeSet = bubbleset.closestNodeSet(node);\n\t\n\t    if (get(nodeSet).length === 1) {\n\t      return removeSelected(node);\n\t    }\n\t  }\n\t\n\t  return uniq(node);\n\t}\n\t\n\tfunction isSelected(node) {\n\t  return bubble.isBubbleNode(node) && node.hasAttribute('selected') || false;\n\t}\n\t\n\tfunction setSelected(node) {\n\t  if (bubble.isBubbleNode(node)) {\n\t    node.setAttribute('selected', '');\n\t    return true;\n\t  }\n\t\n\t  return false;\n\t}\n\t\n\tfunction removeSelected(node) {\n\t  if (bubble.isBubbleNode(node)) {\n\t    node.removeAttribute('selected');\n\t    return true;\n\t  }\n\t\n\t  return false;\n\t}\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar native = __webpack_require__(16);\n\t\n\tvar mouse = __webpack_require__(19);\n\t\n\tvar _require = __webpack_require__(6),\n\t    canUseDrag = _require.canUseDrag;\n\t\n\texports.init = function (nodeSet) {\n\t  if (canUseDrag) {\n\t    return native.init(nodeSet);\n\t  }\n\t\n\t  return mouse.init(nodeSet);\n\t};\n\t\n\texports.destroy = function (nodeSet) {\n\t  if (canUseDrag) {\n\t    return native.destroy(nodeSet);\n\t  }\n\t\n\t  return mouse.destroy(nodeSet);\n\t};\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar context = __webpack_require__(1);\n\t\n\tvar select = __webpack_require__(14);\n\t\n\tvar bubbleset = __webpack_require__(3);\n\t\n\tvar events = __webpack_require__(10);\n\t\n\tvar _require = __webpack_require__(12),\n\t    CLS = _require.CLS;\n\t\n\tvar _require2 = __webpack_require__(17),\n\t    getDragImage = _require2.getDragImage,\n\t    onDropSuccess = _require2.onDropSuccess,\n\t    DRAG_IMG = _require2.DRAG_IMG;\n\t\n\tvar EVENTS = {\n\t  dragend: onDragend,\n\t  dragenter: onDragenter,\n\t  dragleave: onDragleave,\n\t  dragover: onDragover,\n\t  dragstart: onDragstart,\n\t  drop: onDrop\n\t};\n\tvar currentDragSet = null;\n\t\n\texports.init = function (nodeSet) {\n\t  events.on(nodeSet, EVENTS);\n\t};\n\t\n\texports.destroy = function (nodeSet) {\n\t  events.off(nodeSet, EVENTS);\n\t};\n\t\n\tfunction onDragstart(event) {\n\t  event.stopPropagation();\n\t  var nodeSet = bubbleset.closestNodeSet(event.target);\n\t  var nodeBubble = bubbleset.closestNodeBubble(event.target);\n\t\n\t  if (!nodeSet || !nodeBubble) {\n\t    event.preventDefault();\n\t    return;\n\t  }\n\t\n\t  var selection = context.getSelection();\n\t  selection && selection.removeAllRanges();\n\t  currentDragSet = nodeSet;\n\t  nodeSet.classList.add(CLS.DRAGSTART);\n\t  select.add(nodeBubble);\n\t  event.dataTransfer.effectAllowed = 'move';\n\t  event.dataTransfer.setData('text/plain', '');\n\t  var list = select.get(currentDragSet);\n\t\n\t  if (list.length > 1) {\n\t    event.dataTransfer.setDragImage(getDragImage(), DRAG_IMG.w, DRAG_IMG.h);\n\t  }\n\t}\n\t\n\tfunction onDrop(event) {\n\t  event.stopPropagation();\n\t  event.preventDefault();\n\t\n\t  if (!currentDragSet) {\n\t    return;\n\t  }\n\t\n\t  var nodeSet = bubbleset.closestNodeSet(event.target);\n\t\n\t  if (!nodeSet || nodeSet === currentDragSet) {\n\t    return;\n\t  }\n\t\n\t  var checkBubbleDrop = nodeSet.options('checkBubbleDrop');\n\t  var list = select.get(currentDragSet);\n\t\n\t  if (list.length && checkBubbleDrop(list)) {\n\t    bubbleset.moveBubbles(currentDragSet, nodeSet, list);\n\t    context.setTimeout(onDropSuccess, 0, currentDragSet, nodeSet);\n\t  }\n\t}\n\t\n\tfunction onDragover(event) {\n\t  event.stopPropagation();\n\t  event.preventDefault();\n\t\n\t  if (!currentDragSet) {\n\t    return;\n\t  }\n\t\n\t  event.dataTransfer.dropEffect = 'move';\n\t}\n\t\n\tfunction onDragenter(event) {\n\t  event.stopPropagation();\n\t  event.preventDefault();\n\t\n\t  if (!currentDragSet) {\n\t    return;\n\t  }\n\t\n\t  var nodeSet = bubbleset.closestNodeSet(event.target);\n\t\n\t  if (nodeSet && nodeSet !== currentDragSet) {\n\t    nodeSet.classList.add(CLS.DROPZONE);\n\t  }\n\t}\n\t\n\tfunction onDragleave(event) {\n\t  event.stopPropagation();\n\t  event.preventDefault();\n\t\n\t  if (!currentDragSet) {\n\t    return;\n\t  }\n\t\n\t  var nodeSet = bubbleset.closestNodeSet(event.target);\n\t\n\t  if (nodeSet && nodeSet !== currentDragSet) {\n\t    nodeSet.classList.remove(CLS.DROPZONE);\n\t  }\n\t}\n\t\n\tfunction onDragend(event) {\n\t  event.stopPropagation();\n\t  event.preventDefault();\n\t\n\t  if (!currentDragSet) {\n\t    return;\n\t  }\n\t\n\t  currentDragSet.classList.remove(CLS.DRAGSTART);\n\t  var nodeSet = bubbleset.closestNodeSet(event.target);\n\t\n\t  if (nodeSet && nodeSet !== currentDragSet) {\n\t    nodeSet.classList.remove(CLS.DROPZONE);\n\t  }\n\t\n\t  currentDragSet = null;\n\t}\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar DRAG_IMG = {\n\t  w: 16,\n\t  h: 16\n\t};\n\tvar dragImage = null;\n\texports.DRAG_IMG = DRAG_IMG;\n\t\n\texports.getDragImage = function () {\n\t  if (!dragImage) {\n\t    dragImage = new Image();\n\t    dragImage.src = __webpack_require__(18);\n\t  }\n\t\n\t  return dragImage;\n\t};\n\t\n\texports.onDropSuccess = function (fromNodeSet, toNodeSet) {\n\t  fromNodeSet.fireChange();\n\t  toNodeSet.focus();\n\t  toNodeSet.fireChange();\n\t};\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE8AAAAVCAMAAAAw/0MlAAABblBMVEUAAABOXIZJWIKCkbeNnMKMmsJNW4VNW4VWZY57ibFHV4KVpMxRYImCkLh9jbpgcJ1fcJ1JWoaZqdNUZpaHmMaVpdJIWolTZJKHmMZEV4iXqNdkdqhjdal2iLx2ib2Knc6PodNJXpJJXpNOYpdpfLKCk8JPYpdofLNugblugrqUptdZdLdZd8Nfeb93js1+ksuGm9SGm9VHaLhJarxKZqxKbL9La7pNbr9Pb71Ucr1Wbag/XqU/X6pAVopffMdjf8ZphMpwicx2js9BW51CWZN/ldCBl9KCmNNFYKRFZbGJndWOodVKX5RKX5ZKYJdWdcNXbKJYdL1KYJtAVYpaeMVJXpJKbMBgebpjeLBjf8VLYp5kd65kgMlofLRog8log8tJYqBth8xugrpviMtNabBxi851jc8/X6t3i8BOaK56kdB9lNFOaa5Ob8FPY5qBl9NGXJODmNOEmdNQbrpRcsJUb7RGXJSTptmUptiUp9kfFguNAAAAK3RSTlMAJCQkJDw8P0JCRUVubpaWlpmZwMDAw8nJzMzV29vb7e3t7fDw+Pn5+fn8jndhZAAAAQhJREFUeF6tz2VXwgAYBtBnhBKKkgoGKPY2urvT7u7ujn/vtsM5fN/e+w8uJEaLa+HvR7Zfl8WILo293Qq8vykQaLXtGnRoPcH6i1L1oEcLidpde6BQc6shslXvaVSHIdD7S9c0Sv5+ACbfFRXftBoYuzijUry1AXPHJ1QK5349pvYOqeSPfCaM8Dkq/EFxHAMst0mDY3cL89Clkis0kqmd/CxgvUt8Ukg8rub4UYCZicTiT0rFY5HnNY4dBNC32GiGwtFt+aLhULOx9CWMdRAMbVXK6cyNfJl0ubL8IYytEDHe0/XX7IZ82e/9S3HsZSDpmSQZT/SiQ+UgGDtU6DKYnYrGTrMBon97+TS1J80efgAAAABJRU5ErkJggg==\"\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar context = __webpack_require__(1);\n\t\n\tvar events = __webpack_require__(10);\n\t\n\tvar utils = __webpack_require__(6);\n\t\n\tvar select = __webpack_require__(14);\n\t\n\tvar bubbleset = __webpack_require__(3);\n\t\n\tvar Modernizr = __webpack_require__(20);\n\t\n\tvar _require = __webpack_require__(12),\n\t    CLS = _require.CLS,\n\t    EV = _require.EV;\n\t\n\tvar _require2 = __webpack_require__(17),\n\t    getDragImage = _require2.getDragImage,\n\t    onDropSuccess = _require2.onDropSuccess,\n\t    DRAG_IMG = _require2.DRAG_IMG;\n\t\n\tvar currentDragSet = null;\n\tvar currentMoveSet = null;\n\tvar currentDragElement = null;\n\t\n\texports.init = function (nodeSet) {\n\t  events.on(nodeSet, 'mousedown', onMousedown);\n\t};\n\t\n\texports.destroy = function (nodeSet) {\n\t  events.off(nodeSet, 'mousedown', onMousedown);\n\t};\n\t\n\tfunction onMousedown(event) {\n\t  var nodeBubble = bubbleset.closestNodeBubble(event.target);\n\t\n\t  if (!nodeBubble) {\n\t    return;\n\t  }\n\t\n\t  var nodeSet = bubbleset.closestNodeSet(event.target);\n\t\n\t  if (!nodeSet) {\n\t    return;\n\t  }\n\t\n\t  event.preventDefault();\n\t  nodeSet.focus();\n\t  var drag = nodeSet.__drag__ = {\n\t    nodeBubble: nodeBubble,\n\t    nodeOffsetX: event.offsetX,\n\t    nodeOffsetY: event.offsetY,\n\t    onMousemove: utils.throttle(onMousemove.bind(this, nodeSet)),\n\t    onMouseup: onMouseup.bind(this, nodeSet),\n\t    onScroll: utils.throttle(onScroll.bind(this, nodeSet)),\n\t    x: 0,\n\t    y: 0\n\t  };\n\t  currentDragSet = null;\n\t  currentMoveSet = null;\n\t  currentDragElement = null;\n\t  events.one(document, 'mouseup', drag.onMouseup);\n\t  events.on(document, 'mousemove', drag.onMousemove);\n\t  events.on(document, 'scroll', drag.onScroll);\n\t}\n\t\n\tfunction onMouseup(dragSet, event) {\n\t  var drag = dragSet.__drag__;\n\t\n\t  if (!drag) {\n\t    return;\n\t  }\n\t\n\t  events.off(document, 'mousemove', drag.onMousemove);\n\t  events.off(document, 'scroll', drag.onScroll);\n\t  delete dragSet.__drag__;\n\t\n\t  if (currentDragElement) {\n\t    currentDragElement.parentNode && currentDragElement.parentNode.removeChild(currentDragElement);\n\t    currentDragElement = null;\n\t  }\n\t\n\t  if (currentMoveSet) {\n\t    var _ = currentMoveSet;\n\t    currentMoveSet = null;\n\t\n\t    _.classList.remove(CLS.DROPZONE);\n\t\n\t    events.dispatch(_, EV.DRAGLEAVE, {\n\t      bubbles: false,\n\t      cancelable: false\n\t    });\n\t  }\n\t\n\t  if (currentDragSet) {\n\t    var nodeSet = bubbleset.closestNodeSet(event.target);\n\t\n\t    if (nodeSet && nodeSet !== currentDragSet) {\n\t      var list = select.get(currentDragSet);\n\t      var checkBubbleDrop = nodeSet.options('checkBubbleDrop');\n\t\n\t      if (list.length && checkBubbleDrop(list)) {\n\t        bubbleset.moveBubbles(currentDragSet, nodeSet, list);\n\t        context.setTimeout(onDropSuccess, 0, currentDragSet, nodeSet);\n\t      }\n\t    }\n\t\n\t    var tmpDragSet = currentDragSet;\n\t    currentDragSet = null;\n\t    tmpDragSet.classList.remove(CLS.DRAGSTART);\n\t    events.dispatch(tmpDragSet, EV.DROP, {\n\t      bubbles: false,\n\t      cancelable: false\n\t    });\n\t    events.dispatch(tmpDragSet, EV.DRAGEND, {\n\t      bubbles: false,\n\t      cancelable: false,\n\t      detail: {\n\t        target: select.head(tmpDragSet)\n\t      }\n\t    });\n\t  }\n\t}\n\t\n\tfunction onMousemove(dragSet) {\n\t  var drag = dragSet.__drag__;\n\t\n\t  if (!drag) {\n\t    return;\n\t  }\n\t\n\t  if (!currentDragSet) {\n\t    var selection = context.getSelection();\n\t    selection && selection.removeAllRanges();\n\t    currentDragSet = dragSet;\n\t    currentDragSet.classList.add(CLS.DRAGSTART);\n\t    select.add(drag.nodeBubble);\n\t    var moveElement;\n\t    var list = select.get(currentDragSet);\n\t\n\t    if (list.length === 1) {\n\t      moveElement = drag.nodeBubble.cloneNode(true);\n\t    }\n\t\n\t    if (!moveElement) {\n\t      moveElement = getDragImage();\n\t      drag.nodeOffsetX = DRAG_IMG.w;\n\t      drag.nodeOffsetY = DRAG_IMG.h;\n\t    }\n\t\n\t    currentDragElement = document.body.appendChild(document.createElement('div'));\n\t    currentDragElement.style.cssText = 'position:absolute;z-index:9999;pointer-events:none;top:0;left:0;';\n\t    currentDragElement.appendChild(moveElement);\n\t    events.dispatch(currentDragSet, EV.DRAGSTART, {\n\t      bubbles: false,\n\t      cancelable: false,\n\t      detail: {\n\t        target: select.head(currentDragSet)\n\t      }\n\t    });\n\t  }\n\t\n\t  drag.x = event.clientX;\n\t  drag.y = event.clientY;\n\t  onScroll(dragSet);\n\t  var nodeSet = bubbleset.closestNodeSet(event.target);\n\t\n\t  if (nodeSet && nodeSet !== currentDragSet) {\n\t    if (currentMoveSet && currentMoveSet !== nodeSet) {\n\t      currentMoveSet.classList.remove(CLS.DROPZONE);\n\t      nodeSet.classList.add(CLS.DROPZONE);\n\t      currentMoveSet = nodeSet;\n\t      events.dispatch(currentMoveSet, EV.DRAGENTER, {\n\t        bubbles: false,\n\t        cancelable: false\n\t      });\n\t    } else if (!currentMoveSet) {\n\t      nodeSet.classList.add(CLS.DROPZONE);\n\t      currentMoveSet = nodeSet;\n\t      events.dispatch(currentMoveSet, EV.DRAGENTER, {\n\t        bubbles: false,\n\t        cancelable: false\n\t      });\n\t    }\n\t  } else if (currentMoveSet) {\n\t    var _ = currentMoveSet;\n\t    currentMoveSet = null;\n\t\n\t    _.classList.remove(CLS.DROPZONE);\n\t\n\t    events.dispatch(_, EV.DRAGLEAVE, {\n\t      bubbles: false,\n\t      cancelable: false\n\t    });\n\t  }\n\t}\n\t\n\tfunction onScroll(dragSet) {\n\t  var drag = dragSet.__drag__;\n\t\n\t  if (!drag || !currentDragElement) {\n\t    return;\n\t  }\n\t\n\t  var x = drag.x - drag.nodeOffsetX + events.scrollX();\n\t  var y = drag.y - drag.nodeOffsetY + events.scrollY();\n\t\n\t  if (Modernizr.csstransforms3d) {\n\t    currentDragElement.style.transform = \"translate3d(\".concat(x, \"px, \").concat(y, \"px, 0px)\");\n\t  } else if (Modernizr.csstransforms) {\n\t    currentDragElement.style.transform = \"translate(\".concat(x, \"px, \").concat(y, \"px)\");\n\t  } else {\n\t    currentDragElement.style.top = \"\".concat(y, \"px\");\n\t    currentDragElement.style.left = \"\".concat(x, \"px\");\n\t  }\n\t}\n\n/***/ },\n/* 20 */\n/***/ function(module, exports) {\n\n\tmodule.exports = window.Modernizr;\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar events = __webpack_require__(10);\n\t\n\tvar _require = __webpack_require__(12),\n\t    PROPS = _require.PROPS;\n\t/**\n\t * @param {Event} event\n\t * @returns {?boolean}\n\t */\n\t\n\t\n\tmodule.exports = function (event) {\n\t  if (event.currentTarget[PROPS.LOCK_COPY]) {\n\t    return events.prevent(event);\n\t  }\n\t};\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar events = __webpack_require__(10);\n\t\n\tvar bubbleset = __webpack_require__(3);\n\t\n\tvar _require = __webpack_require__(12),\n\t    PROPS = _require.PROPS;\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t * @param {HTMLElement} [sharedData.nodeBubble]\n\t * @param {boolean} [sharedData.isDblclick]\n\t * @returns {?boolean}\n\t */\n\t\n\t\n\tmodule.exports = function (event, sharedData) {\n\t  var nodeEditor = bubbleset.closestNodeSet(event.target);\n\t\n\t  if (!nodeEditor) {\n\t    return events.prevent(event);\n\t  }\n\t\n\t  sharedData.nodeEditor = nodeEditor;\n\t  sharedData.nodeBubble = bubbleset.closestNodeBubble(event.target);\n\t  sharedData.isDblclick = false;\n\t  sharedData.canAddBubble = nodeEditor.canAddBubble();\n\t\n\t  if (sharedData.nodeBubble) {\n\t    var clickTime = Date.now();\n\t    sharedData.isDblclick = nodeEditor[PROPS.CLICK_TIME] && clickTime - nodeEditor[PROPS.CLICK_TIME] < 200;\n\t    nodeEditor[PROPS.CLICK_TIME] = clickTime;\n\t  }\n\t};\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar raf = __webpack_require__(7);\n\t\n\tvar context = __webpack_require__(1);\n\t\n\tvar events = __webpack_require__(10);\n\t\n\tvar _require = __webpack_require__(12),\n\t    PROPS = _require.PROPS;\n\t/**\n\t * @param {Event} event\n\t * @returns {?boolean}\n\t */\n\t\n\t\n\tmodule.exports = function (event) {\n\t  var nodeEditor = event.currentTarget;\n\t\n\t  if (nodeEditor[PROPS.LOCK_COPY]) {\n\t    events.prevent(event);\n\t    delete nodeEditor[PROPS.LOCK_COPY]; // Safary 10 не сбрасывает курсор без задержки\n\t\n\t    raf(function () {\n\t      var selection = context.getSelection();\n\t      selection && selection.removeAllRanges();\n\t    });\n\t    return false;\n\t  }\n\t};\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar utils = __webpack_require__(6);\n\t\n\tvar events = __webpack_require__(10);\n\t\n\tvar _require = __webpack_require__(12),\n\t    KEY = _require.KEY;\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\t\n\t\n\tmodule.exports = function (event, sharedData) {\n\t  var code = events.keyCode(event);\n\t  sharedData.nodeEditor = event.currentTarget;\n\t\n\t  switch (code) {\n\t    case KEY.Left:\n\t    case KEY.Right:\n\t    case KEY.Delete:\n\t    case KEY.Backspace:\n\t      event.preventDefault();\n\t      sharedData.selection = utils.getSelection(event.currentTarget);\n\t      break;\n\t  }\n\t};\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar bubble = __webpack_require__(4);\n\t/**\n\t * @param {Event} event\n\t */\n\t\n\t\n\tmodule.exports = function (event) {\n\t  bubble.bubbling(event.currentTarget);\n\t};\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar events = __webpack_require__(10);\n\t\n\tvar bubble = __webpack_require__(4);\n\t\n\tvar cursor = __webpack_require__(13);\n\t\n\tvar utils = __webpack_require__(6);\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {HTMLElement} sharedData.nodeEditor\n\t * @param {HTMLElement} [sharedData.nodeBubble]\n\t * @param {boolean} sharedData.isDblclick\n\t */\n\t\n\t\n\tmodule.exports = function (event, sharedData) {\n\t  var nodeEditor = sharedData.nodeEditor;\n\t  var nodeBubble = sharedData.nodeBubble;\n\t  var isDblclick = sharedData.isDblclick;\n\t\n\t  if (nodeBubble) {\n\t    if (isDblclick) {\n\t      if (!event.shiftKey && !events.metaKey(event)) {\n\t        bubble.edit(nodeEditor, nodeBubble);\n\t      }\n\t    } else if (!nodeEditor.options('selection')) {\n\t      bubble.bubbling(nodeEditor);\n\t      cursor.restore(nodeEditor);\n\t    }\n\t  } else {\n\t    var selection = utils.getSelection(nodeEditor);\n\t\n\t    if (!selection || selection.anchorNode.nodeType !== Node.TEXT_NODE) {\n\t      cursor.restore(nodeEditor);\n\t    }\n\t  }\n\t};\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar bubbleset = __webpack_require__(3);\n\t\n\tmodule.exports = function (event) {\n\t  var nodeEditor = bubbleset.closestNodeSet(event.target);\n\t\n\t  if (!nodeEditor) {\n\t    return;\n\t  }\n\t\n\t  var nodeBubble = bubbleset.closestNodeBubble(event.target); // Don't show cursor if can't add bubble\n\t\n\t  if (!nodeBubble && !nodeEditor.canAddBubble()) {\n\t    nodeEditor.focus();\n\t    event.preventDefault();\n\t  }\n\t};\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar raf = __webpack_require__(7);\n\t\n\tvar cursor = __webpack_require__(13);\n\t\n\tvar context = __webpack_require__(1);\n\t/**\n\t * @param {Event} event\n\t */\n\t\n\t\n\tmodule.exports = function (event) {\n\t  var nodeEditor = event.currentTarget; // Don't show cursor if can't add bubble\n\t\n\t  if (!nodeEditor.canAddBubble()) {\n\t    // Safary 10 не сбрасывает курсор без задержки\n\t    raf(function () {\n\t      var selection = context.getSelection();\n\t      selection && selection.removeAllRanges();\n\t    });\n\t  }\n\t\n\t  cursor.restore(nodeEditor);\n\t};\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar events = __webpack_require__(10);\n\t\n\tvar bubble = __webpack_require__(4);\n\t\n\tvar cursor = __webpack_require__(13);\n\t\n\tvar text = __webpack_require__(5);\n\t\n\tvar bubbleset = __webpack_require__(3);\n\t\n\tvar _require = __webpack_require__(12),\n\t    KEY = _require.KEY;\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isTextSelectAll]\n\t * @param {boolean} [sharedData.isTextSelectedFromBeginToCursor]\n\t * @param {boolean} [sharedData.isEmptyLeft]\n\t * @param {boolean} [sharedData.isEmptyRight]\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\t\n\t\n\tmodule.exports = function (event, sharedData) {\n\t  var code = events.keyCode(event);\n\t  var metaKey = events.metaKey(event);\n\t\n\t  switch (code) {\n\t    case KEY.Esc:\n\t      event.preventDefault();\n\t      bubble.bubbling(sharedData.nodeEditor);\n\t      cursor.restore(sharedData.nodeEditor);\n\t      break;\n\t\n\t    case KEY.Backspace:\n\t      onBackspace(event, sharedData);\n\t      break;\n\t\n\t    case KEY.Delete:\n\t      onDelete(event, sharedData);\n\t      break;\n\t\n\t    case KEY.Left:\n\t      onArrowLeft(event, sharedData);\n\t      break;\n\t\n\t    case KEY.Right:\n\t      onArrowRight(event, sharedData);\n\t      break;\n\t\n\t    case KEY.Home:\n\t      if (event.shiftKey) {\n\t        event.preventDefault();\n\t        sharedData.isTextSelectedFromBeginToCursor = text.selectFromCursorToStrBegin(null, sharedData.nodeEditor);\n\t      }\n\t\n\t      break;\n\t\n\t    case KEY.a:\n\t      if (metaKey) {\n\t        event.preventDefault();\n\t        sharedData.isTextSelectAll = text.selectAll(null, sharedData.nodeEditor);\n\t      }\n\t\n\t      break;\n\t  }\n\t};\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isEmptyLeft]\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\t\n\t\n\tfunction onBackspace(event, sharedData) {\n\t  var selection = sharedData.selection;\n\t\n\t  if (!selection) {\n\t    return;\n\t  }\n\t\n\t  var nodeEditor = sharedData.nodeEditor;\n\t\n\t  if (!selection.isCollapsed || text.arrowLeft(selection, true)) {\n\t    text.remove(selection);\n\t    nodeEditor.fireInput(); // Если после удаления больше нет текста, то, возможно,\n\t    // удалили какой-то бабл во время его редактирования.\n\t    // Нужно оповестить о изменениях\n\t\n\t    if (!text.hasNear(selection)) {\n\t      nodeEditor.fireChange();\n\t    }\n\t  } else if (!nodeEditor.options('selection')) {\n\t    var nodeBubble = bubbleset.findBubbleLeft(selection);\n\t\n\t    if (nodeBubble) {\n\t      bubbleset.removeBubbles(nodeEditor, [nodeBubble]);\n\t      nodeEditor.fireChange();\n\t    }\n\t  } else {\n\t    sharedData.isEmptyLeft = true;\n\t  }\n\t}\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isEmptyRight]\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\t\n\t\n\tfunction onDelete(event, sharedData) {\n\t  var selection = sharedData.selection;\n\t\n\t  if (!selection) {\n\t    return;\n\t  }\n\t\n\t  var nodeEditor = sharedData.nodeEditor;\n\t\n\t  if (!selection.isCollapsed || text.arrowRight(selection, true)) {\n\t    text.remove(selection);\n\t    nodeEditor.fireInput(); // Если после удаления больше нет текста, то, возможно,\n\t    // удалили какой-то бабл во время его редактирования.\n\t    // Нужно оповестить о изменениях\n\t\n\t    if (!text.hasNear(selection)) {\n\t      nodeEditor.fireChange();\n\t    }\n\t  } else if (!nodeEditor.options('selection')) {\n\t    var nodeBubble = bubbleset.findBubbleRight(selection);\n\t\n\t    if (nodeBubble) {\n\t      bubbleset.removeBubbles(nodeEditor, [nodeBubble]);\n\t      nodeEditor.fireChange();\n\t    }\n\t  } else {\n\t    sharedData.isEmptyRight = true;\n\t  }\n\t}\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isEmptyLeft]\n\t * @param {Selection} [sharedData.selection]\n\t */\n\t\n\t\n\tfunction onArrowLeft(event, sharedData) {\n\t  sharedData.isEmptyLeft = !text.arrowLeft(sharedData.selection, event.shiftKey);\n\t}\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isEmptyRight]\n\t * @param {Selection} [sharedData.selection]\n\t */\n\t\n\t\n\tfunction onArrowRight(event, sharedData) {\n\t  sharedData.isEmptyRight = !text.arrowRight(sharedData.selection, event.shiftKey);\n\t}\n\n/***/ },\n/* 30 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar events = __webpack_require__(10);\n\t\n\tvar bubble = __webpack_require__(4);\n\t\n\tvar cursor = __webpack_require__(13);\n\t\n\tvar select = __webpack_require__(14);\n\t\n\tvar _require = __webpack_require__(12),\n\t    KEY = _require.KEY;\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t */\n\t\n\t\n\tmodule.exports = function (event, sharedData) {\n\t  var code = events.keyCode(event);\n\t  var nodeEditor = event.currentTarget;\n\t  sharedData.enterBubbling = false;\n\t\n\t  if (code === KEY.Enter) {\n\t    event.preventDefault();\n\t\n\t    if (!nodeEditor.options('disableControls') && !select.getEditable(nodeEditor)) {\n\t      bubble.bubbling(nodeEditor);\n\t      cursor.restore(nodeEditor);\n\t      sharedData.enterBubbling = true;\n\t    }\n\t  } else if (nodeEditor.canAddBubble()) {\n\t    var separator = nodeEditor.options('separator');\n\t\n\t    if (separator && separator.test(String.fromCharCode(code))) {\n\t      var separatorCond = nodeEditor.options('separatorCond');\n\t\n\t      if (!separatorCond || separatorCond(nodeEditor.inputValue)) {\n\t        event.preventDefault();\n\t        bubble.bubbling(nodeEditor);\n\t        cursor.restore(nodeEditor);\n\t      }\n\t    }\n\t  } else {\n\t    event.preventDefault();\n\t  }\n\t};\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar events = __webpack_require__(10);\n\t\n\tvar _require = __webpack_require__(12),\n\t    KEY = _require.KEY;\n\t/**\n\t * @param {Event} event\n\t */\n\t\n\t\n\tmodule.exports = function (event) {\n\t  var nodeEditor = event.currentTarget;\n\t  var code = events.keyCode(event);\n\t  var isPrintableChar = event.key ? event.key.length === 1 : (code > 47 || code === KEY.Space || code === KEY.Backspace) && code !== KEY.Cmd;\n\t\n\t  if (isPrintableChar && nodeEditor.canAddBubble()) {\n\t    nodeEditor.fireInput();\n\t  }\n\t};\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar raf = __webpack_require__(7);\n\t\n\tvar context = __webpack_require__(1);\n\t\n\tvar bubble = __webpack_require__(4);\n\t\n\tvar cursor = __webpack_require__(13);\n\t\n\tvar text = __webpack_require__(5);\n\t\n\tvar _require = __webpack_require__(6),\n\t    isIE = _require.isIE;\n\t\n\tmodule.exports = function (event) {\n\t  event.preventDefault();\n\t  var nodeEditor = event.currentTarget;\n\t\n\t  if (!nodeEditor.canAddBubble()) {\n\t    return;\n\t  }\n\t\n\t  if (context.clipboardData && context.clipboardData.getData) {\n\t    onPasteSuccess(nodeEditor, context.clipboardData.getData('Text'));\n\t  } else if (event.clipboardData) {\n\t    var contentType = 'text/plain';\n\t    var clipboardData = event.clipboardData;\n\t    var data = clipboardData.getData && clipboardData.getData(contentType);\n\t\n\t    if (!onPasteSuccess(nodeEditor, data) && clipboardData.items) {\n\t      Array.prototype.slice.call(clipboardData.items).filter(function (item) {\n\t        return item.kind === 'string' && item.type === contentType;\n\t      }).some(function (item) {\n\t        item.getAsString(function (dataText) {\n\t          onPasteSuccess(nodeEditor, dataText);\n\t        });\n\t        return true;\n\t      });\n\t    }\n\t  }\n\t};\n\t\n\tfunction onPasteSuccess(nodeEditor, dataText) {\n\t  var checkBubblePaste = nodeEditor.options('checkBubblePaste');\n\t  var lineBreakReplacer = nodeEditor.options('lineBreakReplacer');\n\t  var selection = context.getSelection();\n\t\n\t  if (dataText && lineBreakReplacer) {\n\t    dataText = dataText.replace(/\\n/g, lineBreakReplacer);\n\t  }\n\t\n\t  var isBubbling = dataText && selection.isCollapsed && !nodeEditor.inputValue ? checkBubblePaste(dataText) : false;\n\t\n\t  if (text.replaceString(dataText, selection)) {\n\t    if (isBubbling) {\n\t      if (isIE) {\n\t        raf(function () {\n\t          return onReplaceSuccess(nodeEditor);\n\t        });\n\t      } else {\n\t        onReplaceSuccess(nodeEditor);\n\t      }\n\t    } else {\n\t      nodeEditor.fireInput();\n\t    }\n\t\n\t    return true;\n\t  }\n\t\n\t  return false;\n\t}\n\t\n\tfunction onReplaceSuccess(nodeEditor) {\n\t  bubble.bubbling(nodeEditor);\n\t  nodeEditor.focus();\n\t  raf(function () {\n\t    return cursor.restore(nodeEditor);\n\t  });\n\t}\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar select = __webpack_require__(14);\n\t/**\n\t * @param {Event} event\n\t */\n\t\n\t\n\tmodule.exports = function (event) {\n\t  select.clear(event.currentTarget);\n\t};\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar events = __webpack_require__(10);\n\t\n\tvar select = __webpack_require__(14);\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {HTMLElement} sharedData.nodeEditor\n\t * @param {HTMLElement} [sharedData.nodeBubble]\n\t * @param {boolean} sharedData.isDblclick\n\t */\n\t\n\t\n\tmodule.exports = function (event, sharedData) {\n\t  var nodeEditor = sharedData.nodeEditor;\n\t  var nodeBubble = sharedData.nodeBubble;\n\t  var isDblclick = sharedData.isDblclick;\n\t  var canAddBubble = sharedData.canAddBubble;\n\t\n\t  if (nodeBubble) {\n\t    if (events.metaKey(event)) {\n\t      select.add(nodeBubble);\n\t    } else if (event.shiftKey) {\n\t      if (!nodeEditor.startRangeSelect) {\n\t        select.uniq(nodeBubble);\n\t      } else {\n\t        select.range(nodeBubble);\n\t      }\n\t    } else if (!isDblclick) {\n\t      canAddBubble ? select.toggleUniq(nodeBubble) : select.uniq(nodeBubble);\n\t    }\n\t  } else if (canAddBubble) {\n\t    select.clear(nodeEditor);\n\t  }\n\t};\n\n/***/ },\n/* 35 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar raf = __webpack_require__(7);\n\t\n\tvar events = __webpack_require__(10);\n\t\n\tvar utils = __webpack_require__(6);\n\t\n\tvar bubble = __webpack_require__(4);\n\t\n\tvar select = __webpack_require__(14);\n\t\n\tvar bubbleset = __webpack_require__(3);\n\t\n\tvar cursor = __webpack_require__(13);\n\t\n\tvar _require = __webpack_require__(12),\n\t    KEY = _require.KEY,\n\t    PROPS = _require.PROPS;\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isTextSelectAll]\n\t * @param {boolean} [sharedData.isTextSelectedFromBeginToCursor]\n\t * @param {boolean} [sharedData.isEmptyLeft]\n\t * @param {boolean} [sharedData.isEmptyRight]\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\t\n\t\n\tmodule.exports = function (event, sharedData) {\n\t  var code = events.keyCode(event);\n\t  var metaKey = events.metaKey(event);\n\t\n\t  switch (code) {\n\t    case KEY.Backspace:\n\t      onBackspace(event, sharedData);\n\t      break;\n\t\n\t    case KEY.Delete:\n\t      onDelete(event, sharedData);\n\t      break;\n\t\n\t    case KEY.Left:\n\t      onArrowLeft(event, sharedData);\n\t      break;\n\t\n\t    case KEY.Right:\n\t      onArrowRight(event, sharedData);\n\t      break;\n\t    // курсор в начало списка\n\t\n\t    case KEY.Top:\n\t      event.preventDefault();\n\t      onTop(event, sharedData);\n\t      break;\n\t    // курсор в конец списка\n\t\n\t    case KEY.Bottom:\n\t      event.preventDefault();\n\t      onBottom(event, sharedData);\n\t      break;\n\t\n\t    case KEY.Home:\n\t      if (event.shiftKey && !sharedData.isTextSelectedFromBeginToCursor && select.has(sharedData.nodeEditor)) {\n\t        event.preventDefault();\n\t        select.allLeft(sharedData.nodeEditor);\n\t      }\n\t\n\t      break;\n\t\n\t    case KEY.a:\n\t      if (metaKey && !sharedData.isTextSelectAll) {\n\t        event.preventDefault();\n\t        select.all(sharedData.nodeEditor);\n\t      }\n\t\n\t      break;\n\t\n\t    case KEY.c:\n\t      metaKey && copyBubbles(sharedData.nodeEditor);\n\t      break;\n\t\n\t    case KEY.x:\n\t      metaKey && copyBubbles(sharedData.nodeEditor, function () {\n\t        return onDelete(event, sharedData);\n\t      });\n\t      break;\n\t  }\n\t};\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\t\n\t\n\tfunction onTop(event, sharedData) {\n\t  var nodeEditor = sharedData.nodeEditor;\n\t\n\t  if (nodeEditor.options('disableControls')) {\n\t    return;\n\t  }\n\t\n\t  var nodeBubble = bubbleset.headBubble(nodeEditor);\n\t  nodeBubble && select.uniq(nodeBubble);\n\t}\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\t\n\t\n\tfunction onBottom(event, sharedData) {\n\t  var nodeEditor = sharedData.nodeEditor;\n\t\n\t  if (nodeEditor.options('disableControls')) {\n\t    return;\n\t  }\n\t\n\t  if (select.has(nodeEditor)) {\n\t    cursor.restore(nodeEditor);\n\t  }\n\t}\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isEmptyLeft]\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\t\n\t\n\tfunction onBackspace(event, sharedData) {\n\t  var nodeEditor = sharedData.nodeEditor;\n\t  var selection = sharedData.selection;\n\t\n\t  if (selection) {\n\t    if (sharedData.isEmptyLeft) {\n\t      var nodeBubble = bubbleset.findBubbleLeft(selection);\n\t      nodeBubble && select.uniq(nodeBubble);\n\t    }\n\t  } else if (!removeBubbles(nodeEditor)) {\n\t    nodeEditor.focus(); // без задержки не восстанавливает курсор\n\t\n\t    raf(function () {\n\t      return cursor.restore(nodeEditor);\n\t    });\n\t  }\n\t}\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isEmptyRight]\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\t\n\t\n\tfunction onDelete(event, sharedData) {\n\t  var nodeEditor = sharedData.nodeEditor;\n\t  var selection = sharedData.selection;\n\t\n\t  if (selection) {\n\t    if (sharedData.isEmptyRight) {\n\t      var nodeBubble = bubbleset.findBubbleRight(selection);\n\t      nodeBubble && select.uniq(nodeBubble);\n\t    }\n\t  } else if (!removeBubbles(nodeEditor, true)) {\n\t    nodeEditor.focus(); // без задержки не восстанавливает курсор\n\t\n\t    raf(function () {\n\t      return cursor.restore(nodeEditor);\n\t    });\n\t  }\n\t}\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isEmptyLeft]\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\t\n\t\n\tfunction onArrowLeft(event, sharedData) {\n\t  var selection = sharedData.selection;\n\t\n\t  if (selection) {\n\t    if (sharedData.isEmptyLeft) {\n\t      var nodeBubble = bubbleset.findBubbleLeft(selection);\n\t      nodeBubble && select.uniq(nodeBubble);\n\t    }\n\t  } else {\n\t    var nodeEditor = sharedData.nodeEditor;\n\t    var list = select.get(nodeEditor);\n\t    var begin = list.length > 1 && list[0] === nodeEditor.startRangeSelect ? list[list.length - 1] : list[0];\n\t    var node = bubbleset.prevBubble(begin);\n\t\n\t    if (node) {\n\t      if (event.shiftKey) {\n\t        select.range(node);\n\t      } else {\n\t        select.uniq(node);\n\t      }\n\t    }\n\t  }\n\t}\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isEmptyRight]\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\t\n\t\n\tfunction onArrowRight(event, sharedData) {\n\t  var selection = sharedData.selection;\n\t\n\t  if (selection) {\n\t    if (sharedData.isEmptyRight) {\n\t      var nodeBubble = bubbleset.findBubbleRight(selection);\n\t      nodeBubble && select.uniq(nodeBubble);\n\t    }\n\t  } else {\n\t    var nodeEditor = sharedData.nodeEditor;\n\t    var list = select.get(nodeEditor);\n\t    var begin = list.length > 1 && list[list.length - 1] === nodeEditor.startRangeSelect ? list[0] : list[list.length - 1];\n\t    var node = bubbleset.nextBubble(begin);\n\t\n\t    if (node) {\n\t      if (event.shiftKey) {\n\t        select.range(node);\n\t      } else {\n\t        select.uniq(node);\n\t      } // } else if (begin && begin.nextSibling && begin.nextSibling.nodeType === Node.TEXT_NODE) {\n\t      //     select.clear(nodeEditor);\n\t      //     selection.collapse(begin.nextSibling, 0);\n\t\n\t    } else {\n\t      cursor.restore(nodeEditor);\n\t    }\n\t  }\n\t}\n\t\n\tfunction removeBubbles(nodeEditor) {\n\t  var removeFromRight = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\t  var list = select.get(nodeEditor);\n\t\n\t  if (!list.length) {\n\t    return false;\n\t  }\n\t\n\t  var firstBubble = list[0].previousSibling;\n\t  var secondBubble = list[list.length - 1].nextSibling;\n\t\n\t  if (removeFromRight) {\n\t    var _ = firstBubble;\n\t    firstBubble = secondBubble;\n\t    secondBubble = _;\n\t  }\n\t\n\t  bubbleset.removeBubbles(nodeEditor, list);\n\t\n\t  if (bubble.isBubbleNode(firstBubble)) {\n\t    select.uniq(firstBubble);\n\t  } else if (bubble.isBubbleNode(secondBubble)) {\n\t    select.uniq(secondBubble);\n\t  } else {\n\t    nodeEditor.focus(); // без задержки не восстанавливает курсор\n\t\n\t    raf(function () {\n\t      return cursor.restore(nodeEditor);\n\t    });\n\t  }\n\t\n\t  nodeEditor.fireChange();\n\t  return true;\n\t}\n\t\n\tfunction copyBubbles(nodeEditor) {\n\t  var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n\t  var selection = utils.getSelection(nodeEditor);\n\t\n\t  if (selection) {\n\t    return false;\n\t  }\n\t\n\t  var list = select.get(nodeEditor);\n\t\n\t  if (!list.length) {\n\t    return false;\n\t  }\n\t\n\t  var bubbleCopy = nodeEditor.options('bubbleCopy');\n\t  var value = bubbleCopy(list);\n\t\n\t  if (!value) {\n\t    return false;\n\t  }\n\t\n\t  nodeEditor[PROPS.LOCK_COPY] = true;\n\t  var target = nodeEditor.ownerDocument.createElement('input');\n\t  target.value = value;\n\t  target.style.cssText = \"\\n        position: absolute;\\n        left: -9999px;\\n        width: 1px;\\n        height: 1px;\\n        margin: 0;\\n        padding: 0;\\n        border: none;\";\n\t  nodeEditor.parentNode.appendChild(target);\n\t  events.one(target, {\n\t    keyup: function keyup() {\n\t      return nodeEditor.focus();\n\t    },\n\t    blur: function blur() {\n\t      target && target.parentNode && target.parentNode.removeChild(target);\n\t      raf(callback);\n\t    }\n\t  });\n\t  target.select();\n\t  return true;\n\t}\n\n/***/ },\n/* 36 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar events = __webpack_require__(10);\n\t\n\tvar bubble = __webpack_require__(4);\n\t\n\tvar select = __webpack_require__(14);\n\t\n\tvar _require = __webpack_require__(12),\n\t    KEY = _require.KEY;\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t */\n\t\n\t\n\tmodule.exports = function (event, sharedData) {\n\t  var code = events.keyCode(event);\n\t  var nodeEditor = event.currentTarget;\n\t\n\t  if (code === KEY.Enter) {\n\t    event.preventDefault();\n\t\n\t    if (!nodeEditor.options('disableControls') && !sharedData.enterBubbling) {\n\t      editBubbleKeyboardEvent(nodeEditor);\n\t    }\n\t  } else if (code === KEY.Space) {\n\t    if (editBubbleKeyboardEvent(nodeEditor)) {\n\t      event.preventDefault();\n\t    }\n\t  }\n\t};\n\t\n\tfunction editBubbleKeyboardEvent(nodeEditor) {\n\t  var editableBubble = select.getEditable(nodeEditor);\n\t\n\t  if (editableBubble) {\n\t    return bubble.edit(nodeEditor, editableBubble);\n\t  }\n\t\n\t  return false;\n\t}\n\n/***/ },\n/* 37 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\t\n\tfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\t\n\tfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\t\n\tfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\t\n\tfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\t\n\tvar context = __webpack_require__(1);\n\t\n\tvar _require = __webpack_require__(12),\n\t    PROPS = _require.PROPS;\n\t\n\tvar REG_STRREG = /\\/(.+)\\/([gimy]{0,3})/i;\n\tvar OPTIONS = {\n\t  begining: ['reg', null, 'begining'],\n\t  bubbleCopy: ['func', function (list) {\n\t    return list.map(function (item) {\n\t      return item.innerHTML;\n\t    }).join(', ');\n\t  }, 'bubble-copy'],\n\t  bubbleDeformation: ['func', function () {}, 'bubble-deformation'],\n\t  bubbleFormation: ['func', function () {}, 'bubble-formation'],\n\t  checkBubblePaste: ['func', function () {\n\t    return true;\n\t  }, 'check-bubble-paste'],\n\t  checkBubbleDrop: ['func', function () {\n\t    return true;\n\t  }, 'check-bubble-drop'],\n\t  classBubble: ['str', 'bubble', 'class-bubble'],\n\t  disableControls: ['bool', false, 'disable-controls'],\n\t  draggable: ['bool', true, 'draggable'],\n\t  ending: ['reg', null, 'ending'],\n\t  // /\\@ya\\.ru/g\n\t  limit: ['uint', 0, 'limit'],\n\t  selection: ['bool', true, 'selection'],\n\t  separator: ['reg', /[,;]/, 'separator'],\n\t  separatorCond: ['func', null, 'separator-cond'],\n\t  tokenizer: ['func', null, 'tokenizer']\n\t};\n\tvar OPTIONS_PREPARE = {\n\t  func: function func(value) {\n\t    var type = _typeof(value);\n\t\n\t    switch (type) {\n\t      case 'string':\n\t        return new Function('context', \"return context.\".concat(value, \";\"))(context);\n\t\n\t      case 'function':\n\t        return value;\n\t    }\n\t  },\n\t  bool: function bool(value) {\n\t    var type = _typeof(value);\n\t\n\t    switch (type) {\n\t      case 'string':\n\t        return value === 'true' || value === 'on';\n\t\n\t      case 'boolean':\n\t        return value;\n\t    }\n\t  },\n\t  noop: function noop(value) {\n\t    return value;\n\t  },\n\t  reg: function reg(value) {\n\t    var type = _typeof(value);\n\t\n\t    switch (type) {\n\t      case 'string':\n\t        if (value) {\n\t          var match = value.match(REG_STRREG);\n\t\n\t          if (match) {\n\t            return new RegExp(match[1], match[2]);\n\t          }\n\t        }\n\t\n\t        return null;\n\t\n\t      case 'object':\n\t        if (value instanceof context.RegExp || value === null) {\n\t          return value;\n\t        }\n\t\n\t    }\n\t  },\n\t  str: function str(value) {\n\t    if (typeof value !== 'undefined') {\n\t      return value ? String(value) : '';\n\t    }\n\t  },\n\t  uint: function uint(value) {\n\t    value = Number(value);\n\t\n\t    if (!isNaN(value) && value > 0) {\n\t      return value;\n\t    }\n\t  }\n\t};\n\t/**\n\t * @param {HTMLElement} node\n\t * @param {array} args\n\t * @param {string|object} args.0 - string, if only one option is inserted, or object, if many options inserted,\n\t *  in the second case second argument doing nothing\n\t * @param {*} args.1 - value of inserted option\n\t *\n\t * @returns {*}\n\t */\n\t\n\tfunction handleOptions(node) {\n\t  var value = arguments.length <= 1 ? undefined : arguments[1];\n\t\n\t  if (value) {\n\t    if (!node[PROPS.OPTIONS]) {\n\t      reinitOptions(node);\n\t    }\n\t\n\t    if (_typeof(value) === 'object' && value !== null) {\n\t      var optionsObj = value;\n\t      Object.keys(optionsObj).forEach(function (optionName) {\n\t        node[PROPS.OPTIONS][optionName] = optionsObj[optionName];\n\t      });\n\t      prepareOptions(node[PROPS.OPTIONS]);\n\t      return;\n\t    }\n\t\n\t    var optionName = value;\n\t    var optionValue = arguments.length <= 2 ? undefined : arguments[2];\n\t\n\t    if (typeof optionValue !== 'undefined') {\n\t      node[PROPS.OPTIONS][optionName] = optionValue;\n\t      prepareOptions(node[PROPS.OPTIONS]);\n\t    } else {\n\t      return node[PROPS.OPTIONS][optionName];\n\t    }\n\t  } else {\n\t    reinitOptions(node);\n\t  }\n\t}\n\t\n\thandleOptions.attributes = Object.keys(OPTIONS).map(function (optionName) {\n\t  return \"data-\".concat(OPTIONS[optionName][2]);\n\t});\n\tmodule.exports = handleOptions;\n\t\n\tfunction reinitOptions(node) {\n\t  var options = node[PROPS.OPTIONS] = node[PROPS.OPTIONS] || {};\n\t\n\t  for (var optionName in OPTIONS) {\n\t    var attrName = \"data-\".concat(OPTIONS[optionName][2]);\n\t\n\t    if (node.hasAttribute(attrName)) {\n\t      options[optionName] = node.getAttribute(attrName);\n\t    }\n\t  }\n\t\n\t  prepareOptions(options);\n\t}\n\t\n\tfunction prepareOptions(options) {\n\t  for (var name in OPTIONS) {\n\t    var _OPTIONS$name = _slicedToArray(OPTIONS[name], 2),\n\t        type = _OPTIONS$name[0],\n\t        def = _OPTIONS$name[1];\n\t\n\t    options[name] = OPTIONS_PREPARE[type](options[name]);\n\t\n\t    if (typeof options[name] === 'undefined') {\n\t      options[name] = def;\n\t    }\n\t  }\n\t}\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// x-bubbles-compact.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e4ca428888d602b5ddb0","/**\n * XBubbles custom element.\n * @module x-bubbles\n */\n\nconst context = require('./context');\nconst editor = require('./core/editor');\nconst utils = require('./core/utils');\nconst options = require('./core/options');\n\nclass XBubbles extends HTMLDivElement {\n    static get observedAttributes() {\n        return options.attributes;\n    }\n\n    constructor(...args) {\n        const self = super(...args);\n        initEditor(self);\n        utils.ready(self);\n\n        // @see https://github.com/WebReflection/document-register-element/tree/0b03ac9747a924e25514e969be7757c39287dea6#upgrading-the-constructor-context\n        return self;\n    }\n\n    connectedCallback() {\n        initEditor(this);\n        this.editor.bubbling();\n    }\n\n    disconnectedCallback() {\n        destroyEditor(this);\n    }\n\n    attributeChangedCallback(/*name, prevValue, value*/) {\n        options(this);\n    }\n\n    /**\n     * The receiving and recording settings.\n     * @memberof XBubbles\n     * @function\n     * @param {string|object} name - string, if only one option is inserted, or object - if many options inserted\n     * @param {*} value\n     * @returns {*}\n     * @public\n     */\n    options(name, value) {\n        return options(this, name, value)\n    }\n\n\n    /**\n     * List bablow.\n     * @memberof XBubbles\n     * @type {array}\n     * @public\n     */\n    get items() {\n        return this.editor.getItems();\n    }\n\n    /**\n     * The value entered.\n     * @memberof XBubbles\n     * @type {string}\n     * @public\n     */\n    get inputValue() {\n        return this.editor.inputValue();\n    }\n\n    /**\n     * Set contents of the set.\n     * @function\n     * @memberof XBubbles\n     * @param {string} data\n     * @returns {boolean}\n     * @public\n     */\n    setContent(data) {\n        return this.editor.setContent(data);\n    }\n\n    canAddBubble() {\n        return this.editor.canAddBubble();\n    }\n\n    /**\n     * Add bubble.\n     * @function\n     * @memberof XBubbles\n     * @param {string} bubbleText\n     * @param {Object} [data]\n     * @returns {boolean}\n     * @public\n     */\n    addBubble(bubbleText, data) {\n        return this.editor.addBubble(bubbleText, data);\n    }\n\n    /**\n     * Remove bubble.\n     * @function\n     * @memberof XBubbles\n     * @param {HTMLElement} nodeBubble\n     * @returns {boolean}\n     * @public\n     */\n    removeBubble(nodeBubble) {\n        return this.editor.removeBubble(nodeBubble);\n    }\n\n    /**\n     * Edit bubble.\n     * @function\n     * @memberof XBubbles\n     * @param {HTMLElement} nodeBubble\n     * @returns {boolean}\n     * @public\n     */\n    editBubble(nodeBubble) {\n        return this.editor.editBubble(nodeBubble);\n    }\n\n    /**\n     * Starting formation bablow.\n     * @function\n     * @memberof XBubbles\n     * @returns {boolean}\n     * @public\n     */\n    bubbling() {\n        return this.editor.bubbling();\n    }\n}\n\ncontext.customElements.define('x-bubbles', XBubbles, {\n    extends: 'div'\n});\n\nmodule.exports = XBubbles;\n\nfunction initEditor(node) {\n    if (!node.editor) {\n        Object.defineProperty(node, 'editor', {\n            configurable: true,\n            value: editor.init(node)\n        });\n    }\n}\n\nfunction destroyEditor(node) {\n    if (node.editor) {\n        editor.destroy(node);\n        delete node.editor;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","module.exports = (function () {\n    /* eslint no-eval: 0 */\n    return this || (1, eval)('this');\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./context.js","const context = require('../context');\nconst bubbleset = require('./bubbleset');\nconst bubble = require('./bubble');\nconst cursor = require('./cursor');\nconst { EV, PROPS } = require('./constant');\nconst text = require('./text');\nconst events = require('./events');\nconst utils = require('./utils');\nconst drag = require('./drag');\nconst select = require('./select');\n\nconst COMMON_EVENTS = {\n    blur: require('./common/blur'),\n    click: require('./common/click'),\n    focus: require('./common/focus'),\n    keydown: require('./common/keydown'),\n};\n\nconst EDITOR_EVENTS = {\n    blur: require('./editor/blur'),\n    click: require('./editor/click'),\n    mousedown: require('./editor/mousedown'),\n    focus: require('./editor/focus'),\n    keydown: require('./editor/keydown'),\n    keypress: require('./editor/keypress'),\n    keyup: require('./editor/keyup'),\n    paste: require('./editor/paste'),\n};\n\nconst SELECT_EVENTS = {\n    blur: require('./select/blur'),\n    click: require('./select/click'),\n    keydown: require('./select/keydown'),\n    keypress: require('./select/keypress'),\n};\n\nconst PROXY_EVENTS = {\n    blur: events.proxyLocal,\n    click: events.proxyLocal,\n    mousedown: events.proxyLocal,\n    focus: events.proxyLocal,\n    keydown: events.proxyLocal,\n    keypress: events.proxyLocal,\n    keyup: events.proxyLocal,\n    mscontrolselect: events.prevent,\n    paste: events.proxyLocal,\n    resize: events.prevent,\n    resizestart: events.prevent,\n};\n\nexports.init = function (nodeWrap) {\n    const nodeEditor = nodeWrap;\n    nodeEditor.setAttribute('contenteditable', 'true');\n    nodeEditor.setAttribute('spellcheck', 'false');\n\n    events.onLocal(nodeEditor, COMMON_EVENTS);\n    events.onLocal(nodeEditor, EDITOR_EVENTS);\n\n    if (nodeEditor.options('selection')) {\n        events.onLocal(nodeEditor, SELECT_EVENTS);\n        drag.init(nodeEditor);\n    }\n\n    events.on(nodeEditor, PROXY_EVENTS);\n\n    nodeEditor.fireChange = utils.throttle(fireChange, nodeEditor);\n    nodeEditor.fireEdit = utils.throttle(fireEdit, nodeEditor);\n    nodeEditor.fireInput = utils.throttle(fireInput, nodeEditor);\n    nodeEditor.fireBeforeRemove = fireBeforeRemove.bind(nodeEditor);\n\n    return {\n        canAddBubble: canAddBubble.bind(nodeEditor),\n        addBubble: addBubble.bind(nodeEditor),\n        bubbling: bubbling.bind(nodeEditor),\n        editBubble: editBubble.bind(nodeEditor),\n        getItems: getItems.bind(nodeEditor),\n        inputValue: inputValue.bind(nodeEditor),\n        removeBubble: removeBubble.bind(nodeEditor),\n        setContent: setContent.bind(nodeEditor)\n    };\n};\n\nexports.destroy = function (nodeWrap) {\n    const nodeEditor = nodeWrap;\n    events.off(nodeEditor, PROXY_EVENTS);\n    events.offLocal(nodeEditor, COMMON_EVENTS);\n    events.offLocal(nodeEditor, EDITOR_EVENTS);\n\n    if (nodeEditor.options('selection')) {\n        events.offLocal(nodeEditor, SELECT_EVENTS);\n        drag.destroy(nodeEditor);\n    }\n};\n\nfunction canAddBubble() {\n    return bubbleset.canAddBubble(this);\n}\n\nfunction getItems() {\n    return bubbleset.getBubbles(this);\n}\n\nfunction setContent(data) {\n    const selection = context.getSelection();\n    selection && selection.removeAllRanges();\n\n    const list = select.get(this);\n    if (list.length) {\n        bubbleset.removeBubbles(this, list);\n        this.fireChange();\n    }\n\n    while (this.firstChild) {\n        this.removeChild(this.firstChild);\n    }\n\n    data = text.html2text(data);\n    this.appendChild(this.ownerDocument.createTextNode(data));\n    bubble.bubbling(this);\n    cursor.restore(this);\n\n    return true;\n}\n\nfunction addBubble(bubbleText, dataAttributes) {\n    const nodeBubble = bubble.create(this, bubbleText, dataAttributes);\n    if (!this.canAddBubble() || !nodeBubble) {\n        return false;\n    }\n\n    if (text.text2bubble(this, nodeBubble)) {\n        this.fireInput();\n        this.fireChange();\n        cursor.restore(this);\n        return true;\n    }\n\n    return false;\n}\n\nfunction removeBubble(nodeBubble) {\n    if (this.contains(nodeBubble)) {\n        bubbleset.removeBubbles(this, [ nodeBubble ]);\n        this.fireChange();\n        return true;\n    }\n\n    return false;\n}\n\nfunction editBubble(nodeBubble) {\n    if (this.contains(nodeBubble)) {\n        return bubble.edit(this, nodeBubble);\n    }\n\n    return false;\n}\n\nfunction inputValue() {\n    const textRange = text.currentTextRange(this);\n    return textRange && text.textClean(textRange.toString()) || '';\n}\n\nfunction bubbling() {\n    bubble.bubbling(this);\n}\n\n/**\n * Генерация события редактирования бабла.\n * Выполняется в контексте узла-обертки.\n * @alias module:x-bubbles/editor.fireEdit\n * @param {HTMLElement} nodeBubble нода бабл\n * @this HTMLElement\n * @private\n */\nfunction fireEdit(nodeBubble) {\n    events.dispatch(this, EV.BUBBLE_EDIT, {\n        bubbles: false,\n        cancelable: false,\n        detail: { data: nodeBubble }\n    });\n}\n\n/**\n * Генерация события изменения набора баблов.\n * Выполняется в контексте узла-обертки.\n * @alias module:x-bubbles/editor.fireChange\n * @this HTMLElement\n * @private\n */\nfunction fireChange() {\n    events.dispatch(this, EV.CHANGE, {\n        bubbles: false,\n        cancelable: false\n    });\n}\n\n/**\n * Генерация события ввода текста.\n * Выполняется в контексте узла-обертки.\n * @alias module:x-bubbles/editor.fireInput\n * @this HTMLElement\n * @private\n */\nfunction fireInput() {\n    const editText = inputValue.call(this);\n\n    if (this[ PROPS.BUBBLE_VALUE ] !== editText) {\n        this[ PROPS.BUBBLE_VALUE ] = editText;\n\n        events.dispatch(this, EV.BUBBLE_INPUT, {\n            bubbles: false,\n            cancelable: false,\n            detail: { data: editText }\n        });\n    }\n}\n\n/**\n * Генерация события удаления баблов перед выполнением удаления из DOM.\n * Выполняется в контексте узла-обертки.\n * @alias module:x-bubbles/editor.fireRemove\n * @param {array} list список удаляемых узлов\n * @this HTMLElement\n * @private\n */\nfunction fireBeforeRemove(list) {\n    events.dispatch(this, EV.BEFORE_REMOVE, {\n        bubbles: false,\n        cancelable: false,\n        detail: { data: list }\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/editor.js","const bubble = require('./bubble');\nconst text = require('./text');\n\nexports.closestNodeBubble = closestNodeBubble;\nexports.closestNodeSet = closestNodeSet;\nexports.findBubbleLeft = findBubbleLeft;\nexports.findBubbleRight = findBubbleRight;\nexports.getBubbles = getBubbles;\nexports.bubblesCount = bubblesCount;\nexports.hasBubbles = hasBubbles;\nexports.headBubble = headBubble;\nexports.lastBubble = lastBubble;\nexports.nextBubble = nextBubble;\nexports.prevBubble = prevBubble;\nexports.removeBubbles = removeBubbles;\nexports.moveBubbles = moveBubbles;\nexports.canAddBubble = canAddBubble;\nexports.getRemainingCapacity = getRemainingCapacity;\n\nfunction lastBubble(nodeSet) {\n    return nodeSet.querySelector('[bubble]:last-child');\n}\n\nfunction headBubble(nodeSet) {\n    return nodeSet.querySelector('[bubble]:first-child');\n}\n\nfunction getBubbles(nodeSet) {\n    return Array.prototype.slice.call(nodeSet.querySelectorAll('[bubble]'));\n}\n\nfunction bubblesCount(nodeSet) {\n    const bubbles = getBubbles(nodeSet);\n    return bubbles.length;\n}\n\nfunction hasBubbles(nodeSet) {\n    return Boolean(nodeSet.querySelector('[bubble]'));\n}\n\nfunction findBubbleLeft(selection) {\n    if (!selection.focusNode || !selection.anchorNode) {\n        return;\n    }\n\n    let node = selection.focusNode.previousSibling;\n\n    if (selection.anchorNode !== selection.focusNode &&\n        selection.anchorNode.compareDocumentPosition(selection.focusNode) & Node.DOCUMENT_POSITION_FOLLOWING) {\n        node = selection.anchorNode.previousSibling;\n    }\n\n    while (node) {\n        if (bubble.isBubbleNode(node)) {\n            return node;\n        }\n\n        if (node.nodeType === Node.TEXT_NODE && text.textClean(node.nodeValue)) {\n            return;\n        }\n\n        node = node.previousSibling;\n    }\n}\n\nfunction findBubbleRight(selection) {\n    if (!selection.focusNode || !selection.anchorNode) {\n        return;\n    }\n\n    let node = selection.focusNode.nextSibling;\n\n    if (selection.anchorNode !== selection.focusNode &&\n        selection.anchorNode.compareDocumentPosition(selection.focusNode) & Node.DOCUMENT_POSITION_FOLLOWING) {\n        node = selection.anchorNode.nextSibling;\n    }\n\n    while (node) {\n        if (bubble.isBubbleNode(node)) {\n            return node;\n        }\n\n        if (node.nodeType === Node.TEXT_NODE && text.textClean(node.nodeValue)) {\n            return;\n        }\n\n        node = node.nextSibling;\n    }\n}\n\nfunction closestNodeSet(node) {\n    while (node) {\n        if (isEditorNode(node)) {\n            return node;\n        }\n\n        node = node.parentNode;\n    }\n}\n\nfunction closestNodeBubble(node) {\n    while (node) {\n        if (bubble.isBubbleNode(node)) {\n            return node;\n        }\n\n        if (isEditorNode(node)) {\n            return;\n        }\n\n        node = node.parentNode;\n    }\n}\n\nfunction prevBubble(target) {\n    let node = target && target.previousSibling;\n    while (node) {\n        if (bubble.isBubbleNode(node)) {\n            return node;\n        }\n\n        node = node.previousSibling;\n    }\n}\n\nfunction nextBubble(target) {\n    let node = target && target.nextSibling;\n    while (node) {\n        if (bubble.isBubbleNode(node)) {\n            return node;\n        }\n\n        node = node.nextSibling;\n    }\n}\n\nfunction isEditorNode(node) {\n    return (\n        node.nodeType === Node.ELEMENT_NODE &&\n        node.getAttribute('is') === 'x-bubbles'\n    );\n}\n\nfunction removeBubbles(nodeEditor, list) {\n    nodeEditor.fireBeforeRemove(list);\n    list.forEach(item => nodeEditor.removeChild(item));\n}\n\nfunction moveBubbles(nodeEditorFrom, nodeEditorTo, list) {\n    const remainingCapacity = getRemainingCapacity(nodeEditorTo);\n\n    if (remainingCapacity <= 0) {\n        return;\n    }\n\n    const movedBubbles = list.slice(0, remainingCapacity);\n\n    nodeEditorFrom.fireBeforeRemove(movedBubbles);\n    movedBubbles.forEach(item => nodeEditorTo.appendChild(item));\n}\n\nfunction canAddBubble(nodeEditor) {\n    const bubblesLimit = nodeEditor.options('limit');\n\n    return !bubblesLimit || (bubblesCount(nodeEditor) < bubblesLimit);\n}\n\nfunction getRemainingCapacity(nodeEditor) {\n    const bubblesLimit = nodeEditor.options('limit');\n\n    if (!bubblesLimit) {\n        return Number.POSITIVE_INFINITY;\n    }\n\n    return bubblesLimit - bubblesCount(nodeEditor);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/bubbleset.js","const context = require('../context');\nconst text = require('./text');\nconst bubbleset = require('./bubbleset');\nconst { escape, canUseDrag } = require('./utils');\n\nexports.isBubbleNode = isBubbleNode;\nexports.bubbling = bubbling;\nexports.create = create;\nexports.edit = edit;\n\nfunction isBubbleNode(node) {\n    if (!node || node.nodeType !== Node.ELEMENT_NODE) {\n        return false;\n    }\n\n    return node.hasAttribute('bubble');\n}\n\nfunction edit(nodeSet, nodeBubble) {\n    if (nodeBubble.hasAttribute('readonly')) {\n        return false;\n    }\n\n    const selection = context.getSelection();\n\n    if (!selection) {\n        return false;\n    }\n\n    const bubbleDeformation = nodeSet.options('bubbleDeformation');\n    let rangeParams = bubbleDeformation(nodeBubble);\n\n    if (!rangeParams) {\n        const dataText = text.textClean(nodeBubble.innerText);\n\n        rangeParams = {\n            text: dataText,\n            startOffset: 0,\n            endOffset: dataText.length\n        };\n    }\n\n    const textFake = text.createZws();\n    const textNode = context.document.createTextNode(rangeParams.text);\n\n    nodeSet.fireEdit(nodeBubble);\n    nodeSet.replaceChild(textNode, nodeBubble);\n    nodeSet.insertBefore(textFake, textNode);\n\n    const range = context.document.createRange();\n    range.setStart(textNode, rangeParams.startOffset);\n    range.setEnd(textNode, rangeParams.endOffset);\n\n    selection.removeAllRanges();\n    selection.addRange(range);\n    return true;\n}\n\n/**\n * У обертки нельзя делать tabindex=-1, иначе будет слетать фокус с поля ввода.\n * @param {HTMLElement} nodeEditor\n * @param {string} dataText\n * @param {Object} [dataAttributes={}]\n * @returns {?HTMLElement}\n */\nfunction create(nodeEditor, dataText, dataAttributes = {}) {\n    dataText = text.textClean(dataText);\n\n    if (!dataText) {\n        return;\n    }\n\n    const bubbleFormation = nodeEditor.options('bubbleFormation');\n    const classBubble = nodeEditor.options('classBubble');\n    const draggable = canUseDrag && nodeEditor.options('draggable') && nodeEditor.options('selection');\n    const wrap = nodeEditor.ownerDocument.createElement('span');\n\n    wrap.innerText = dataText;\n\n    for (let key in dataAttributes) {\n        if (dataAttributes[ key ]) {\n            wrap.setAttribute(`data-${key}`, escape(dataAttributes[ key ]));\n        }\n    }\n\n    bubbleFormation(wrap);\n\n    if (classBubble) {\n        const classes = String(classBubble).trim().split(/\\s+/);\n        let len = classes.length;\n\n        while (len--) {\n            wrap.classList.add(classes[ len ]);\n        }\n    }\n\n    wrap.setAttribute('bubble', '');\n    wrap.setAttribute('contenteditable', 'false');\n    draggable && wrap.setAttribute('draggable', 'true');\n\n    return wrap;\n}\n\nfunction bubbling(nodeSet) {\n    const begining = nodeSet.options('begining');\n    const ending = nodeSet.options('ending');\n    const separator = nodeSet.options('separator');\n    const tokenizer = nodeSet.options('tokenizer');\n    const ranges = getBubbleRanges(nodeSet);\n    const nodes = [];\n\n    const remainingCapacity = bubbleset.getRemainingCapacity(nodeSet);\n\n    ranges.forEach(function (range) {\n        const dataText = text.textClean(range.toString());\n\n        if (!dataText) {\n            range.deleteContents();\n            return;\n        }\n\n        let textParts = [ dataText ];\n\n        if (tokenizer) {\n            textParts = tokenizer(dataText);\n\n        } else {\n            if (separator) {\n                textParts = dataText\n                    .split(separator)\n                    .map(trimIterator)\n                    .filter(nonEmptyIterator);\n            }\n\n            if (ending) {\n                textParts = textParts\n                    .reduce((parts, str) => parts.concat(parseFragmentByEnding(str, ending)), [])\n                    .map(trimIterator)\n                    .filter(nonEmptyIterator);\n\n            } else if (begining) {\n                textParts = textParts\n                    .reduce((parts, str) => parts.concat(parseFragmentByBeginning(str, begining)), [])\n                    .map(trimIterator)\n                    .filter(nonEmptyIterator);\n            }\n        }\n\n        if (!Array.isArray(textParts) || !textParts.length) {\n            range.deleteContents();\n            return;\n        }\n\n        const fragment = context.document.createDocumentFragment();\n\n        textParts.forEach(function (textPart) {\n            if (nodes.length >= remainingCapacity) {\n                return;\n            }\n\n            const nodeBubble = create(nodeSet, textPart);\n            if (nodeBubble) {\n                fragment.appendChild(nodeBubble);\n                nodes.push(nodeBubble);\n            }\n        });\n\n        range.deleteContents();\n        range.insertNode(fragment);\n    });\n\n    nodeSet.fireInput();\n\n    if (nodes.length) {\n        nodeSet.fireChange();\n    }\n\n    return nodes;\n}\n\nfunction getBubbleRanges(nodeSet) {\n    const ranges = [];\n    const children = nodeSet.childNodes;\n    let range;\n    let node;\n\n    for (let i = 0; i < children.length; i++) {\n        node = children[ i ];\n\n        if (isBubbleNode(node)) {\n            if (range) {\n                range.setEndBefore(node);\n                ranges.push(range);\n                range = undefined;\n            }\n\n        } else {\n            if (!range) {\n                range = context.document.createRange();\n                range.setStartBefore(node);\n            }\n        }\n    }\n\n    if (range) {\n        range.setEndAfter(node);\n        ranges.push(range);\n    }\n\n    return ranges;\n}\n\nfunction trimIterator(str) {\n    return str.trim();\n}\n\nfunction nonEmptyIterator(str) {\n    return Boolean(str);\n}\n\nfunction parseFragmentByEnding(str, reg) {\n    const parts = [];\n    let lastIndex = 0;\n    let loop = 999;\n\n    reg.lastIndex = 0;\n    while (reg.exec(str) !== null && loop) {\n        loop--;\n        parts.push(str.substring(lastIndex, reg.lastIndex));\n        lastIndex = reg.lastIndex;\n    }\n\n    return parts;\n}\n\nfunction parseFragmentByBeginning(str, reg) {\n    const parts = [];\n    let res;\n    let index = 0;\n    let loop = 999;\n\n    reg.lastIndex = 0;\n    while ((res = reg.exec(str)) !== null && loop) {\n        loop--;\n        if (index !== res.index) {\n            parts.push(str.substring(index, res.index));\n            index = res.index;\n        }\n    }\n\n    parts.push(str.substring(index, str.length));\n    return parts;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/bubble.js","const context = require('../context');\nconst bubbleset = require('./bubbleset');\nconst { getSelection, correctSelection } = require('./utils');\n\n/* eslint-disable max-len */\nconst REG_REPLACE_NON_PRINTABLE = /[\\0-\\x1F\\x7F-\\x9F\\xAD\\u0378\\u0379\\u037F-\\u0383\\u038B\\u038D\\u03A2\\u0528-\\u0530\\u0557\\u0558\\u0560\\u0588\\u058B-\\u058E\\u0590\\u05C8-\\u05CF\\u05EB-\\u05EF\\u05F5-\\u0605\\u061C\\u061D\\u06DD\\u070E\\u070F\\u074B\\u074C\\u07B2-\\u07BF\\u07FB-\\u07FF\\u082E\\u082F\\u083F\\u085C\\u085D\\u085F-\\u089F\\u08A1\\u08AD-\\u08E3\\u08FF\\u0978\\u0980\\u0984\\u098D\\u098E\\u0991\\u0992\\u09A9\\u09B1\\u09B3-\\u09B5\\u09BA\\u09BB\\u09C5\\u09C6\\u09C9\\u09CA\\u09CF-\\u09D6\\u09D8-\\u09DB\\u09DE\\u09E4\\u09E5\\u09FC-\\u0A00\\u0A04\\u0A0B-\\u0A0E\\u0A11\\u0A12\\u0A29\\u0A31\\u0A34\\u0A37\\u0A3A\\u0A3B\\u0A3D\\u0A43-\\u0A46\\u0A49\\u0A4A\\u0A4E-\\u0A50\\u0A52-\\u0A58\\u0A5D\\u0A5F-\\u0A65\\u0A76-\\u0A80\\u0A84\\u0A8E\\u0A92\\u0AA9\\u0AB1\\u0AB4\\u0ABA\\u0ABB\\u0AC6\\u0ACA\\u0ACE\\u0ACF\\u0AD1-\\u0ADF\\u0AE4\\u0AE5\\u0AF2-\\u0B00\\u0B04\\u0B0D\\u0B0E\\u0B11\\u0B12\\u0B29\\u0B31\\u0B34\\u0B3A\\u0B3B\\u0B45\\u0B46\\u0B49\\u0B4A\\u0B4E-\\u0B55\\u0B58-\\u0B5B\\u0B5E\\u0B64\\u0B65\\u0B78-\\u0B81\\u0B84\\u0B8B-\\u0B8D\\u0B91\\u0B96-\\u0B98\\u0B9B\\u0B9D\\u0BA0-\\u0BA2\\u0BA5-\\u0BA7\\u0BAB-\\u0BAD\\u0BBA-\\u0BBD\\u0BC3-\\u0BC5\\u0BC9\\u0BCE\\u0BCF\\u0BD1-\\u0BD6\\u0BD8-\\u0BE5\\u0BFB-\\u0C00\\u0C04\\u0C0D\\u0C11\\u0C29\\u0C34\\u0C3A-\\u0C3C\\u0C45\\u0C49\\u0C4E-\\u0C54\\u0C57\\u0C5A-\\u0C5F\\u0C64\\u0C65\\u0C70-\\u0C77\\u0C80\\u0C81\\u0C84\\u0C8D\\u0C91\\u0CA9\\u0CB4\\u0CBA\\u0CBB\\u0CC5\\u0CC9\\u0CCE-\\u0CD4\\u0CD7-\\u0CDD\\u0CDF\\u0CE4\\u0CE5\\u0CF0\\u0CF3-\\u0D01\\u0D04\\u0D0D\\u0D11\\u0D3B\\u0D3C\\u0D45\\u0D49\\u0D4F-\\u0D56\\u0D58-\\u0D5F\\u0D64\\u0D65\\u0D76-\\u0D78\\u0D80\\u0D81\\u0D84\\u0D97-\\u0D99\\u0DB2\\u0DBC\\u0DBE\\u0DBF\\u0DC7-\\u0DC9\\u0DCB-\\u0DCE\\u0DD5\\u0DD7\\u0DE0-\\u0DF1\\u0DF5-\\u0E00\\u0E3B-\\u0E3E\\u0E5C-\\u0E80\\u0E83\\u0E85\\u0E86\\u0E89\\u0E8B\\u0E8C\\u0E8E-\\u0E93\\u0E98\\u0EA0\\u0EA4\\u0EA6\\u0EA8\\u0EA9\\u0EAC\\u0EBA\\u0EBE\\u0EBF\\u0EC5\\u0EC7\\u0ECE\\u0ECF\\u0EDA\\u0EDB\\u0EE0-\\u0EFF\\u0F48\\u0F6D-\\u0F70\\u0F98\\u0FBD\\u0FCD\\u0FDB-\\u0FFF\\u10C6\\u10C8-\\u10CC\\u10CE\\u10CF\\u1249\\u124E\\u124F\\u1257\\u1259\\u125E\\u125F\\u1289\\u128E\\u128F\\u12B1\\u12B6\\u12B7\\u12BF\\u12C1\\u12C6\\u12C7\\u12D7\\u1311\\u1316\\u1317\\u135B\\u135C\\u137D-\\u137F\\u139A-\\u139F\\u13F5-\\u13FF\\u169D-\\u169F\\u16F1-\\u16FF\\u170D\\u1715-\\u171F\\u1737-\\u173F\\u1754-\\u175F\\u176D\\u1771\\u1774-\\u177F\\u17DE\\u17DF\\u17EA-\\u17EF\\u17FA-\\u17FF\\u180F\\u181A-\\u181F\\u1878-\\u187F\\u18AB-\\u18AF\\u18F6-\\u18FF\\u191D-\\u191F\\u192C-\\u192F\\u193C-\\u193F\\u1941-\\u1943\\u196E\\u196F\\u1975-\\u197F\\u19AC-\\u19AF\\u19CA-\\u19CF\\u19DB-\\u19DD\\u1A1C\\u1A1D\\u1A5F\\u1A7D\\u1A7E\\u1A8A-\\u1A8F\\u1A9A-\\u1A9F\\u1AAE-\\u1AFF\\u1B4C-\\u1B4F\\u1B7D-\\u1B7F\\u1BF4-\\u1BFB\\u1C38-\\u1C3A\\u1C4A-\\u1C4C\\u1C80-\\u1CBF\\u1CC8-\\u1CCF\\u1CF7-\\u1CFF\\u1DE7-\\u1DFB\\u1F16\\u1F17\\u1F1E\\u1F1F\\u1F46\\u1F47\\u1F4E\\u1F4F\\u1F58\\u1F5A\\u1F5C\\u1F5E\\u1F7E\\u1F7F\\u1FB5\\u1FC5\\u1FD4\\u1FD5\\u1FDC\\u1FF0\\u1FF1\\u1FF5\\u1FFF\\u200B-\\u200F\\u202A-\\u202E\\u2060-\\u206F\\u2072\\u2073\\u208F\\u209D-\\u209F\\u20BB-\\u20CF\\u20F1-\\u20FF\\u218A-\\u218F\\u23F4-\\u23FF\\u2427-\\u243F\\u244B-\\u245F\\u2700\\u2B4D-\\u2B4F\\u2B5A-\\u2BFF\\u2C2F\\u2C5F\\u2CF4-\\u2CF8\\u2D26\\u2D28-\\u2D2C\\u2D2E\\u2D2F\\u2D68-\\u2D6E\\u2D71-\\u2D7E\\u2D97-\\u2D9F\\u2DA7\\u2DAF\\u2DB7\\u2DBF\\u2DC7\\u2DCF\\u2DD7\\u2DDF\\u2E3C-\\u2E7F\\u2E9A\\u2EF4-\\u2EFF\\u2FD6-\\u2FEF\\u2FFC-\\u2FFF\\u3040\\u3097\\u3098\\u3100-\\u3104\\u312E-\\u3130\\u318F\\u31BB-\\u31BF\\u31E4-\\u31EF\\u321F\\u32FF\\u4DB6-\\u4DBF\\u9FCD-\\u9FFF\\uA48D-\\uA48F\\uA4C7-\\uA4CF\\uA62C-\\uA63F\\uA698-\\uA69E\\uA6F8-\\uA6FF\\uA78F\\uA794-\\uA79F\\uA7AB-\\uA7F7\\uA82C-\\uA82F\\uA83A-\\uA83F\\uA878-\\uA87F\\uA8C5-\\uA8CD\\uA8DA-\\uA8DF\\uA8FC-\\uA8FF\\uA954-\\uA95E\\uA97D-\\uA97F\\uA9CE\\uA9DA-\\uA9DD\\uA9E0-\\uA9FF\\uAA37-\\uAA3F\\uAA4E\\uAA4F\\uAA5A\\uAA5B\\uAA7C-\\uAA7F\\uAAC3-\\uAADA\\uAAF7-\\uAB00\\uAB07\\uAB08\\uAB0F\\uAB10\\uAB17-\\uAB1F\\uAB27\\uAB2F-\\uABBF\\uABEE\\uABEF\\uABFA-\\uABFF\\uD7A4-\\uD7AF\\uD7C7-\\uD7CA\\uD7FC-\\uF8FF\\uFA6E\\uFA6F\\uFADA-\\uFAFF\\uFB07-\\uFB12\\uFB18-\\uFB1C\\uFB37\\uFB3D\\uFB3F\\uFB42\\uFB45\\uFBC2-\\uFBD2\\uFD40-\\uFD4F\\uFD90\\uFD91\\uFDC8-\\uFDEF\\uFDFE\\uFDFF\\uFE1A-\\uFE1F\\uFE27-\\uFE2F\\uFE53\\uFE67\\uFE6C-\\uFE6F\\uFE75\\uFEFD-\\uFF00\\uFFBF-\\uFFC1\\uFFC8\\uFFC9\\uFFD0\\uFFD1\\uFFD8\\uFFD9\\uFFDD-\\uFFDF\\uFFE7\\uFFEF-\\uFFFB\\uFFFE\\uFFFF]/g;\nconst REG_ZWS = /\\u200B/;\nconst TEXT_ZWS = '\\u200B';\n\nexports.isEmptyLeft = isEmptyLeft;\nexports.isEmptyRight = isEmptyRight;\nexports.arrowRight = arrowRight;\nexports.arrowLeft = arrowLeft;\nexports.remove = remove;\nexports.html2text = html2text;\nexports.currentTextRange = currentTextRange;\nexports.text2bubble = text2bubble;\nexports.replaceString = replaceString;\nexports.findTextBorderNode = findTextBorderNode;\nexports.selectFromCursorToStrBegin = selectFromCursorToStrBegin;\nexports.selectAll = selectAll;\nexports.textClean = textClean;\nexports.checkZws = checkZws;\nexports.createZws = createZws;\nexports.hasNear = hasNear;\n\nfunction isEmptyLeft(selection) {\n    let { startNode, startOffset } = correctSelection(selection);\n    let isEmpty = true;\n    let node = startNode;\n\n    while (node) {\n        if (node.nodeType === Node.TEXT_NODE) {\n            const value = startOffset > 0 ? node.nodeValue.substring(0, startOffset) : node.nodeValue;\n\n            if (textClean(value)) {\n                isEmpty = false;\n                break;\n            }\n\n        } else {\n            break;\n        }\n\n        startOffset = 0;\n        node = node.previousSibling;\n    }\n\n    return isEmpty;\n}\n\nfunction isEmptyRight(selection) {\n    let { endNode, endOffset } = correctSelection(selection);\n    let node = endNode;\n\n    while (node) {\n        if (node.nodeType === Node.TEXT_NODE) {\n            const value = endOffset > -1 && endOffset < node.nodeValue.length ? node.nodeValue.substring(endOffset) : node.nodeValue;\n\n            if (textClean(value)) {\n                return false;\n            }\n\n        } else {\n            return false;\n        }\n\n        endOffset = -1;\n        node = node.nextSibling;\n    }\n\n    return true;\n}\n\nfunction text2bubble(nodeEditor, nodeBubble) {\n    const selection = getSelection(nodeEditor);\n    const range = selection && currentTextRange(nodeEditor, selection);\n\n    if (range) {\n        selection.removeAllRanges();\n        selection.addRange(range);\n        replace(selection, nodeBubble);\n\n    } else {\n        nodeEditor.appendChild(nodeBubble);\n    }\n\n    return true;\n}\n\nfunction currentTextRange(nodeEditor, selection) {\n    selection = selection || getSelection(nodeEditor);\n    if (!selection) {\n        return;\n    }\n\n    const pointNode = do {\n        if (selection.focusNode && selection.focusNode.nodeType === Node.TEXT_NODE) {\n            selection.focusNode;\n\n        } else if (selection.anchorNode && selection.anchorNode.nodeType === Node.TEXT_NODE) {\n            selection.anchorNode;\n\n        } else {\n            undefined;\n        }\n    };\n\n    if (!pointNode) {\n        return;\n    }\n\n    let startNode = pointNode;\n    let endNode = pointNode;\n    let item = pointNode;\n\n    while (item && item.nodeType === Node.TEXT_NODE) {\n        startNode = item;\n        item = item.previousSibling;\n    }\n\n    item = pointNode;\n\n    while (item && item.nodeType === Node.TEXT_NODE) {\n        endNode = item;\n        item = item.nextSibling;\n    }\n\n    const range = nodeEditor.ownerDocument.createRange();\n    range.setStartBefore(startNode);\n    range.setEndAfter(endNode);\n\n    return range;\n}\n\nfunction remove(selection) {\n    return replace(selection, createZws());\n}\n\nfunction replace(selection, node) {\n    if (!selection || !selection.rangeCount) {\n        return false;\n    }\n\n    const anchor = context.document.createElement('span');\n    selection.getRangeAt(0).surroundContents(anchor);\n    anchor.parentNode.replaceChild(node, anchor);\n\n    selection.removeAllRanges();\n\n    if (node.nodeType === Node.TEXT_NODE) {\n        const range = context.document.createRange();\n        // для ИЕ обязательно указывать node.nodeValue.length\n        range.setStart(node, node.nodeValue.length);\n        range.collapse(false);\n        selection.addRange(range);\n\n    } else {\n        selection.collapse(node, 0);\n    }\n\n    return true;\n}\n\nfunction replaceString(data, selection) {\n    data = textClean(data);\n    if (!data) {\n        return false;\n    }\n\n    selection = selection || context.getSelection();\n    const textNode = context.document.createTextNode(data);\n\n    if (!replace(selection, textNode)) {\n        return false;\n    }\n\n    selection.collapse(textNode, textNode.nodeValue.length);\n    return true;\n}\n\nfunction arrowLeft(selection, extend) {\n    selection = selection || context.getSelection();\n\n    if (!selection ||\n        !selection.anchorNode ||\n        selection.anchorNode.nodeType !== Node.TEXT_NODE) {\n\n        return false;\n    }\n\n    let { startNode, endNode, startOffset, endOffset, revert } = correctSelection(selection);\n\n    if (!selection.isCollapsed && !extend) {\n        selection.collapse(startNode, startOffset);\n        return true;\n    }\n\n    const isNativeExtend = Boolean(selection.extend);\n    revert = isNativeExtend ? revert : !revert;\n    let node = revert ? startNode : endNode;\n    let offset = revert ? startOffset : endOffset;\n\n    while (node) {\n        if (node.nodeType !== Node.TEXT_NODE) {\n            return false;\n        }\n\n        if (offset === null) {\n            offset = node.nodeValue.length;\n        }\n\n        if (offset - 1 < 0) {\n            node = node.previousSibling;\n            offset = null;\n            continue;\n        }\n\n        const text = node.nodeValue.substring(offset - 1, offset);\n\n        if (checkZws(text)) {\n            offset = offset - 1;\n            continue;\n        }\n\n        break;\n    }\n\n    if (!node || offset === null) {\n        return false;\n    }\n\n    if (extend) {\n        if (isNativeExtend) {\n            selection.extend(node, offset - 1);\n\n        } else {\n            const range = context.document.createRange();\n\n            if (revert) {\n                range.setStart(node, offset - 1);\n                range.setEnd(endNode, endOffset);\n\n            } else {\n                range.setStart(startNode, startOffset);\n                range.setEnd(node, offset - 1);\n            }\n\n            selection.removeAllRanges();\n            selection.addRange(range);\n        }\n\n    } else {\n        selection.collapse(node, offset - 1);\n    }\n\n    return true;\n}\n\nfunction arrowRight(selection, extend) {\n    selection = selection || context.getSelection();\n\n    if (!selection ||\n        !selection.focusNode ||\n        selection.focusNode.nodeType !== Node.TEXT_NODE) {\n\n        return false;\n    }\n\n    let { startNode, endNode, startOffset, endOffset, revert } = correctSelection(selection);\n\n    if (!selection.isCollapsed && !extend) {\n        selection.collapse(endNode, endOffset);\n        return true;\n    }\n\n    let node = revert ? startNode : endNode;\n    let offset = revert ? startOffset : endOffset;\n\n    while (node) {\n        if (node.nodeType !== Node.TEXT_NODE) {\n            return false;\n        }\n\n        const len = node.nodeValue.length;\n\n        if (offset + 1 > len) {\n            node = node.nextSibling;\n            offset = 0;\n            continue;\n        }\n\n        const text = node.nodeValue.substring(offset, offset + 1);\n\n        if (checkZws(text)) {\n            offset = offset + 1;\n            continue;\n        }\n\n        break;\n    }\n\n    if (!node) {\n        return false;\n    }\n\n    if (extend) {\n        const isNativeExtend = Boolean(selection.extend);\n\n        if (isNativeExtend) {\n            selection.extend(node, offset + 1);\n\n        } else {\n            const range = context.document.createRange();\n\n            if (revert) {\n                range.setStart(node, offset + 1);\n                range.setEnd(endNode, endOffset);\n\n            } else {\n                range.setStart(startNode, startOffset);\n                range.setEnd(node, offset + 1);\n            }\n\n            selection.removeAllRanges();\n            selection.addRange(range);\n        }\n\n    } else {\n        selection.collapse(node, offset + 1);\n    }\n\n    return true;\n}\n\nfunction html2text(value) {\n    if (!value) {\n        return '';\n    }\n\n    var DOMContainer = context.document.implementation.createHTMLDocument('').body;\n    DOMContainer.innerText = value;\n\n    return DOMContainer.innerText\n        .replace(/^[\\u0020\\u00a0]+$/gm, '')\n        .replace(/\\n/gm, ' ')\n        .trim();\n}\n\nfunction findTextBorderNode(cursorNode, mode) {\n    let item = cursorNode;\n    let result = null;\n    const sibling = mode === 'begin' ? 'previousSibling' : 'nextSibling';\n\n    while (item && item.nodeType === Node.TEXT_NODE) {\n        result = item;\n        item = item[sibling];\n    }\n\n    return result;\n}\n\nfunction setTextSelection(selection, from, to, nodeSet) {\n    const hasBubbles = bubbleset.hasBubbles(nodeSet);\n    const range = context.document.createRange();\n    range.setStart(from.node, from.offset);\n    range.setEnd(to.node, to.offset);\n\n    const dataText = textClean(range.toString());\n\n    if (dataText || (!dataText && !hasBubbles)) {\n        if (!dataText) {\n            range.collapse();\n        }\n\n        selection.removeAllRanges();\n        selection.addRange(range);\n        return true;\n    }\n\n    return false;\n}\n\nfunction selectFromCursorToStrBegin(selection, nodeSet) {\n    selection = selection || context.getSelection();\n    const node = selection && selection.anchorNode;\n\n    if (!node || node.nodeType !== Node.TEXT_NODE) {\n        return false;\n    }\n\n    const cursorPosition = selection.anchorOffset;\n\n    const fromNode = findTextBorderNode(node, 'begin');\n\n    return setTextSelection(\n        selection,\n        { node: fromNode, offset: 0 },\n        { node, offset: cursorPosition },\n        nodeSet\n    );\n}\n\n\nfunction selectAll(selection, nodeSet) {\n    selection = selection || context.getSelection();\n    const node = selection && selection.anchorNode;\n\n    if (!node || node.nodeType !== Node.TEXT_NODE) {\n        return false;\n    }\n\n    const fromNode = findTextBorderNode(node, 'begin');\n    const toNode = findTextBorderNode(node, 'end');\n\n    return setTextSelection(\n        selection,\n        { node: fromNode, offset: 0 },\n        { node: toNode, offset: toNode.nodeValue ? toNode.nodeValue.length : 0 },\n        nodeSet\n    );\n}\n\nfunction hasNear(selection) {\n    selection = selection || context.getSelection();\n    const node = selection && selection.anchorNode;\n\n    if (!node || node.nodeType !== Node.TEXT_NODE) {\n        return false;\n    }\n\n    const fromNode = findTextBorderNode(node, 'begin');\n    const toNode = findTextBorderNode(node, 'end');\n\n    const range = context.document.createRange();\n\n    range.setStart(fromNode, 0);\n    range.setEnd(toNode, toNode.nodeValue ? toNode.nodeValue.length : 0);\n\n    const dataText = textClean(range.toString());\n\n    return Boolean(dataText);\n}\n\nfunction createZws() {\n    return context.document.createTextNode(TEXT_ZWS);\n}\n\nfunction checkZws(value) {\n    return REG_ZWS.test(value);\n}\n\nfunction textClean(value) {\n    return String(value || '')\n        .trim()\n        .replace(REG_REPLACE_NON_PRINTABLE, '');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/text.js","const raf = require('raf');\nconst context = require('../context');\nconst { dispatch } = require('./events');\nconst { EV } = require('./constant');\n\n/* eslint quotes: 0 */\n\nconst HTML_ESCAPES = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '`': '&#96;'\n};\n\nconst HTML_UNESCAPES = {\n    '&amp;': '&',\n    '&lt;': '<',\n    '&gt;': '>',\n    '&quot;': '\"',\n    '&#39;': \"'\",\n    '&#96;': '`'\n};\n\nconst REG_ESCAPED_HTML = /&(?:amp|lt|gt|quot|#39|#96);/g;\nconst REG_UNESCAPED_HTML = /[&<>\"'`]/g;\nconst REG_HAS_ESCAPED_HTML = RegExp(REG_ESCAPED_HTML.source);\nconst REG_HAS_UNESCAPED_HTML = RegExp(REG_UNESCAPED_HTML.source);\nconst REG_IE = /Trident|Edge/;\nconst REG_MOBILE_IE = /IEMobile/;\n\nexports.getSelection = function (nodeEditor) {\n    const selection = context.getSelection();\n\n    if (selection && selection.anchorNode && (nodeEditor.compareDocumentPosition(selection.anchorNode) & Node.DOCUMENT_POSITION_CONTAINED_BY)) {\n        return selection;\n    }\n};\n\nexports.correctSelection = function (selection) {\n    let endNode = selection.focusNode;\n    let endOffset = selection.focusOffset;\n    let startNode = selection.anchorNode;\n    let startOffset = selection.anchorOffset;\n    let revert = false;\n\n    if (startNode === endNode) {\n        startOffset = Math.min(selection.anchorOffset, selection.focusOffset);\n        endOffset = Math.max(selection.anchorOffset, selection.focusOffset);\n        revert = selection.anchorOffset > selection.focusOffset;\n\n    } else {\n        const position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n        if (position & Node.DOCUMENT_POSITION_PRECEDING) {\n            startNode = selection.focusNode;\n            startOffset = selection.focusOffset;\n            endNode = selection.anchorNode;\n            endOffset = selection.anchorOffset;\n            revert = true;\n        }\n    }\n\n    return { startNode, endNode, startOffset, endOffset, revert };\n};\n\nexports.throttle = function (callback, runContext) {\n    let throttle = 0;\n    const animationCallback = function () {\n        throttle = 0;\n    };\n\n    return function () {\n        if (throttle) {\n            return;\n        }\n\n        throttle = raf(animationCallback);\n\n        callback.apply(runContext || this, arguments);\n    };\n};\n\nexports.escape = function (data) {\n    data = String(data);\n\n    if (data && REG_HAS_UNESCAPED_HTML.test(data)) {\n        return data.replace(REG_UNESCAPED_HTML, escapeHtmlChar);\n    }\n\n    return data;\n};\n\nexports.unescape = function (data) {\n    data = String(data);\n\n    if (data && REG_HAS_ESCAPED_HTML.test(data)) {\n        return data.replace(REG_ESCAPED_HTML, unescapeHtmlChar);\n    }\n\n    return data;\n};\n\nexports.canUseDrag = (function () {\n    return !REG_IE.test(context.navigator.userAgent);\n})();\n\nexports.isIE = (function () {\n    return REG_IE.test(context.navigator.userAgent);\n})();\n\nexports.isMobileIE = (function () {\n    return REG_MOBILE_IE.test(context.navigator.userAgent);\n})();\n\nexports.ready = (function () {\n    let elements = [];\n    let ready = false;\n    let lock = false;\n\n    function onready() {\n        raf(function () {\n            context.setTimeout(function () {\n                elements.length && dispatch(context, EV.READY, { detail: { data: elements.splice(0) } });\n                ready = true;\n            });\n        });\n    }\n\n    function run() {\n        if (ready && !lock) {\n            lock = true;\n            raf(function () {\n                dispatch(context, EV.READY, { detail: { data: elements.splice(0) } });\n                lock = false;\n            });\n        }\n    }\n\n    if (context.document.readyState === 'complete') {\n        onready();\n\n    } else if (context.document.readyState === 'interactive' && !context.attachEvent && (!context.HTMLImports || context.HTMLImports.ready)) {\n        onready();\n\n    } else {\n        context.addEventListener(context.HTMLImports && !context.HTMLImports.ready ? 'HTMLImportsLoaded' : 'DOMContentLoaded', onready);\n    }\n\n    return function (element) {\n        elements.push(element);\n        run();\n    };\n})();\n\nfunction unescapeHtmlChar(chr) {\n    return HTML_UNESCAPES[ chr ];\n}\n\nfunction escapeHtmlChar(chr) {\n    return HTML_ESCAPES[ chr ];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/utils.js","var now = require('performance-now')\n  , root = typeof window === 'undefined' ? global : window\n  , vendors = ['moz', 'webkit']\n  , suffix = 'AnimationFrame'\n  , raf = root['request' + suffix]\n  , caf = root['cancel' + suffix] || root['cancelRequest' + suffix]\n\nfor(var i = 0; !raf && i < vendors.length; i++) {\n  raf = root[vendors[i] + 'Request' + suffix]\n  caf = root[vendors[i] + 'Cancel' + suffix]\n      || root[vendors[i] + 'CancelRequest' + suffix]\n}\n\n// Some versions of FF have rAF but not cAF\nif(!raf || !caf) {\n  var last = 0\n    , id = 0\n    , queue = []\n    , frameDuration = 1000 / 60\n\n  raf = function(callback) {\n    if(queue.length === 0) {\n      var _now = now()\n        , next = Math.max(0, frameDuration - (_now - last))\n      last = next + _now\n      setTimeout(function() {\n        var cp = queue.slice(0)\n        // Clear queue here to prevent\n        // callbacks from appending listeners\n        // to the current frame's queue\n        queue.length = 0\n        for(var i = 0; i < cp.length; i++) {\n          if(!cp[i].cancelled) {\n            try{\n              cp[i].callback(last)\n            } catch(e) {\n              setTimeout(function() { throw e }, 0)\n            }\n          }\n        }\n      }, Math.round(next))\n    }\n    queue.push({\n      handle: ++id,\n      callback: callback,\n      cancelled: false\n    })\n    return id\n  }\n\n  caf = function(handle) {\n    for(var i = 0; i < queue.length; i++) {\n      if(queue[i].handle === handle) {\n        queue[i].cancelled = true\n      }\n    }\n  }\n}\n\nmodule.exports = function(fn) {\n  // Wrap in a new function to prevent\n  // `cancel` potentially being assigned\n  // to the native rAF function\n  return raf.call(root, fn)\n}\nmodule.exports.cancel = function() {\n  caf.apply(root, arguments)\n}\nmodule.exports.polyfill = function() {\n  root.requestAnimationFrame = raf\n  root.cancelAnimationFrame = caf\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/raf/index.js\n// module id = 7\n// module chunks = 0","// Generated by CoffeeScript 1.7.1\n(function() {\n  var getNanoSeconds, hrtime, loadTime;\n\n  if ((typeof performance !== \"undefined\" && performance !== null) && performance.now) {\n    module.exports = function() {\n      return performance.now();\n    };\n  } else if ((typeof process !== \"undefined\" && process !== null) && process.hrtime) {\n    module.exports = function() {\n      return (getNanoSeconds() - loadTime) / 1e6;\n    };\n    hrtime = process.hrtime;\n    getNanoSeconds = function() {\n      var hr;\n      hr = hrtime();\n      return hr[0] * 1e9 + hr[1];\n    };\n    loadTime = getNanoSeconds();\n  } else if (Date.now) {\n    module.exports = function() {\n      return Date.now() - loadTime;\n    };\n    loadTime = Date.now();\n  } else {\n    module.exports = function() {\n      return new Date().getTime() - loadTime;\n    };\n    loadTime = new Date().getTime();\n  }\n\n}).call(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/raf/~/performance-now/lib/performance-now.js\n// module id = 8\n// module chunks = 0","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/process/browser.js\n// module id = 9\n// module chunks = 0","/**\n * @module x-bubbles/events\n */\n\nconst context = require('../context');\nconst CustomEventCommon = require('../polyfills/CustomEventCommon');\nconst { PROPS } = require('./constant');\n\nexports.scrollX = scrollX;\nexports.scrollY = scrollY;\nexports.dispatch = dispatch;\n\nexports.keyCode = function (event) {\n    return event.charCode || event.keyCode;\n};\n\nexports.metaKey = function (event) {\n    return event.ctrlKey || event.metaKey;\n};\n\nexports.pageX = function (event) {\n    return (event.pageX === null && event.clientX !== null) ?\n        event.clientX + scrollX() :\n        event.pageX;\n};\n\nexports.pageY = function (event) {\n    return (event.pageY === null && event.clientY !== null) ?\n        event.clientY + scrollY() :\n        event.pageY;\n};\n\nexports.one = function (target, eventName, callback) {\n    toggleEvent(target, eventName, callback, true, false, true);\n};\n\nexports.on = function (target, eventName, callback) {\n    toggleEvent(target, eventName, callback);\n};\n\nexports.off = function (target, eventName, callback) {\n    toggleEvent(target, eventName, callback, false);\n};\n\nexports.oneLocal = function (target, eventName, callback) {\n    toggleEvent(target, eventName, callback, true, true, true);\n};\n\nexports.onLocal = function (target, eventName, callback) {\n    toggleEvent(target, eventName, callback, true, true);\n};\n\nexports.offLocal = function (target, eventName, callback) {\n    toggleEvent(target, eventName, callback, false, true);\n};\n\nexports.prevent = function (event) {\n    event.cancelBubble = true;\n    event.returnValue = false;\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n    event.preventDefault();\n    return false;\n};\n\nexports.proxyLocal = function (event) {\n    dispatchLocalEvent(event.currentTarget, event);\n};\n\nfunction scrollX() {\n    const html = context.document.documentElement;\n    const body = context.document.body;\n    return (html && html.scrollLeft || body && body.scrollLeft || 0) - (html.clientLeft || 0);\n}\n\nfunction scrollY() {\n    const html = context.document.documentElement;\n    const body = context.document.body;\n    return (html && html.scrollTop || body && body.scrollTop || 0) - (html.clientTop || 0);\n}\n\n/**\n * Designer events.\n *\n * @example\n * const { Custom } = require('event');\n *\n * new Custom('custom-event', {\n *     bubbles: true,\n *     cancelable: true,\n *     detail: { data: '123' }\n * })\n *\n * @alias module:x-bubbles/event~Custom\n * @constructor\n */\nconst Custom = (function () {\n    if (typeof context.CustomEvent === 'function') {\n        return context.CustomEvent;\n    }\n\n    return CustomEventCommon;\n}());\n\n/**\n * Dispatch event.\n *\n * @example\n * const { dispatch } = require('event');\n * dispatch(node, 'custom-event', {\n *     bubbles: true,\n *     cancelable: true,\n *     detail: { data: '123' }\n * })\n *\n * @alias module:x-bubbles/event.dispatch\n * @param {HTMLElement} element node events\n * @param {string} name event name\n * @param {Object} params the event parameters\n * @param {boolean} [params.bubbles=false]\n * @param {boolean} [params.cancelable=false]\n * @param {*} [params.detail]\n */\nfunction dispatch(element, name, params = {}) {\n    element.dispatchEvent(new Custom(name, params));\n}\n\nfunction dispatchLocalEvent(element, event) {\n    const callbacks = element[ PROPS.LOCAL_EVENTS ] && element[ PROPS.LOCAL_EVENTS ][ event.type ] || [];\n    const sharedData = {};\n\n    for (let i = 0; i < callbacks.length; i++) {\n        if (event.immediatePropagationStopped) {\n            break;\n        }\n\n        callbacks[ i ](event, sharedData);\n    }\n}\n\nfunction oneCallback(element, eventName, callback) {\n    return function _callback(event) {\n        element.removeEventListener(eventName, _callback);\n        callback(event);\n    };\n}\n\nfunction getEventHandlersQueue(element, eventName) {\n    if (!element[ PROPS.LOCAL_EVENTS ]) {\n        element[ PROPS.LOCAL_EVENTS ] = {};\n    }\n\n    if (!element[ PROPS.LOCAL_EVENTS ][ eventName ]) {\n        element[ PROPS.LOCAL_EVENTS ][ eventName ] = [];\n    }\n\n    return element[ PROPS.LOCAL_EVENTS ][ eventName ];\n}\n\nconst EV_ACTIONS = {\n    addLocalEventListener: function (element, eventName, callback) {\n        getEventHandlersQueue(element, eventName).push(callback);\n    },\n\n    removeLocalEventListener: function (element, eventName, callback) {\n        const callbacks = element[ PROPS.LOCAL_EVENTS ] && element[ PROPS.LOCAL_EVENTS ][ eventName ] || [];\n        let i = 0;\n\n        while (i < callbacks.length) {\n            if (callbacks[ i ] === callback) {\n                callbacks.splice(i, 1);\n\n            } else {\n                i++;\n            }\n        }\n    },\n\n    addEventListener: function (element, eventName, callback) {\n        element.addEventListener(eventName, callback);\n    },\n\n    removeEventListener: function (element, eventName, callback) {\n        element.removeEventListener(eventName, callback);\n    },\n};\n\nfunction toggleEvent(element, eventName, userCallback, isSet = true, isLocal = false, isOne = false) {\n    const events = userCallback ? { [ eventName ]: userCallback } : eventName;\n    const action = `${isSet ? 'add' : 'remove'}${isLocal ? 'Local' : ''}EventListener`;\n\n    for (const name in events) {\n        const callback = isOne ? oneCallback(element, name, events[ name ]) : events[ name ];\n        EV_ACTIONS[ action ](element, name, callback);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/events.js","const context = require('../context');\n\n/**\n * @constant {Document}\n * @private\n */\nconst doc = context.document;\n\n/**\n * @constant {Object}\n * @private\n */\nconst protoEvent = context.Event.prototype;\n\nlet issetCustomEvent = false;\n\ntry {\n    issetCustomEvent = Boolean(doc.createEvent('CustomEvent'));\n} catch (e) {\n    // do nothing\n}\n\n/**\n * The original function \"stopImmediatePropagation\"\n * @constant {function}\n * @private\n */\nconst stopImmediatePropagation = protoEvent.stopImmediatePropagation;\n\n/**\n * Override function to set properties \"immediatePropagationStopped\"\n */\nprotoEvent.stopImmediatePropagation = function () {\n    this.immediatePropagationStopped = true;\n\n    if (stopImmediatePropagation) {\n        stopImmediatePropagation.call(this);\n\n    } else {\n        this.stopPropagation();\n    }\n};\n\nlet CustomEventCommon = (function () {\n    if (issetCustomEvent) {\n        return function (eventName, params) {\n            params = params || {};\n\n            let bubbles = Boolean(params.bubbles);\n            let cancelable = Boolean(params.cancelable);\n            let evt = doc.createEvent('CustomEvent');\n\n            evt.initCustomEvent(eventName, bubbles, cancelable, params.detail);\n\n            return evt;\n        };\n    }\n\n    return function (eventName, params) {\n        params = params || {};\n\n        let bubbles = Boolean(params.bubbles);\n        let cancelable = Boolean(params.cancelable);\n        let evt = doc.createEvent('Event');\n\n        evt.initEvent(eventName, bubbles, cancelable);\n        evt.detail = params.detail;\n\n        return evt;\n    };\n}());\n\nCustomEventCommon.prototype = protoEvent;\n\nmodule.exports = CustomEventCommon;\n\n\n\n// WEBPACK FOOTER //\n// ./polyfills/CustomEventCommon.js","exports.KEY = {\n    a: 65,\n    Backspace: 8,\n    Bottom: 40,\n    c: 67,\n    Cmd: 91,\n    Comma: 44, // ,\n    Delete: 46,\n    Enter: 13, // Enter\n    Esc: 27,\n    Home: 36,\n    Left: 37,\n    Right: 39,\n    Semicolon: 59, // ;\n    Space: 32,\n    Tab: 9,\n    Top: 38,\n    x: 88,\n};\n\nexports.CLS = {\n    DRAGSTART: 'drag',\n    DROPZONE: 'dropzone',\n};\n\nexports.EV = {\n    BEFORE_REMOVE: 'before-remove',\n    BUBBLE_EDIT: 'bubble-edit',\n    BUBBLE_INPUT: 'bubble-input',\n    CHANGE: 'change',\n    DRAGEND: 'dragend',\n    DRAGENTER: 'dragenter',\n    DRAGLEAVE: 'dragleave',\n    DRAGSTART: 'dragstart',\n    DROP: 'drop',\n    READY: 'x-bubbles-ready',\n};\n\nexports.PROPS = {\n    BUBBLE_VALUE: '__bubble_value__',\n    CLICK_TIME: '__click_time__',\n    LOCAL_EVENTS: '__events__',\n    LOCK_COPY: '__lock_copy__',\n    OPTIONS: '__options__',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/constant.js","/**\n * @module x-bubbles/cursor\n */\n\nconst context = require('../context');\nconst text = require('./text');\nconst select = require('./select');\nconst utils = require('./utils');\n\nexports.restore = restore;\nexports.restoreBasis = restoreBasis;\n\n/**\n * Reset the cursor position to the end of the input field.\n * This action is forbidden in the IE Mobile because it\n * causes a browser crash. There is still no workaround.\n * @alias module:x-bubbles/cursor.restore\n * @param {HTMLElement} nodeSet\n */\nfunction restore(nodeSet) {\n    if (!utils.isMobileIE) {\n        if (!nodeSet.canAddBubble()) {\n            select.setLast(nodeSet);\n            return;\n        }\n\n        select.clear(nodeSet);\n        const basis = restoreBasis(nodeSet);\n        const selection = context.getSelection();\n        selection.removeAllRanges();\n        selection.collapse(basis, 1);\n    }\n}\n\n/**\n * The creation of the fake text at the end childNodes\n * @alias module:x-bubbles/cursor.restoreBasis\n * @param {HTMLElement} nodeSet\n * @returns {HTMLTextElement} fake text node\n */\nfunction restoreBasis(nodeSet) {\n    let fakeText = text.createZws();\n\n    if (nodeSet.hasChildNodes()) {\n        const lastNode = nodeSet.childNodes[ nodeSet.childNodes.length - 1 ];\n\n        if (lastNode.isEqualNode(fakeText)) {\n            fakeText = lastNode;\n\n        } else {\n            nodeSet.appendChild(fakeText);\n        }\n\n    } else {\n        nodeSet.appendChild(fakeText);\n    }\n\n    return fakeText;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/cursor.js","const context = require('../context');\nconst utils = require('./utils');\nconst bubble = require('./bubble');\nconst bubbleset = require('./bubbleset');\n\nconst slice = Array.prototype.slice;\nconst PATH_SELECTED = '[bubble][selected]';\nconst PATH_NOT_SELECTED = '[bubble]:not([selected])';\n\nexports.all = all;\nexports.allLeft = allLeft;\nexports.add = add;\nexports.clear = clear;\nexports.get = get;\nexports.uniq = uniq;\nexports.head = head;\nexports.last = last;\nexports.has = has;\nexports.range = range;\nexports.toggleUniq = toggleUniq;\nexports.setLast = setLast;\nexports.getEditable = getEditable;\n\nfunction range(node) {\n    if (!bubble.isBubbleNode(node)) {\n        return;\n    }\n\n    const set = node.parentNode;\n    const list = get(set);\n\n    if (!list.length) {\n        uniq(node);\n        return;\n    }\n\n    clear(set);\n\n    const headList = list[0];\n    const lastList = list[ list.length - 1 ];\n\n    if (headList === lastList || !set.startRangeSelect) {\n        set.startRangeSelect = headList;\n    }\n\n    let fromNode;\n    let toNode;\n    const position = node.compareDocumentPosition(set.startRangeSelect);\n\n    if (position & Node.DOCUMENT_POSITION_PRECEDING) {\n        fromNode = set.startRangeSelect;\n        toNode = node;\n\n    } else {\n        fromNode = node;\n        toNode = set.startRangeSelect;\n    }\n\n    if (fromNode && toNode) {\n        let item = fromNode;\n\n        while (item) {\n            if (!setSelected(item)) {\n                break;\n            }\n\n            if (item === toNode) {\n                break;\n            }\n\n            item = item.nextSibling;\n        }\n\n        bubble.bubbling(set);\n    }\n}\n\nfunction all(nodeSet) {\n    slice.call(nodeSet.querySelectorAll(PATH_NOT_SELECTED)).forEach(item => setSelected(item));\n    nodeSet.startRangeSelect = nodeSet.querySelector(PATH_SELECTED);\n\n    bubble.bubbling(nodeSet);\n\n    const selection = context.getSelection();\n    selection && selection.removeAllRanges();\n}\n\nfunction allLeft(nodeSet) {\n    const lastSelectedBubble = last(nodeSet);\n\n    if (!lastSelectedBubble) {\n        return;\n    }\n\n    for (let item = bubbleset.prevBubble(lastSelectedBubble); item; item = bubbleset.prevBubble(item)) {\n        setSelected(item);\n    }\n\n    nodeSet.startRangeSelect = nodeSet.querySelector(PATH_SELECTED);\n\n    bubble.bubbling(nodeSet);\n\n    const selection = context.getSelection();\n    selection && selection.removeAllRanges();\n}\n\nfunction has(nodeSet) {\n    return Boolean(nodeSet.querySelector(PATH_SELECTED));\n}\n\nfunction head(set) {\n    return get(set)[0];\n}\n\nfunction last(set) {\n    const list = get(set);\n    return list[ list.length - 1 ];\n}\n\nfunction get(nodeSet) {\n    return slice.call(nodeSet.querySelectorAll(PATH_SELECTED));\n}\n\nfunction getEditable(nodeSet) {\n    if (!nodeSet.options('selection')) {\n        return false;\n    }\n\n    const selection = utils.getSelection(nodeSet);\n\n    if (selection && selection.rangeCount) {\n        return false;\n    }\n\n    const list = get(nodeSet);\n\n    if (list.length !== 1) {\n        return false;\n    }\n\n    return list[0];\n}\n\nfunction clear(nodeSet) {\n    get(nodeSet).forEach(item => item.removeAttribute('selected'));\n}\n\nfunction add(node) {\n    if (setSelected(node)) {\n        const nodeSet = bubbleset.closestNodeSet(node);\n\n        nodeSet.startRangeSelect = node;\n        // ???\n        bubble.bubbling(nodeSet);\n\n        return true;\n    }\n\n    return false;\n}\n\nfunction uniq(node) {\n    if (!bubble.isBubbleNode(node)) {\n        return false;\n    }\n\n    const nodeSet = bubbleset.closestNodeSet(node);\n    const selection = context.getSelection();\n\n    selection && selection.removeAllRanges();\n    clear(nodeSet);\n\n    return add(node);\n}\n\nfunction setLast(nodeEditor) {\n    return uniq(bubbleset.lastBubble(nodeEditor));\n}\n\nfunction toggleUniq(node) {\n    if (isSelected(node)) {\n        const nodeSet = bubbleset.closestNodeSet(node);\n\n        if (get(nodeSet).length === 1) {\n            return removeSelected(node);\n        }\n    }\n\n    return uniq(node);\n}\n\nfunction isSelected(node) {\n    return bubble.isBubbleNode(node) && node.hasAttribute('selected') || false;\n}\n\nfunction setSelected(node) {\n    if (bubble.isBubbleNode(node)) {\n        node.setAttribute('selected', '');\n        return true;\n    }\n\n    return false;\n}\n\nfunction removeSelected(node) {\n    if (bubble.isBubbleNode(node)) {\n        node.removeAttribute('selected');\n        return true;\n    }\n\n    return false;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/select.js","const native = require('./drag/native');\nconst mouse = require('./drag/mouse');\nconst { canUseDrag } = require('./utils');\n\nexports.init = function (nodeSet) {\n    if (canUseDrag) {\n        return native.init(nodeSet);\n    }\n\n    return mouse.init(nodeSet);\n};\n\nexports.destroy = function (nodeSet) {\n    if (canUseDrag) {\n        return native.destroy(nodeSet);\n    }\n\n    return mouse.destroy(nodeSet);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/drag.js","const context = require('../../context');\nconst select = require('../select');\nconst bubbleset = require('../bubbleset');\nconst events = require('../events');\nconst { CLS } = require('../constant');\nconst { getDragImage, onDropSuccess, DRAG_IMG } = require('./common');\n\nconst EVENTS = {\n    dragend: onDragend,\n    dragenter: onDragenter,\n    dragleave: onDragleave,\n    dragover: onDragover,\n    dragstart: onDragstart,\n    drop: onDrop,\n};\n\nlet currentDragSet = null;\n\nexports.init = function (nodeSet) {\n    events.on(nodeSet, EVENTS);\n};\n\nexports.destroy = function (nodeSet) {\n    events.off(nodeSet, EVENTS);\n};\n\nfunction onDragstart(event) {\n    event.stopPropagation();\n\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n    const nodeBubble = bubbleset.closestNodeBubble(event.target);\n\n    if (!nodeSet || !nodeBubble) {\n        event.preventDefault();\n        return;\n    }\n\n    const selection = context.getSelection();\n    selection && selection.removeAllRanges();\n\n    currentDragSet = nodeSet;\n    nodeSet.classList.add(CLS.DRAGSTART);\n    select.add(nodeBubble);\n\n    event.dataTransfer.effectAllowed = 'move';\n    event.dataTransfer.setData('text/plain', '');\n\n    const list = select.get(currentDragSet);\n\n    if (list.length > 1) {\n        event.dataTransfer.setDragImage(getDragImage(), DRAG_IMG.w, DRAG_IMG.h);\n    }\n}\n\nfunction onDrop(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (!currentDragSet) {\n        return;\n    }\n\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n\n    if (!nodeSet || nodeSet === currentDragSet) {\n        return;\n    }\n\n    const checkBubbleDrop = nodeSet.options('checkBubbleDrop');\n\n    const list = select.get(currentDragSet);\n\n    if (list.length && checkBubbleDrop(list)) {\n        bubbleset.moveBubbles(currentDragSet, nodeSet, list);\n        context.setTimeout(onDropSuccess, 0, currentDragSet, nodeSet);\n    }\n}\n\nfunction onDragover(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (!currentDragSet) {\n        return;\n    }\n\n    event.dataTransfer.dropEffect = 'move';\n}\n\nfunction onDragenter(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (!currentDragSet) {\n        return;\n    }\n\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n    if (nodeSet && nodeSet !== currentDragSet) {\n        nodeSet.classList.add(CLS.DROPZONE);\n    }\n}\n\nfunction onDragleave(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (!currentDragSet) {\n        return;\n    }\n\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n    if (nodeSet && nodeSet !== currentDragSet) {\n        nodeSet.classList.remove(CLS.DROPZONE);\n    }\n}\n\nfunction onDragend(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (!currentDragSet) {\n        return;\n    }\n\n    currentDragSet.classList.remove(CLS.DRAGSTART);\n\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n\n    if (nodeSet && nodeSet !== currentDragSet) {\n        nodeSet.classList.remove(CLS.DROPZONE);\n    }\n\n    currentDragSet = null;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/drag/native.js","const DRAG_IMG = { w: 16, h: 16 };\n\nlet dragImage = null;\n\nexports.DRAG_IMG = DRAG_IMG;\n\nexports.getDragImage = function () {\n    if (!dragImage) {\n        dragImage = new Image();\n        dragImage.src = require('url?mimetype=image/png!./bubbles.png');\n    }\n\n    return dragImage;\n};\n\nexports.onDropSuccess = function (fromNodeSet, toNodeSet) {\n    fromNodeSet.fireChange();\n    toNodeSet.focus();\n    toNodeSet.fireChange();\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/drag/common.js","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE8AAAAVCAMAAAAw/0MlAAABblBMVEUAAABOXIZJWIKCkbeNnMKMmsJNW4VNW4VWZY57ibFHV4KVpMxRYImCkLh9jbpgcJ1fcJ1JWoaZqdNUZpaHmMaVpdJIWolTZJKHmMZEV4iXqNdkdqhjdal2iLx2ib2Knc6PodNJXpJJXpNOYpdpfLKCk8JPYpdofLNugblugrqUptdZdLdZd8Nfeb93js1+ksuGm9SGm9VHaLhJarxKZqxKbL9La7pNbr9Pb71Ucr1Wbag/XqU/X6pAVopffMdjf8ZphMpwicx2js9BW51CWZN/ldCBl9KCmNNFYKRFZbGJndWOodVKX5RKX5ZKYJdWdcNXbKJYdL1KYJtAVYpaeMVJXpJKbMBgebpjeLBjf8VLYp5kd65kgMlofLRog8log8tJYqBth8xugrpviMtNabBxi851jc8/X6t3i8BOaK56kdB9lNFOaa5Ob8FPY5qBl9NGXJODmNOEmdNQbrpRcsJUb7RGXJSTptmUptiUp9kfFguNAAAAK3RSTlMAJCQkJDw8P0JCRUVubpaWlpmZwMDAw8nJzMzV29vb7e3t7fDw+Pn5+fn8jndhZAAAAQhJREFUeF6tz2VXwgAYBtBnhBKKkgoGKPY2urvT7u7ujn/vtsM5fN/e+w8uJEaLa+HvR7Zfl8WILo293Qq8vykQaLXtGnRoPcH6i1L1oEcLidpde6BQc6shslXvaVSHIdD7S9c0Sv5+ACbfFRXftBoYuzijUry1AXPHJ1QK5349pvYOqeSPfCaM8Dkq/EFxHAMst0mDY3cL89Clkis0kqmd/CxgvUt8Ukg8rub4UYCZicTiT0rFY5HnNY4dBNC32GiGwtFt+aLhULOx9CWMdRAMbVXK6cyNfJl0ubL8IYytEDHe0/XX7IZ82e/9S3HsZSDpmSQZT/SiQ+UgGDtU6DKYnYrGTrMBon97+TS1J80efgAAAABJRU5ErkJggg==\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/url-loader?mimetype=image/png!./core/drag/bubbles.png\n// module id = 18\n// module chunks = 0","const context = require('../../context');\nconst events = require('../events');\nconst utils = require('../utils');\nconst select = require('../select');\nconst bubbleset = require('../bubbleset');\nconst Modernizr = require('modernizr');\nconst { CLS, EV } = require('../constant');\nconst { getDragImage, onDropSuccess, DRAG_IMG } = require('./common');\n\nlet currentDragSet = null;\nlet currentMoveSet = null;\nlet currentDragElement = null;\n\nexports.init = function (nodeSet) {\n    events.on(nodeSet, 'mousedown', onMousedown);\n};\n\nexports.destroy = function (nodeSet) {\n    events.off(nodeSet, 'mousedown', onMousedown);\n};\n\nfunction onMousedown(event) {\n    const nodeBubble = bubbleset.closestNodeBubble(event.target);\n    if (!nodeBubble) {\n        return;\n    }\n\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n    if (!nodeSet) {\n        return;\n    }\n\n    event.preventDefault();\n    nodeSet.focus();\n\n    const drag = nodeSet.__drag__ = {\n        nodeBubble: nodeBubble,\n        nodeOffsetX: event.offsetX,\n        nodeOffsetY: event.offsetY,\n        onMousemove: utils.throttle(onMousemove.bind(this, nodeSet)),\n        onMouseup: onMouseup.bind(this, nodeSet),\n        onScroll: utils.throttle(onScroll.bind(this, nodeSet)),\n        x: 0,\n        y: 0,\n    };\n\n    currentDragSet = null;\n    currentMoveSet = null;\n    currentDragElement = null;\n\n    events.one(document, 'mouseup', drag.onMouseup);\n    events.on(document, 'mousemove', drag.onMousemove);\n    events.on(document, 'scroll', drag.onScroll);\n}\n\nfunction onMouseup(dragSet, event) {\n    const drag = dragSet.__drag__;\n    if (!drag) {\n        return;\n    }\n\n    events.off(document, 'mousemove', drag.onMousemove);\n    events.off(document, 'scroll', drag.onScroll);\n    delete dragSet.__drag__;\n\n    if (currentDragElement) {\n        currentDragElement.parentNode && currentDragElement.parentNode.removeChild(currentDragElement);\n        currentDragElement = null;\n    }\n\n    if (currentMoveSet) {\n        const _ = currentMoveSet;\n        currentMoveSet = null;\n\n        _.classList.remove(CLS.DROPZONE);\n        events.dispatch(_, EV.DRAGLEAVE, { bubbles: false, cancelable: false });\n    }\n\n    if (currentDragSet) {\n        const nodeSet = bubbleset.closestNodeSet(event.target);\n\n        if (nodeSet && nodeSet !== currentDragSet) {\n            const list = select.get(currentDragSet);\n            const checkBubbleDrop = nodeSet.options('checkBubbleDrop');\n\n            if (list.length && checkBubbleDrop(list)) {\n                bubbleset.moveBubbles(currentDragSet, nodeSet, list);\n                context.setTimeout(onDropSuccess, 0, currentDragSet, nodeSet);\n            }\n        }\n\n        const tmpDragSet = currentDragSet;\n        currentDragSet = null;\n\n        tmpDragSet.classList.remove(CLS.DRAGSTART);\n        events.dispatch(tmpDragSet, EV.DROP, { bubbles: false, cancelable: false });\n        events.dispatch(\n            tmpDragSet,\n            EV.DRAGEND,\n            { bubbles: false, cancelable: false, detail: { target: select.head(tmpDragSet) } }\n        );\n    }\n}\n\nfunction onMousemove(dragSet) {\n    const drag = dragSet.__drag__;\n    if (!drag) {\n        return;\n    }\n\n    if (!currentDragSet) {\n        const selection = context.getSelection();\n        selection && selection.removeAllRanges();\n\n        currentDragSet = dragSet;\n        currentDragSet.classList.add(CLS.DRAGSTART);\n        select.add(drag.nodeBubble);\n\n        let moveElement;\n\n        const list = select.get(currentDragSet);\n\n        if (list.length === 1) {\n            moveElement = drag.nodeBubble.cloneNode(true);\n        }\n\n        if (!moveElement) {\n            moveElement = getDragImage();\n            drag.nodeOffsetX = DRAG_IMG.w;\n            drag.nodeOffsetY = DRAG_IMG.h;\n        }\n\n        currentDragElement = document.body.appendChild(document.createElement('div'));\n        currentDragElement.style.cssText = 'position:absolute;z-index:9999;pointer-events:none;top:0;left:0;';\n        currentDragElement.appendChild(moveElement);\n\n        events.dispatch(\n            currentDragSet,\n            EV.DRAGSTART,\n            { bubbles: false, cancelable: false, detail: { target: select.head(currentDragSet) } },\n        );\n    }\n\n    drag.x = event.clientX;\n    drag.y = event.clientY;\n    onScroll(dragSet);\n\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n    if (nodeSet && nodeSet !== currentDragSet) {\n        if (currentMoveSet && currentMoveSet !== nodeSet) {\n            currentMoveSet.classList.remove(CLS.DROPZONE);\n            nodeSet.classList.add(CLS.DROPZONE);\n            currentMoveSet = nodeSet;\n            events.dispatch(currentMoveSet, EV.DRAGENTER, { bubbles: false, cancelable: false });\n\n        } else if (!currentMoveSet) {\n            nodeSet.classList.add(CLS.DROPZONE);\n            currentMoveSet = nodeSet;\n            events.dispatch(currentMoveSet, EV.DRAGENTER, { bubbles: false, cancelable: false });\n        }\n\n    } else if (currentMoveSet) {\n        const _ = currentMoveSet;\n        currentMoveSet = null;\n\n        _.classList.remove(CLS.DROPZONE);\n        events.dispatch(_, EV.DRAGLEAVE, { bubbles: false, cancelable: false });\n    }\n}\n\nfunction onScroll(dragSet) {\n    const drag = dragSet.__drag__;\n    if (!drag || !currentDragElement) {\n        return;\n    }\n\n    const x = drag.x - drag.nodeOffsetX + events.scrollX();\n    const y = drag.y - drag.nodeOffsetY + events.scrollY();\n\n    if (Modernizr.csstransforms3d) {\n        currentDragElement.style.transform = `translate3d(${x}px, ${y}px, 0px)`;\n\n    } else if (Modernizr.csstransforms) {\n        currentDragElement.style.transform = `translate(${x}px, ${y}px)`;\n\n    } else {\n        currentDragElement.style.top = `${y}px`;\n        currentDragElement.style.left = `${x}px`;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/drag/mouse.js","module.exports = window.Modernizr;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"var\":\"window.Modernizr\",\"root\":\"modernizr\",\"commonjs2\":\"modernizr\",\"commonjs\":\"modernizr\",\"amd\":\"modernizr\"}\n// module id = 20\n// module chunks = 0","const events = require('../events');\nconst { PROPS } = require('../constant');\n\n/**\n * @param {Event} event\n * @returns {?boolean}\n */\nmodule.exports = function (event) {\n    if (event.currentTarget[ PROPS.LOCK_COPY ]) {\n        return events.prevent(event);\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/common/blur.js","const events = require('../events');\nconst bubbleset = require('../bubbleset');\nconst { PROPS } = require('../constant');\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {HTMLElement} [sharedData.nodeEditor]\n * @param {HTMLElement} [sharedData.nodeBubble]\n * @param {boolean} [sharedData.isDblclick]\n * @returns {?boolean}\n */\nmodule.exports = function (event, sharedData) {\n    const nodeEditor = bubbleset.closestNodeSet(event.target);\n    if (!nodeEditor) {\n        return events.prevent(event);\n    }\n\n    sharedData.nodeEditor = nodeEditor;\n    sharedData.nodeBubble = bubbleset.closestNodeBubble(event.target);\n    sharedData.isDblclick = false;\n    sharedData.canAddBubble = nodeEditor.canAddBubble();\n\n    if (sharedData.nodeBubble) {\n        const clickTime = Date.now();\n        sharedData.isDblclick = nodeEditor[ PROPS.CLICK_TIME ] && (clickTime - nodeEditor[ PROPS.CLICK_TIME ]) < 200;\n\n        nodeEditor[ PROPS.CLICK_TIME ] = clickTime;\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/common/click.js","const raf = require('raf');\nconst context = require('../../context');\nconst events = require('../events');\nconst { PROPS } = require('../constant');\n\n/**\n * @param {Event} event\n * @returns {?boolean}\n */\nmodule.exports = function (event) {\n    const nodeEditor = event.currentTarget;\n    if (nodeEditor[ PROPS.LOCK_COPY ]) {\n        events.prevent(event);\n        delete nodeEditor[ PROPS.LOCK_COPY ];\n\n        // Safary 10 не сбрасывает курсор без задержки\n        raf(() => {\n            const selection = context.getSelection();\n            selection && selection.removeAllRanges();\n        });\n\n        return false;\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/common/focus.js","const utils = require('../utils');\nconst events = require('../events');\nconst { KEY } = require('../constant');\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nmodule.exports = function (event, sharedData) {\n    const code = events.keyCode(event);\n    sharedData.nodeEditor = event.currentTarget;\n\n    switch (code) {\n    case KEY.Left:\n    case KEY.Right:\n    case KEY.Delete:\n    case KEY.Backspace:\n        event.preventDefault();\n        sharedData.selection = utils.getSelection(event.currentTarget);\n        break;\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/common/keydown.js","const bubble = require('../bubble');\n\n/**\n * @param {Event} event\n */\nmodule.exports = function (event) {\n    bubble.bubbling(event.currentTarget);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/editor/blur.js","const events = require('../events');\nconst bubble = require('../bubble');\nconst cursor = require('../cursor');\nconst utils = require('../utils');\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {HTMLElement} sharedData.nodeEditor\n * @param {HTMLElement} [sharedData.nodeBubble]\n * @param {boolean} sharedData.isDblclick\n */\nmodule.exports = function (event, sharedData) {\n    const nodeEditor = sharedData.nodeEditor;\n    const nodeBubble = sharedData.nodeBubble;\n    const isDblclick = sharedData.isDblclick;\n\n    if (nodeBubble) {\n        if (isDblclick) {\n            if (!event.shiftKey && !events.metaKey(event)) {\n                bubble.edit(nodeEditor, nodeBubble);\n            }\n\n        } else if (!nodeEditor.options('selection')) {\n            bubble.bubbling(nodeEditor);\n            cursor.restore(nodeEditor);\n        }\n    } else {\n        const selection = utils.getSelection(nodeEditor);\n\n        if (!selection || selection.anchorNode.nodeType !== Node.TEXT_NODE) {\n            cursor.restore(nodeEditor);\n        }\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/editor/click.js","const bubbleset = require('../bubbleset');\n\nmodule.exports = function (event) {\n    const nodeEditor = bubbleset.closestNodeSet(event.target);\n\n    if (!nodeEditor) {\n        return;\n    }\n\n    const nodeBubble = bubbleset.closestNodeBubble(event.target);\n\n    // Don't show cursor if can't add bubble\n    if (!nodeBubble && !nodeEditor.canAddBubble()) {\n        nodeEditor.focus();\n        event.preventDefault();\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/editor/mousedown.js","const raf = require('raf');\nconst cursor = require('../cursor');\nconst context = require('../../context');\n\n/**\n * @param {Event} event\n */\nmodule.exports = function (event) {\n    const nodeEditor = event.currentTarget;\n\n    // Don't show cursor if can't add bubble\n    if (!nodeEditor.canAddBubble()) {\n        // Safary 10 не сбрасывает курсор без задержки\n        raf(() => {\n            const selection = context.getSelection();\n            selection && selection.removeAllRanges();\n        });\n    }\n\n    cursor.restore(nodeEditor);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/editor/focus.js","const events = require('../events');\nconst bubble = require('../bubble');\nconst cursor = require('../cursor');\nconst text = require('../text');\nconst bubbleset = require('../bubbleset');\nconst { KEY } = require('../constant');\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isTextSelectAll]\n * @param {boolean} [sharedData.isTextSelectedFromBeginToCursor]\n * @param {boolean} [sharedData.isEmptyLeft]\n * @param {boolean} [sharedData.isEmptyRight]\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nmodule.exports = function (event, sharedData) {\n    const code = events.keyCode(event);\n    const metaKey = events.metaKey(event);\n\n    switch (code) {\n    case KEY.Esc:\n        event.preventDefault();\n        bubble.bubbling(sharedData.nodeEditor);\n        cursor.restore(sharedData.nodeEditor);\n        break;\n\n    case KEY.Backspace:\n        onBackspace(event, sharedData);\n        break;\n\n    case KEY.Delete:\n        onDelete(event, sharedData);\n        break;\n\n    case KEY.Left:\n        onArrowLeft(event, sharedData);\n        break;\n\n    case KEY.Right:\n        onArrowRight(event, sharedData);\n        break;\n\n    case KEY.Home:\n        if (event.shiftKey) {\n            event.preventDefault();\n            sharedData.isTextSelectedFromBeginToCursor = text.selectFromCursorToStrBegin(null, sharedData.nodeEditor);\n        }\n        break;\n\n    case KEY.a:\n        if (metaKey) {\n            event.preventDefault();\n            sharedData.isTextSelectAll = text.selectAll(null, sharedData.nodeEditor);\n        }\n        break;\n    }\n};\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isEmptyLeft]\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nfunction onBackspace(event, sharedData) {\n    const selection = sharedData.selection;\n    if (!selection) {\n        return;\n    }\n\n    const nodeEditor = sharedData.nodeEditor;\n\n    if (!selection.isCollapsed || text.arrowLeft(selection, true)) {\n        text.remove(selection);\n        nodeEditor.fireInput();\n\n        // Если после удаления больше нет текста, то, возможно,\n        // удалили какой-то бабл во время его редактирования.\n        // Нужно оповестить о изменениях\n        if (!text.hasNear(selection)) {\n            nodeEditor.fireChange();\n        }\n\n    } else if (!nodeEditor.options('selection')) {\n        const nodeBubble = bubbleset.findBubbleLeft(selection);\n\n        if (nodeBubble) {\n            bubbleset.removeBubbles(nodeEditor, [ nodeBubble ]);\n            nodeEditor.fireChange();\n        }\n\n    } else {\n        sharedData.isEmptyLeft = true;\n    }\n}\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isEmptyRight]\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nfunction onDelete(event, sharedData) {\n    const selection = sharedData.selection;\n    if (!selection) {\n        return;\n    }\n\n    const nodeEditor = sharedData.nodeEditor;\n\n    if (!selection.isCollapsed || text.arrowRight(selection, true)) {\n        text.remove(selection);\n        nodeEditor.fireInput();\n\n        // Если после удаления больше нет текста, то, возможно,\n        // удалили какой-то бабл во время его редактирования.\n        // Нужно оповестить о изменениях\n        if (!text.hasNear(selection)) {\n            nodeEditor.fireChange();\n        }\n\n    } else if (!nodeEditor.options('selection')) {\n        const nodeBubble = bubbleset.findBubbleRight(selection);\n\n        if (nodeBubble) {\n            bubbleset.removeBubbles(nodeEditor, [ nodeBubble ]);\n            nodeEditor.fireChange();\n        }\n\n    } else {\n        sharedData.isEmptyRight = true;\n    }\n}\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isEmptyLeft]\n * @param {Selection} [sharedData.selection]\n */\nfunction onArrowLeft(event, sharedData) {\n    sharedData.isEmptyLeft = !text.arrowLeft(sharedData.selection, event.shiftKey);\n}\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isEmptyRight]\n * @param {Selection} [sharedData.selection]\n */\nfunction onArrowRight(event, sharedData) {\n    sharedData.isEmptyRight = !text.arrowRight(sharedData.selection, event.shiftKey);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/editor/keydown.js","const events = require('../events');\nconst bubble = require('../bubble');\nconst cursor = require('../cursor');\nconst select = require('../select');\nconst { KEY } = require('../constant');\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n */\nmodule.exports = function (event, sharedData) {\n    const code = events.keyCode(event);\n    const nodeEditor = event.currentTarget;\n\n    sharedData.enterBubbling = false;\n\n    if (code === KEY.Enter) {\n        event.preventDefault();\n        if (!nodeEditor.options('disableControls') && !select.getEditable(nodeEditor)) {\n            bubble.bubbling(nodeEditor);\n            cursor.restore(nodeEditor);\n\n            sharedData.enterBubbling = true;\n        }\n\n    } else if (nodeEditor.canAddBubble()) {\n        const separator = nodeEditor.options('separator');\n        if (separator && separator.test(String.fromCharCode(code))) {\n            const separatorCond = nodeEditor.options('separatorCond');\n\n            if (!separatorCond || separatorCond(nodeEditor.inputValue)) {\n                event.preventDefault();\n                bubble.bubbling(nodeEditor);\n                cursor.restore(nodeEditor);\n            }\n        }\n    } else {\n        event.preventDefault();\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/editor/keypress.js","const events = require('../events');\nconst { KEY } = require('../constant');\n\n/**\n * @param {Event} event\n */\nmodule.exports = function (event) {\n    const nodeEditor = event.currentTarget;\n    const code = events.keyCode(event);\n    const isPrintableChar = do {\n        if (event.key) {\n            event.key.length === 1;\n\n        } else {\n            ((code > 47 || code === KEY.Space || code === KEY.Backspace) && code !== KEY.Cmd);\n        }\n    };\n\n    if (isPrintableChar && nodeEditor.canAddBubble()) {\n        nodeEditor.fireInput();\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/editor/keyup.js","const raf = require('raf');\nconst context = require('../../context');\nconst bubble = require('../bubble');\nconst cursor = require('../cursor');\nconst text = require('../text');\nconst { isIE } = require('../utils');\n\nmodule.exports = function (event) {\n    event.preventDefault();\n    const nodeEditor = event.currentTarget;\n\n    if (!nodeEditor.canAddBubble()) {\n        return;\n    }\n\n    if (context.clipboardData && context.clipboardData.getData) {\n        onPasteSuccess(nodeEditor, context.clipboardData.getData('Text'));\n\n    } else if (event.clipboardData) {\n        const contentType = 'text/plain';\n        const clipboardData = event.clipboardData;\n        const data = clipboardData.getData && clipboardData.getData(contentType);\n\n        if (!onPasteSuccess(nodeEditor, data) && clipboardData.items) {\n            Array.prototype.slice.call(clipboardData.items)\n                .filter(item => item.kind === 'string' && item.type === contentType)\n                .some(function (item) {\n                    item.getAsString(function (dataText) {\n                        onPasteSuccess(nodeEditor, dataText);\n                    });\n\n                    return true;\n                });\n        }\n    }\n};\n\nfunction onPasteSuccess(nodeEditor, dataText) {\n    const checkBubblePaste = nodeEditor.options('checkBubblePaste');\n    const lineBreakReplacer = nodeEditor.options('lineBreakReplacer');\n    const selection = context.getSelection();\n\n    if (dataText && lineBreakReplacer) {\n        dataText = dataText.replace(/\\n/g, lineBreakReplacer);\n    }\n\n    const isBubbling = do {\n        if (dataText && selection.isCollapsed && !nodeEditor.inputValue) {\n            checkBubblePaste(dataText);\n\n        } else {\n            false;\n        }\n    };\n\n    if (text.replaceString(dataText, selection)) {\n        if (isBubbling) {\n            if (isIE) {\n                raf(() => onReplaceSuccess(nodeEditor));\n\n            } else {\n                onReplaceSuccess(nodeEditor);\n            }\n\n        } else {\n            nodeEditor.fireInput();\n        }\n\n        return true;\n    }\n\n    return false;\n}\n\nfunction onReplaceSuccess(nodeEditor) {\n    bubble.bubbling(nodeEditor);\n    nodeEditor.focus();\n    raf(() => cursor.restore(nodeEditor));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/editor/paste.js","const select = require('../select');\n\n/**\n * @param {Event} event\n */\nmodule.exports = function (event) {\n    select.clear(event.currentTarget);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/select/blur.js","const events = require('../events');\nconst select = require('../select');\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {HTMLElement} sharedData.nodeEditor\n * @param {HTMLElement} [sharedData.nodeBubble]\n * @param {boolean} sharedData.isDblclick\n */\nmodule.exports = function (event, sharedData) {\n    const nodeEditor = sharedData.nodeEditor;\n    const nodeBubble = sharedData.nodeBubble;\n    const isDblclick = sharedData.isDblclick;\n    const canAddBubble = sharedData.canAddBubble;\n\n    if (nodeBubble) {\n        if (events.metaKey(event)) {\n            select.add(nodeBubble);\n\n        } else if (event.shiftKey) {\n            if (!nodeEditor.startRangeSelect) {\n                select.uniq(nodeBubble);\n\n            } else {\n                select.range(nodeBubble);\n            }\n\n        } else if (!isDblclick) {\n            canAddBubble ? select.toggleUniq(nodeBubble) : select.uniq(nodeBubble);\n        }\n\n    } else if (canAddBubble) {\n        select.clear(nodeEditor);\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/select/click.js","const raf = require('raf');\nconst events = require('../events');\nconst utils = require('../utils');\nconst bubble = require('../bubble');\nconst select = require('../select');\nconst bubbleset = require('../bubbleset');\nconst cursor = require('../cursor');\nconst { KEY, PROPS } = require('../constant');\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isTextSelectAll]\n * @param {boolean} [sharedData.isTextSelectedFromBeginToCursor]\n * @param {boolean} [sharedData.isEmptyLeft]\n * @param {boolean} [sharedData.isEmptyRight]\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nmodule.exports = function (event, sharedData) {\n    const code = events.keyCode(event);\n    const metaKey = events.metaKey(event);\n\n    switch (code) {\n    case KEY.Backspace:\n        onBackspace(event, sharedData);\n        break;\n\n    case KEY.Delete:\n        onDelete(event, sharedData);\n        break;\n\n    case KEY.Left:\n        onArrowLeft(event, sharedData);\n        break;\n\n    case KEY.Right:\n        onArrowRight(event, sharedData);\n        break;\n\n    // курсор в начало списка\n    case KEY.Top:\n        event.preventDefault();\n        onTop(event, sharedData);\n        break;\n\n    // курсор в конец списка\n    case KEY.Bottom:\n        event.preventDefault();\n        onBottom(event, sharedData);\n        break;\n\n    case KEY.Home:\n        if (event.shiftKey && !sharedData.isTextSelectedFromBeginToCursor && select.has(sharedData.nodeEditor)) {\n            event.preventDefault();\n            select.allLeft(sharedData.nodeEditor);\n        }\n\n        break;\n\n    case KEY.a:\n        if (metaKey && !sharedData.isTextSelectAll) {\n            event.preventDefault();\n            select.all(sharedData.nodeEditor);\n        }\n        break;\n\n    case KEY.c:\n        metaKey && copyBubbles(sharedData.nodeEditor);\n        break;\n\n    case KEY.x:\n        metaKey && copyBubbles(sharedData.nodeEditor, () => onDelete(event, sharedData));\n        break;\n    }\n};\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nfunction onTop(event, sharedData) {\n    const nodeEditor = sharedData.nodeEditor;\n    if (nodeEditor.options('disableControls')) {\n        return;\n    }\n\n    const nodeBubble = bubbleset.headBubble(nodeEditor);\n    nodeBubble && select.uniq(nodeBubble);\n}\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nfunction onBottom(event, sharedData) {\n    const nodeEditor = sharedData.nodeEditor;\n    if (nodeEditor.options('disableControls')) {\n        return;\n    }\n\n    if (select.has(nodeEditor)) {\n        cursor.restore(nodeEditor);\n    }\n}\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isEmptyLeft]\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nfunction onBackspace(event, sharedData) {\n    const nodeEditor = sharedData.nodeEditor;\n    const selection = sharedData.selection;\n\n    if (selection) {\n        if (sharedData.isEmptyLeft) {\n            const nodeBubble = bubbleset.findBubbleLeft(selection);\n            nodeBubble && select.uniq(nodeBubble);\n        }\n\n    } else if (!removeBubbles(nodeEditor)) {\n        nodeEditor.focus();\n        // без задержки не восстанавливает курсор\n        raf(() => cursor.restore(nodeEditor));\n    }\n}\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isEmptyRight]\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nfunction onDelete(event, sharedData) {\n    const nodeEditor = sharedData.nodeEditor;\n    const selection = sharedData.selection;\n\n    if (selection) {\n        if (sharedData.isEmptyRight) {\n            const nodeBubble = bubbleset.findBubbleRight(selection);\n            nodeBubble && select.uniq(nodeBubble);\n        }\n\n    } else if (!removeBubbles(nodeEditor, true)) {\n        nodeEditor.focus();\n        // без задержки не восстанавливает курсор\n        raf(() => cursor.restore(nodeEditor));\n    }\n}\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isEmptyLeft]\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nfunction onArrowLeft(event, sharedData) {\n    const selection = sharedData.selection;\n\n    if (selection) {\n        if (sharedData.isEmptyLeft) {\n            const nodeBubble = bubbleset.findBubbleLeft(selection);\n            nodeBubble && select.uniq(nodeBubble);\n        }\n\n    } else {\n        const nodeEditor = sharedData.nodeEditor;\n        const list = select.get(nodeEditor);\n        const begin = do {\n            if (list.length > 1 && list[ 0 ] === nodeEditor.startRangeSelect) {\n                list[ list.length - 1 ];\n\n            } else {\n                list[ 0 ];\n            }\n        };\n\n        const node = bubbleset.prevBubble(begin);\n\n        if (node) {\n            if (event.shiftKey) {\n                select.range(node);\n\n            } else {\n                select.uniq(node);\n            }\n        }\n    }\n}\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isEmptyRight]\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nfunction onArrowRight(event, sharedData) {\n    const selection = sharedData.selection;\n\n    if (selection) {\n        if (sharedData.isEmptyRight) {\n            const nodeBubble = bubbleset.findBubbleRight(selection);\n            nodeBubble && select.uniq(nodeBubble);\n        }\n\n    } else {\n        const nodeEditor = sharedData.nodeEditor;\n        const list = select.get(nodeEditor);\n        const begin = do {\n            if (list.length > 1 && list[ list.length - 1 ] === nodeEditor.startRangeSelect) {\n                list[ 0 ];\n\n            } else {\n                list[ list.length - 1 ];\n            }\n        };\n\n        const node = bubbleset.nextBubble(begin);\n\n        if (node) {\n            if (event.shiftKey) {\n                select.range(node);\n\n            } else {\n                select.uniq(node);\n            }\n\n        // } else if (begin && begin.nextSibling && begin.nextSibling.nodeType === Node.TEXT_NODE) {\n        //     select.clear(nodeEditor);\n        //     selection.collapse(begin.nextSibling, 0);\n\n        } else {\n            cursor.restore(nodeEditor);\n        }\n    }\n}\n\nfunction removeBubbles(nodeEditor, removeFromRight = false) {\n    const list = select.get(nodeEditor);\n    if (!list.length) {\n        return false;\n    }\n\n    let firstBubble = list[ 0 ].previousSibling;\n    let secondBubble = list[ list.length - 1 ].nextSibling;\n\n    if (removeFromRight) {\n        let _ = firstBubble;\n        firstBubble = secondBubble;\n        secondBubble = _;\n    }\n\n    bubbleset.removeBubbles(nodeEditor, list);\n\n    if (bubble.isBubbleNode(firstBubble)) {\n        select.uniq(firstBubble);\n\n    } else if (bubble.isBubbleNode(secondBubble)) {\n        select.uniq(secondBubble);\n\n    } else {\n        nodeEditor.focus();\n        // без задержки не восстанавливает курсор\n        raf(() => cursor.restore(nodeEditor));\n    }\n\n    nodeEditor.fireChange();\n    return true;\n}\n\nfunction copyBubbles(nodeEditor, callback = function () {}) {\n    const selection = utils.getSelection(nodeEditor);\n    if (selection) {\n        return false;\n    }\n\n    const list = select.get(nodeEditor);\n    if (!list.length) {\n        return false;\n    }\n\n    const bubbleCopy = nodeEditor.options('bubbleCopy');\n    const value = bubbleCopy(list);\n\n    if (!value) {\n        return false;\n    }\n\n    nodeEditor[ PROPS.LOCK_COPY ] = true;\n\n    const target = nodeEditor.ownerDocument.createElement('input');\n    target.value = value;\n    target.style.cssText = `\n        position: absolute;\n        left: -9999px;\n        width: 1px;\n        height: 1px;\n        margin: 0;\n        padding: 0;\n        border: none;`;\n\n    nodeEditor.parentNode.appendChild(target);\n\n    events.one(target, {\n        keyup: () => nodeEditor.focus(),\n        blur: () => {\n            target && target.parentNode && target.parentNode.removeChild(target);\n            raf(callback);\n        }\n    });\n\n    target.select();\n    return true;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/select/keydown.js","const events = require('../events');\nconst bubble = require('../bubble');\nconst select = require('../select');\nconst { KEY } = require('../constant');\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n */\nmodule.exports = function (event, sharedData) {\n    const code = events.keyCode(event);\n    const nodeEditor = event.currentTarget;\n\n    if (code === KEY.Enter) {\n        event.preventDefault();\n        if (!nodeEditor.options('disableControls') && !sharedData.enterBubbling) {\n            editBubbleKeyboardEvent(nodeEditor);\n        }\n\n    } else if (code === KEY.Space) {\n        if (editBubbleKeyboardEvent(nodeEditor)) {\n            event.preventDefault();\n        }\n    }\n};\n\nfunction editBubbleKeyboardEvent(nodeEditor) {\n    const editableBubble = select.getEditable(nodeEditor);\n\n    if (editableBubble) {\n        return bubble.edit(nodeEditor, editableBubble);\n    }\n\n    return false;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/select/keypress.js","const context = require('../context');\nconst { PROPS } = require('./constant');\n\nconst REG_STRREG = /\\/(.+)\\/([gimy]{0,3})/i;\n\nconst OPTIONS = {\n    begining:           [ 'reg', null, 'begining' ],\n    bubbleCopy:         [ 'func', function (list) {\n        return list.map(item => item.innerHTML).join(', ');\n    }, 'bubble-copy' ],\n    bubbleDeformation:  [ 'func', function () {}, 'bubble-deformation' ],\n    bubbleFormation:    [ 'func', function () {}, 'bubble-formation' ],\n    checkBubblePaste:   [ 'func', function () {\n        return true;\n    }, 'check-bubble-paste' ],\n    checkBubbleDrop:    [ 'func', function () {\n        return true;\n    }, 'check-bubble-drop' ],\n    classBubble:        [ 'str', 'bubble', 'class-bubble' ],\n    disableControls:    [ 'bool', false, 'disable-controls' ],\n    draggable:          [ 'bool', true, 'draggable' ],\n    ending:             [ 'reg', null, 'ending' ], // /\\@ya\\.ru/g\n    limit:              [ 'uint', 0, 'limit' ],\n    selection:          [ 'bool', true, 'selection' ],\n    separator:          [ 'reg', /[,;]/, 'separator' ],\n    separatorCond:      [ 'func', null, 'separator-cond' ],\n    tokenizer:          [ 'func', null, 'tokenizer' ]\n};\n\nconst OPTIONS_PREPARE = {\n    func: function (value) {\n        const type = typeof value;\n        switch (type) {\n        case 'string':\n            return new Function('context', `return context.${value};`)(context);\n\n        case 'function':\n            return value;\n        }\n    },\n    bool: function (value) {\n        const type = typeof value;\n        switch (type) {\n        case 'string':\n            return (value === 'true' || value === 'on');\n\n        case 'boolean':\n            return value;\n        }\n    },\n    noop: function (value) {\n        return value;\n    },\n    reg: function (value) {\n        const type = typeof value;\n        switch (type) {\n        case 'string':\n            if (value) {\n                const match = value.match(REG_STRREG);\n                if (match) {\n                    return new RegExp(match[1], match[2]);\n                }\n            }\n\n            return null;\n\n        case 'object':\n            if (value instanceof context.RegExp || value === null) {\n                return value;\n            }\n        }\n    },\n    str: function (value) {\n        if (typeof value !== 'undefined') {\n            return value ? String(value) : '';\n        }\n    },\n    uint: function (value) {\n        value = Number(value);\n\n        if (!isNaN(value) && value > 0) {\n            return value;\n        }\n    }\n};\n\n/**\n * @param {HTMLElement} node\n * @param {array} args\n * @param {string|object} args.0 - string, if only one option is inserted, or object, if many options inserted,\n *  in the second case second argument doing nothing\n * @param {*} args.1 - value of inserted option\n *\n * @returns {*}\n */\nfunction handleOptions(node, ...args) {\n    const value = args[ 0 ];\n\n    if (value) {\n        if (!node[ PROPS.OPTIONS ]) {\n            reinitOptions(node);\n        }\n\n        if (typeof value === 'object' && value !== null) {\n            const optionsObj = value;\n\n            Object.keys(optionsObj).forEach((optionName) => {\n                node[ PROPS.OPTIONS ][ optionName ] = optionsObj[ optionName ];\n            });\n\n            prepareOptions(node[ PROPS.OPTIONS ]);\n\n            return;\n        }\n\n        const optionName = value;\n        const optionValue = args[ 1 ];\n\n        if (typeof optionValue !== 'undefined') {\n            node[ PROPS.OPTIONS ][ optionName ] = optionValue;\n            prepareOptions(node[ PROPS.OPTIONS ]);\n\n        } else {\n            return node[ PROPS.OPTIONS ][ optionName ];\n        }\n\n    } else {\n        reinitOptions(node);\n    }\n}\n\nhandleOptions.attributes = Object.keys(OPTIONS).map((optionName) => `data-${OPTIONS[optionName][2]}`);\n\nmodule.exports = handleOptions;\n\nfunction reinitOptions(node) {\n    const options = node[ PROPS.OPTIONS ] = node[ PROPS.OPTIONS ] || {};\n\n    for (const optionName in OPTIONS) {\n        const attrName = `data-${OPTIONS[ optionName ][2]}`;\n        if (node.hasAttribute(attrName)) {\n            options[ optionName ] = node.getAttribute(attrName);\n        }\n    }\n\n    prepareOptions(options);\n}\n\nfunction prepareOptions(options) {\n    for (let name in OPTIONS) {\n        const [ type, def ] = OPTIONS[ name ];\n        options[ name ] = OPTIONS_PREPARE[ type ](options[ name ]);\n        if (typeof options[ name ] === 'undefined') {\n            options[ name ] = def;\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/options.js"],"sourceRoot":""}