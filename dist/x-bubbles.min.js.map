{"version":3,"sources":["webpack:///x-bubbles.min.js","webpack:///webpack/bootstrap 44df42366707a0e4964d","webpack:///./index.js","webpack:///./context.js","webpack:///./core/editor.js","webpack:///./core/bubbleset.js","webpack:///./core/bubble.js","webpack:///./core/text.js","webpack:///./core/utils.js","webpack:///../~/raf/index.js","webpack:///../~/raf/~/performance-now/lib/performance-now.js","webpack:///../~/process/browser.js","webpack:///./core/events.js","webpack:///./polyfills/CustomEventCommon.js","webpack:///./core/constant.js","webpack:///./core/cursor.js","webpack:///./core/select.js","webpack:///./core/drag.js","webpack:///./core/drag/native.js","webpack:///./core/drag/common.js","webpack:///./core/drag/bubbles.png","webpack:///./core/drag/mouse.js","webpack:///../.modernizrrc","webpack:///./core/common/blur.js","webpack:///./core/common/click.js","webpack:///./core/common/focus.js","webpack:///./core/common/keydown.js","webpack:///./core/editor/blur.js","webpack:///./core/editor/click.js","webpack:///./core/editor/mousedown.js","webpack:///./core/editor/focus.js","webpack:///./core/editor/keydown.js","webpack:///./core/editor/keypress.js","webpack:///./core/editor/keyup.js","webpack:///./core/editor/paste.js","webpack:///./core/select/blur.js","webpack:///./core/select/click.js","webpack:///./core/select/keydown.js","webpack:///./core/select/keypress.js","webpack:///./core/options.js"],"names":["XBubbles","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","initEditor","node","editor","defineProperty","init","destroyEditor","destroy","_typeof","Symbol","iterator","obj","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","_fixBabelExtend","O","gPO","getPrototypeOf","o","sPO","construct","Reflect","Parent","args","Class","a","push","apply","bind","arguments","this","context","utils","options","_HTMLDivElement","_this","ready","bubbling","name","data","setContent","canAddBubble","bubbleText","addBubble","nodeBubble","removeBubble","editBubble","get","getItems","inputValue","HTMLDivElement","customElements","define","extends","eval","bubbleset","getBubbles","selection","getSelection","removeAllRanges","list","select","removeBubbles","fireChange","firstChild","removeChild","text","html2text","appendChild","ownerDocument","createTextNode","bubble","cursor","restore","dataAttributes","text2bubble","fireInput","contains","edit","textRange","currentTextRange","textClean","toString","fireEdit","events","dispatch","EV","BUBBLE_EDIT","bubbles","cancelable","detail","CHANGE","editText","PROPS","BUBBLE_VALUE","BUBBLE_INPUT","fireBeforeRemove","BEFORE_REMOVE","_require","drag","COMMON_EVENTS","blur","click","focus","keydown","EDITOR_EVENTS","mousedown","keypress","keyup","paste","SELECT_EVENTS","PROXY_EVENTS","proxyLocal","mscontrolselect","prevent","resize","resizestart","nodeWrap","nodeEditor","setAttribute","onLocal","on","throttle","off","offLocal","lastBubble","nodeSet","querySelector","headBubble","Array","slice","querySelectorAll","bubblesCount","hasBubbles","Boolean","findBubbleLeft","focusNode","anchorNode","previousSibling","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","isBubbleNode","nodeType","TEXT_NODE","nodeValue","findBubbleRight","nextSibling","closestNodeSet","isEditorNode","parentNode","closestNodeBubble","prevBubble","nextBubble","ELEMENT_NODE","getAttribute","forEach","item","moveBubbles","nodeEditorFrom","nodeEditorTo","remainingCapacity","getRemainingCapacity","movedBubbles","bubblesLimit","Number","POSITIVE_INFINITY","hasAttribute","bubbleDeformation","rangeParams","dataText","innerText","startOffset","endOffset","textFake","createZws","textNode","document","replaceChild","insertBefore","range","createRange","setStart","setEnd","addRange","undefined","bubbleFormation","classBubble","draggable","canUseDrag","wrap","createElement","escape","classes","String","trim","split","len","classList","add","begining","ending","separator","tokenizer","ranges","getBubbleRanges","nodes","deleteContents","textParts","map","trimIterator","filter","nonEmptyIterator","reduce","parts","str","concat","parseFragmentByEnding","parseFragmentByBeginning","isArray","fragment","createDocumentFragment","textPart","insertNode","children","childNodes","setEndBefore","setStartBefore","setEndAfter","reg","lastIndex","loop","exec","substring","res","index","isEmptyLeft","_correctSelection","correctSelection","startNode","isEmpty","isEmptyRight","_correctSelection2","endNode","replace","pointNode","remove","rangeCount","anchor","getRangeAt","surroundContents","collapse","replaceString","arrowLeft","extend","_correctSelection3","revert","isCollapsed","isNativeExtend","offset","checkZws","arrowRight","_correctSelection4","DOMContainer","implementation","createHTMLDocument","body","findTextBorderNode","cursorNode","mode","result","sibling","setTextSelection","from","to","selectFromCursorToStrBegin","cursorPosition","anchorOffset","fromNode","selectAll","toNode","hasNear","TEXT_ZWS","REG_ZWS","test","REG_REPLACE_NON_PRINTABLE","unescapeHtmlChar","chr","HTML_UNESCAPES","escapeHtmlChar","HTML_ESCAPES","raf","_require2","&","<",">","\"","'","`","&amp;","&lt;","&gt;","&quot;","&#39;","&#96;","REG_ESCAPED_HTML","REG_UNESCAPED_HTML","REG_HAS_ESCAPED_HTML","RegExp","source","REG_HAS_UNESCAPED_HTML","REG_IE","REG_MOBILE_IE","DOCUMENT_POSITION_CONTAINED_BY","focusOffset","Math","min","max","position","DOCUMENT_POSITION_PRECEDING","callback","runContext","animationCallback","unescape","navigator","userAgent","isIE","isMobileIE","onready","setTimeout","elements","READY","splice","run","lock","readyState","attachEvent","HTMLImports","addEventListener","element","global","now","root","window","vendors","suffix","caf","last","queue","frameDuration","_now","next","cp","cancelled","e","round","handle","fn","cancel","polyfill","requestAnimationFrame","cancelAnimationFrame","process","getNanoSeconds","hrtime","loadTime","performance","hr","Date","getTime","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","queueIndex","drainQueue","timeout","Item","array","noop","nextTick","title","browser","env","argv","version","versions","addListener","once","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","_defineProperty","scrollX","html","documentElement","scrollLeft","clientLeft","scrollY","scrollTop","clientTop","params","dispatchEvent","Custom","dispatchLocalEvent","event","callbacks","LOCAL_EVENTS","type","sharedData","immediatePropagationStopped","oneCallback","eventName","_callback","removeEventListener","getEventHandlersQueue","toggleEvent","userCallback","isSet","isLocal","isOne","action","EV_ACTIONS","CustomEventCommon","keyCode","charCode","metaKey","ctrlKey","pageX","clientX","pageY","clientY","one","oneLocal","cancelBubble","returnValue","stopImmediatePropagation","stopPropagation","preventDefault","currentTarget","CustomEvent","addLocalEventListener","removeLocalEventListener","doc","protoEvent","Event","issetCustomEvent","createEvent","evt","initCustomEvent","initEvent","KEY","Backspace","Bottom","Cmd","Comma","Delete","Enter","Esc","Home","Left","Right","Semicolon","Space","Tab","Top","x","CLS","DRAGSTART","DROPZONE","DRAGEND","DRAGENTER","DRAGLEAVE","DROP","CLICK_TIME","LOCK_COPY","OPTIONS","setLast","clear","basis","restoreBasis","fakeText","hasChildNodes","lastNode","isEqualNode","set","uniq","headList","lastList","startRangeSelect","setSelected","all","PATH_NOT_SELECTED","PATH_SELECTED","allLeft","lastSelectedBubble","has","head","getEditable","removeAttribute","toggleUniq","isSelected","removeSelected","native","mouse","onDragstart","currentDragSet","dataTransfer","effectAllowed","setData","setDragImage","getDragImage","DRAG_IMG","w","h","onDrop","checkBubbleDrop","onDropSuccess","onDragover","dropEffect","onDragenter","onDragleave","onDragend","EVENTS","dragend","dragenter","dragleave","dragover","dragstart","drop","dragImage","Image","src","fromNodeSet","toNodeSet","onMousedown","__drag__","nodeOffsetX","offsetX","nodeOffsetY","offsetY","onMousemove","onMouseup","onScroll","y","currentMoveSet","currentDragElement","dragSet","_","tmpDragSet","moveElement","cloneNode","style","cssText","Modernizr","csstransforms3d","transform","csstransforms","top","left","is","testRunner","featureNames","feature","aliasIdx","nameIdx","featureName","featureNameSplit","featureIdx","tests","hasOwnProperty","toLowerCase","aliases","join","substr","indexOf","isSVG","createElementNS","getBody","fake","injectElementWithStyles","rule","testnames","ret","docOverflow","mod","div","parseInt","styleSheet","background","overflow","docElement","offsetHeight","domToCSS","m1","nativeTestProps","CSS","supports","conditionText","getComputedStyle","cssToDOM","m2","toUpperCase","testProps","prefixed","skipValueTest","cleanElems","afterInit","mStyle","modElem","propsLength","prop","before","elems","shift","fnBind","that","testDOMProps","elem","testPropsAll","ucProp","charAt","cssomPrefixes","testAllProps","ModernizrProto","_version","_config","classPrefix","enableClasses","enableJSClass","usePrefixes","_q","cb","addTest","addAsyncTest","omPrefixes","_cssomPrefixes","nodeName","unshift","domPrefixes","_domPrefixes","testStyles","newSyntax","oldSyntax","usePrefix","mq","defaultStyle","offsetWidth","isDblclick","clickTime","code","shiftKey","onBackspace","onDelete","onArrowLeft","onArrowRight","isTextSelectedFromBeginToCursor","isTextSelectAll","enterBubbling","fromCharCode","separatorCond","isPrintableChar","onPasteSuccess","checkBubblePaste","isBubbling","onReplaceSuccess","clipboardData","getData","contentType","items","kind","some","getAsString","onTop","onBottom","begin","removeFromRight","firstBubble","secondBubble","copyBubbles","bubbleCopy","editBubbleKeyboardEvent","editableBubble","reinitOptions","optionName","attrName","prepareOptions","_OPTIONS$name","_slicedToArray","def","OPTIONS_PREPARE","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","done","err","REG_STRREG","innerHTML","disableControls","limit","func","Function","bool","match","uint","isNaN","optionsObj","keys","optionValue"],"mappings":"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","file":"x-bubbles.min.js","sourcesContent":["var XBubbles =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _fixBabelExtend = function (O) {\n\t    var gPO = O.getPrototypeOf || function (o) {\n\t        return o.__proto__;\n\t    },\n\t        sPO = O.setPrototypeOf || function (o, p) {\n\t        o.__proto__ = p;\n\t        return o;\n\t    },\n\t        construct = (typeof Reflect === 'undefined' ? 'undefined' : _typeof(Reflect)) === 'object' ? Reflect.construct : function (Parent, args, Class) {\n\t        var Constructor,\n\t            a = [null];\n\t        a.push.apply(a, args);\n\t        Constructor = Parent.bind.apply(Parent, a);\n\t        return sPO(new Constructor(), Class.prototype);\n\t    };\n\t\n\t    return function fixBabelExtend(Class) {\n\t        var Parent = gPO(Class);\n\t        return sPO(Class, sPO(function Super() {\n\t            return construct(Parent, arguments, gPO(this).constructor);\n\t        }, Parent));\n\t    };\n\t}(Object);\n\t\n\t/**\n\t * XBubbles custom element.\n\t * @module x-bubbles\n\t */\n\t\n\tvar context = __webpack_require__(1);\n\tvar editor = __webpack_require__(2);\n\tvar utils = __webpack_require__(6);\n\tvar _options = __webpack_require__(37);\n\t\n\tvar XBubbles = _fixBabelExtend(function (_HTMLDivElement) {\n\t    _inherits(XBubbles, _HTMLDivElement);\n\t\n\t    function XBubbles() {\n\t        _classCallCheck(this, XBubbles);\n\t\n\t        var _this = _possibleConstructorReturn(this, (XBubbles.__proto__ || Object.getPrototypeOf(XBubbles)).call(this));\n\t\n\t        initEditor(_this);\n\t        utils.ready(_this);\n\t        return _this;\n\t    }\n\t\n\t    _createClass(XBubbles, [{\n\t        key: 'connectedCallback',\n\t        value: function connectedCallback() {\n\t            initEditor(this);\n\t            this.editor.bubbling();\n\t        }\n\t    }, {\n\t        key: 'disconnectedCallback',\n\t        value: function disconnectedCallback() {\n\t            destroyEditor(this);\n\t        }\n\t    }, {\n\t        key: 'attributeChangedCallback',\n\t        value: function attributeChangedCallback() /* name, prevValue, value */{\n\t            _options(this);\n\t        }\n\t\n\t        /**\n\t         * The receiving and recording settings.\n\t         * @memberof XBubbles\n\t         * @function\n\t         * @param {string|object} name - string, if only one option is inserted, or object - if many options inserted\n\t         * @param {*} value\n\t         * @returns {*}\n\t         * @public\n\t         */\n\t\n\t    }, {\n\t        key: 'options',\n\t        value: function options(name, value) {\n\t            return _options(this, name, value);\n\t        }\n\t\n\t        /**\n\t         * List bablow.\n\t         * @memberof XBubbles\n\t         * @type {array}\n\t         * @public\n\t         */\n\t\n\t    }, {\n\t        key: 'setContent',\n\t\n\t\n\t        /**\n\t         * Set contents of the set.\n\t         * @function\n\t         * @memberof XBubbles\n\t         * @param {string} data\n\t         * @returns {boolean}\n\t         * @public\n\t         */\n\t        value: function setContent(data) {\n\t            return this.editor.setContent(data);\n\t        }\n\t    }, {\n\t        key: 'canAddBubble',\n\t        value: function canAddBubble() {\n\t            return this.editor.canAddBubble();\n\t        }\n\t\n\t        /**\n\t         * Add bubble.\n\t         * @function\n\t         * @memberof XBubbles\n\t         * @param {string} bubbleText\n\t         * @param {Object} [data]\n\t         * @returns {boolean}\n\t         * @public\n\t         */\n\t\n\t    }, {\n\t        key: 'addBubble',\n\t        value: function addBubble(bubbleText, data) {\n\t            return this.editor.addBubble(bubbleText, data);\n\t        }\n\t\n\t        /**\n\t         * Remove bubble.\n\t         * @function\n\t         * @memberof XBubbles\n\t         * @param {HTMLElement} nodeBubble\n\t         * @returns {boolean}\n\t         * @public\n\t         */\n\t\n\t    }, {\n\t        key: 'removeBubble',\n\t        value: function removeBubble(nodeBubble) {\n\t            return this.editor.removeBubble(nodeBubble);\n\t        }\n\t\n\t        /**\n\t         * Edit bubble.\n\t         * @function\n\t         * @memberof XBubbles\n\t         * @param {HTMLElement} nodeBubble\n\t         * @returns {boolean}\n\t         * @public\n\t         */\n\t\n\t    }, {\n\t        key: 'editBubble',\n\t        value: function editBubble(nodeBubble) {\n\t            return this.editor.editBubble(nodeBubble);\n\t        }\n\t\n\t        /**\n\t         * Starting formation bablow.\n\t         * @function\n\t         * @memberof XBubbles\n\t         * @returns {boolean}\n\t         * @public\n\t         */\n\t\n\t    }, {\n\t        key: 'bubbling',\n\t        value: function bubbling() {\n\t            return this.editor.bubbling();\n\t        }\n\t    }, {\n\t        key: 'items',\n\t        get: function get() {\n\t            return this.editor.getItems();\n\t        }\n\t\n\t        /**\n\t         * The value entered.\n\t         * @memberof XBubbles\n\t         * @type {string}\n\t         * @public\n\t         */\n\t\n\t    }, {\n\t        key: 'inputValue',\n\t        get: function get() {\n\t            return this.editor.inputValue();\n\t        }\n\t    }]);\n\t\n\t    return XBubbles;\n\t}(HTMLDivElement));\n\t\n\tmodule.exports = context.customElements.define('x-bubbles', XBubbles, {\n\t    extends: 'div'\n\t});\n\t\n\tfunction initEditor(node) {\n\t    if (!node.editor) {\n\t        Object.defineProperty(node, 'editor', {\n\t            configurable: true,\n\t            value: editor.init(node)\n\t        });\n\t    }\n\t}\n\t\n\tfunction destroyEditor(node) {\n\t    if (node.editor) {\n\t        editor.destroy(node);\n\t        delete node.editor;\n\t    }\n\t}\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = function () {\n\t    /* eslint no-eval: 0 */\n\t    return this || (1, eval)('this');\n\t}();\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar context = __webpack_require__(1);\n\tvar bubbleset = __webpack_require__(3);\n\tvar bubble = __webpack_require__(4);\n\tvar cursor = __webpack_require__(13);\n\t\n\tvar _require = __webpack_require__(12),\n\t    EV = _require.EV,\n\t    PROPS = _require.PROPS;\n\t\n\tvar text = __webpack_require__(5);\n\tvar events = __webpack_require__(10);\n\tvar utils = __webpack_require__(6);\n\tvar drag = __webpack_require__(15);\n\tvar select = __webpack_require__(14);\n\t\n\tvar COMMON_EVENTS = {\n\t    blur: __webpack_require__(21),\n\t    click: __webpack_require__(22),\n\t    focus: __webpack_require__(23),\n\t    keydown: __webpack_require__(24)\n\t};\n\t\n\tvar EDITOR_EVENTS = {\n\t    blur: __webpack_require__(25),\n\t    click: __webpack_require__(26),\n\t    mousedown: __webpack_require__(27),\n\t    focus: __webpack_require__(28),\n\t    keydown: __webpack_require__(29),\n\t    keypress: __webpack_require__(30),\n\t    keyup: __webpack_require__(31),\n\t    paste: __webpack_require__(32)\n\t};\n\t\n\tvar SELECT_EVENTS = {\n\t    blur: __webpack_require__(33),\n\t    click: __webpack_require__(34),\n\t    keydown: __webpack_require__(35),\n\t    keypress: __webpack_require__(36)\n\t};\n\t\n\tvar PROXY_EVENTS = {\n\t    blur: events.proxyLocal,\n\t    click: events.proxyLocal,\n\t    mousedown: events.proxyLocal,\n\t    focus: events.proxyLocal,\n\t    keydown: events.proxyLocal,\n\t    keypress: events.proxyLocal,\n\t    keyup: events.proxyLocal,\n\t    mscontrolselect: events.prevent,\n\t    paste: events.proxyLocal,\n\t    resize: events.prevent,\n\t    resizestart: events.prevent\n\t};\n\t\n\texports.init = function (nodeWrap) {\n\t    var nodeEditor = nodeWrap;\n\t    nodeEditor.setAttribute('contenteditable', 'true');\n\t    nodeEditor.setAttribute('spellcheck', 'false');\n\t\n\t    events.onLocal(nodeEditor, COMMON_EVENTS);\n\t    events.onLocal(nodeEditor, EDITOR_EVENTS);\n\t\n\t    if (nodeEditor.options('selection')) {\n\t        events.onLocal(nodeEditor, SELECT_EVENTS);\n\t        drag.init(nodeEditor);\n\t    }\n\t\n\t    events.on(nodeEditor, PROXY_EVENTS);\n\t\n\t    nodeEditor.fireChange = utils.throttle(fireChange, nodeEditor);\n\t    nodeEditor.fireEdit = utils.throttle(fireEdit, nodeEditor);\n\t    nodeEditor.fireInput = utils.throttle(fireInput, nodeEditor);\n\t    nodeEditor.fireBeforeRemove = fireBeforeRemove.bind(nodeEditor);\n\t\n\t    return {\n\t        canAddBubble: canAddBubble.bind(nodeEditor),\n\t        addBubble: addBubble.bind(nodeEditor),\n\t        bubbling: bubbling.bind(nodeEditor),\n\t        editBubble: editBubble.bind(nodeEditor),\n\t        getItems: getItems.bind(nodeEditor),\n\t        inputValue: inputValue.bind(nodeEditor),\n\t        removeBubble: removeBubble.bind(nodeEditor),\n\t        setContent: setContent.bind(nodeEditor)\n\t    };\n\t};\n\t\n\texports.destroy = function (nodeWrap) {\n\t    var nodeEditor = nodeWrap;\n\t    events.off(nodeEditor, PROXY_EVENTS);\n\t    events.offLocal(nodeEditor, COMMON_EVENTS);\n\t    events.offLocal(nodeEditor, EDITOR_EVENTS);\n\t\n\t    if (nodeEditor.options('selection')) {\n\t        events.offLocal(nodeEditor, SELECT_EVENTS);\n\t        drag.destroy(nodeEditor);\n\t    }\n\t};\n\t\n\tfunction canAddBubble() {\n\t    return bubbleset.canAddBubble(this);\n\t}\n\t\n\tfunction getItems() {\n\t    return bubbleset.getBubbles(this);\n\t}\n\t\n\tfunction setContent(data) {\n\t    var selection = context.getSelection();\n\t    selection && selection.removeAllRanges();\n\t\n\t    var list = select.get(this);\n\t    if (list.length) {\n\t        bubbleset.removeBubbles(this, list);\n\t        this.fireChange();\n\t    }\n\t\n\t    while (this.firstChild) {\n\t        this.removeChild(this.firstChild);\n\t    }\n\t\n\t    data = text.html2text(data);\n\t    this.appendChild(this.ownerDocument.createTextNode(data));\n\t    bubble.bubbling(this);\n\t    cursor.restore(this);\n\t\n\t    return true;\n\t}\n\t\n\tfunction addBubble(bubbleText, dataAttributes) {\n\t    var nodeBubble = bubble.create(this, bubbleText, dataAttributes);\n\t    if (!this.canAddBubble() || !nodeBubble) {\n\t        return false;\n\t    }\n\t\n\t    if (text.text2bubble(this, nodeBubble)) {\n\t        this.fireInput();\n\t        this.fireChange();\n\t        cursor.restore(this);\n\t        return true;\n\t    }\n\t\n\t    return false;\n\t}\n\t\n\tfunction removeBubble(nodeBubble) {\n\t    if (this.contains(nodeBubble)) {\n\t        bubbleset.removeBubbles(this, [nodeBubble]);\n\t        this.fireChange();\n\t        return true;\n\t    }\n\t\n\t    return false;\n\t}\n\t\n\tfunction editBubble(nodeBubble) {\n\t    if (this.contains(nodeBubble)) {\n\t        return bubble.edit(this, nodeBubble);\n\t    }\n\t\n\t    return false;\n\t}\n\t\n\tfunction inputValue() {\n\t    var textRange = text.currentTextRange(this);\n\t    return textRange && text.textClean(textRange.toString()) || '';\n\t}\n\t\n\tfunction bubbling() {\n\t    bubble.bubbling(this);\n\t}\n\t\n\t/**\n\t * Генерация события редактирования бабла.\n\t * Выполняется в контексте узла-обертки.\n\t * @alias module:x-bubbles/editor.fireEdit\n\t * @param {HTMLElement} nodeBubble нода бабл\n\t * @this HTMLElement\n\t * @private\n\t */\n\tfunction fireEdit(nodeBubble) {\n\t    events.dispatch(this, EV.BUBBLE_EDIT, {\n\t        bubbles: false,\n\t        cancelable: false,\n\t        detail: { data: nodeBubble }\n\t    });\n\t}\n\t\n\t/**\n\t * Генерация события изменения набора баблов.\n\t * Выполняется в контексте узла-обертки.\n\t * @alias module:x-bubbles/editor.fireChange\n\t * @this HTMLElement\n\t * @private\n\t */\n\tfunction fireChange() {\n\t    events.dispatch(this, EV.CHANGE, {\n\t        bubbles: false,\n\t        cancelable: false\n\t    });\n\t}\n\t\n\t/**\n\t * Генерация события ввода текста.\n\t * Выполняется в контексте узла-обертки.\n\t * @alias module:x-bubbles/editor.fireInput\n\t * @this HTMLElement\n\t * @private\n\t */\n\tfunction fireInput() {\n\t    var editText = inputValue.call(this);\n\t\n\t    if (this[PROPS.BUBBLE_VALUE] !== editText) {\n\t        this[PROPS.BUBBLE_VALUE] = editText;\n\t\n\t        events.dispatch(this, EV.BUBBLE_INPUT, {\n\t            bubbles: false,\n\t            cancelable: false,\n\t            detail: { data: editText }\n\t        });\n\t    }\n\t}\n\t\n\t/**\n\t * Генерация события удаления баблов перед выполнением удаления из DOM.\n\t * Выполняется в контексте узла-обертки.\n\t * @alias module:x-bubbles/editor.fireRemove\n\t * @param {array} list список удаляемых узлов\n\t * @this HTMLElement\n\t * @private\n\t */\n\tfunction fireBeforeRemove(list) {\n\t    events.dispatch(this, EV.BEFORE_REMOVE, {\n\t        bubbles: false,\n\t        cancelable: false,\n\t        detail: { data: list }\n\t    });\n\t}\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar bubble = __webpack_require__(4);\n\tvar text = __webpack_require__(5);\n\t\n\texports.closestNodeBubble = closestNodeBubble;\n\texports.closestNodeSet = closestNodeSet;\n\texports.findBubbleLeft = findBubbleLeft;\n\texports.findBubbleRight = findBubbleRight;\n\texports.getBubbles = getBubbles;\n\texports.bubblesCount = bubblesCount;\n\texports.hasBubbles = hasBubbles;\n\texports.headBubble = headBubble;\n\texports.lastBubble = lastBubble;\n\texports.nextBubble = nextBubble;\n\texports.prevBubble = prevBubble;\n\texports.removeBubbles = removeBubbles;\n\texports.moveBubbles = moveBubbles;\n\texports.canAddBubble = canAddBubble;\n\texports.getRemainingCapacity = getRemainingCapacity;\n\t\n\tfunction lastBubble(nodeSet) {\n\t    return nodeSet.querySelector('[bubble]:last-child');\n\t}\n\t\n\tfunction headBubble(nodeSet) {\n\t    return nodeSet.querySelector('[bubble]:first-child');\n\t}\n\t\n\tfunction getBubbles(nodeSet) {\n\t    return Array.prototype.slice.call(nodeSet.querySelectorAll('[bubble]'));\n\t}\n\t\n\tfunction bubblesCount(nodeSet) {\n\t    var bubbles = getBubbles(nodeSet);\n\t    return bubbles.length;\n\t}\n\t\n\tfunction hasBubbles(nodeSet) {\n\t    return Boolean(nodeSet.querySelector('[bubble]'));\n\t}\n\t\n\tfunction findBubbleLeft(selection) {\n\t    if (!selection.focusNode || !selection.anchorNode) {\n\t        return;\n\t    }\n\t\n\t    var node = selection.focusNode.previousSibling;\n\t\n\t    if (selection.anchorNode !== selection.focusNode && selection.anchorNode.compareDocumentPosition(selection.focusNode) & Node.DOCUMENT_POSITION_FOLLOWING) {\n\t        node = selection.anchorNode.previousSibling;\n\t    }\n\t\n\t    while (node) {\n\t        if (bubble.isBubbleNode(node)) {\n\t            return node;\n\t        }\n\t\n\t        if (node.nodeType === Node.TEXT_NODE && text.textClean(node.nodeValue)) {\n\t            return;\n\t        }\n\t\n\t        node = node.previousSibling;\n\t    }\n\t}\n\t\n\tfunction findBubbleRight(selection) {\n\t    if (!selection.focusNode || !selection.anchorNode) {\n\t        return;\n\t    }\n\t\n\t    var node = selection.focusNode.nextSibling;\n\t\n\t    if (selection.anchorNode !== selection.focusNode && selection.anchorNode.compareDocumentPosition(selection.focusNode) & Node.DOCUMENT_POSITION_FOLLOWING) {\n\t        node = selection.anchorNode.nextSibling;\n\t    }\n\t\n\t    while (node) {\n\t        if (bubble.isBubbleNode(node)) {\n\t            return node;\n\t        }\n\t\n\t        if (node.nodeType === Node.TEXT_NODE && text.textClean(node.nodeValue)) {\n\t            return;\n\t        }\n\t\n\t        node = node.nextSibling;\n\t    }\n\t}\n\t\n\tfunction closestNodeSet(node) {\n\t    while (node) {\n\t        if (isEditorNode(node)) {\n\t            return node;\n\t        }\n\t\n\t        node = node.parentNode;\n\t    }\n\t}\n\t\n\tfunction closestNodeBubble(node) {\n\t    while (node) {\n\t        if (bubble.isBubbleNode(node)) {\n\t            return node;\n\t        }\n\t\n\t        if (isEditorNode(node)) {\n\t            return;\n\t        }\n\t\n\t        node = node.parentNode;\n\t    }\n\t}\n\t\n\tfunction prevBubble(target) {\n\t    var node = target && target.previousSibling;\n\t    while (node) {\n\t        if (bubble.isBubbleNode(node)) {\n\t            return node;\n\t        }\n\t\n\t        node = node.previousSibling;\n\t    }\n\t}\n\t\n\tfunction nextBubble(target) {\n\t    var node = target && target.nextSibling;\n\t    while (node) {\n\t        if (bubble.isBubbleNode(node)) {\n\t            return node;\n\t        }\n\t\n\t        node = node.nextSibling;\n\t    }\n\t}\n\t\n\tfunction isEditorNode(node) {\n\t    return node.nodeType === Node.ELEMENT_NODE && node.getAttribute('is') === 'x-bubbles';\n\t}\n\t\n\tfunction removeBubbles(nodeEditor, list) {\n\t    nodeEditor.fireBeforeRemove(list);\n\t    list.forEach(function (item) {\n\t        return nodeEditor.removeChild(item);\n\t    });\n\t}\n\t\n\tfunction moveBubbles(nodeEditorFrom, nodeEditorTo, list) {\n\t    var remainingCapacity = getRemainingCapacity(nodeEditorTo);\n\t\n\t    if (remainingCapacity <= 0) {\n\t        return;\n\t    }\n\t\n\t    var movedBubbles = list.slice(0, remainingCapacity);\n\t\n\t    nodeEditorFrom.fireBeforeRemove(movedBubbles);\n\t    movedBubbles.forEach(function (item) {\n\t        return nodeEditorTo.appendChild(item);\n\t    });\n\t}\n\t\n\tfunction canAddBubble(nodeEditor) {\n\t    var bubblesLimit = nodeEditor.options('limit');\n\t\n\t    return !bubblesLimit || bubblesCount(nodeEditor) < bubblesLimit;\n\t}\n\t\n\tfunction getRemainingCapacity(nodeEditor) {\n\t    var bubblesLimit = nodeEditor.options('limit');\n\t\n\t    if (!bubblesLimit) {\n\t        return Number.POSITIVE_INFINITY;\n\t    }\n\t\n\t    return bubblesLimit - bubblesCount(nodeEditor);\n\t}\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar context = __webpack_require__(1);\n\tvar text = __webpack_require__(5);\n\tvar bubbleset = __webpack_require__(3);\n\t\n\tvar _require = __webpack_require__(6),\n\t    escape = _require.escape,\n\t    canUseDrag = _require.canUseDrag;\n\t\n\texports.isBubbleNode = isBubbleNode;\n\texports.bubbling = bubbling;\n\texports.create = create;\n\texports.edit = edit;\n\t\n\tfunction isBubbleNode(node) {\n\t    if (!node || node.nodeType !== Node.ELEMENT_NODE) {\n\t        return false;\n\t    }\n\t\n\t    return node.hasAttribute('bubble');\n\t}\n\t\n\tfunction edit(nodeSet, nodeBubble) {\n\t    if (nodeBubble.hasAttribute('readonly')) {\n\t        return false;\n\t    }\n\t\n\t    var selection = context.getSelection();\n\t\n\t    if (!selection) {\n\t        return false;\n\t    }\n\t\n\t    var bubbleDeformation = nodeSet.options('bubbleDeformation');\n\t    var rangeParams = bubbleDeformation(nodeBubble);\n\t\n\t    if (!rangeParams) {\n\t        var dataText = text.textClean(nodeBubble.innerText);\n\t\n\t        rangeParams = {\n\t            text: dataText,\n\t            startOffset: 0,\n\t            endOffset: dataText.length\n\t        };\n\t    }\n\t\n\t    var textFake = text.createZws();\n\t    var textNode = context.document.createTextNode(rangeParams.text);\n\t\n\t    nodeSet.fireEdit(nodeBubble);\n\t    nodeSet.replaceChild(textNode, nodeBubble);\n\t    nodeSet.insertBefore(textFake, textNode);\n\t\n\t    var range = context.document.createRange();\n\t    range.setStart(textNode, rangeParams.startOffset);\n\t    range.setEnd(textNode, rangeParams.endOffset);\n\t\n\t    selection.removeAllRanges();\n\t    selection.addRange(range);\n\t    return true;\n\t}\n\t\n\t/**\n\t * У обертки нельзя делать tabindex=-1, иначе будет слетать фокус с поля ввода.\n\t * @param {HTMLElement} nodeEditor\n\t * @param {string} dataText\n\t * @param {Object} [dataAttributes={}]\n\t * @returns {?HTMLElement}\n\t */\n\tfunction create(nodeEditor, dataText) {\n\t    var dataAttributes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t    dataText = text.textClean(dataText);\n\t\n\t    if (!dataText) {\n\t        return;\n\t    }\n\t\n\t    var bubbleFormation = nodeEditor.options('bubbleFormation');\n\t    var classBubble = nodeEditor.options('classBubble');\n\t    var draggable = canUseDrag && nodeEditor.options('draggable') && nodeEditor.options('selection');\n\t    var wrap = nodeEditor.ownerDocument.createElement('span');\n\t\n\t    wrap.innerText = dataText;\n\t\n\t    for (var key in dataAttributes) {\n\t        if (dataAttributes[key]) {\n\t            wrap.setAttribute('data-' + key, escape(dataAttributes[key]));\n\t        }\n\t    }\n\t\n\t    bubbleFormation(wrap);\n\t\n\t    if (classBubble) {\n\t        var classes = String(classBubble).trim().split(/\\s+/);\n\t        var len = classes.length;\n\t\n\t        while (len--) {\n\t            wrap.classList.add(classes[len]);\n\t        }\n\t    }\n\t\n\t    wrap.setAttribute('bubble', '');\n\t    wrap.setAttribute('contenteditable', 'false');\n\t    draggable && wrap.setAttribute('draggable', 'true');\n\t\n\t    return wrap;\n\t}\n\t\n\tfunction bubbling(nodeSet) {\n\t    var begining = nodeSet.options('begining');\n\t    var ending = nodeSet.options('ending');\n\t    var separator = nodeSet.options('separator');\n\t    var tokenizer = nodeSet.options('tokenizer');\n\t    var ranges = getBubbleRanges(nodeSet);\n\t    var nodes = [];\n\t\n\t    var remainingCapacity = bubbleset.getRemainingCapacity(nodeSet);\n\t\n\t    ranges.forEach(function (range) {\n\t        var dataText = text.textClean(range.toString());\n\t\n\t        if (!dataText) {\n\t            range.deleteContents();\n\t            return;\n\t        }\n\t\n\t        var textParts = [dataText];\n\t\n\t        if (tokenizer) {\n\t            textParts = tokenizer(dataText);\n\t        } else {\n\t            if (separator) {\n\t                textParts = dataText.split(separator).map(trimIterator).filter(nonEmptyIterator);\n\t            }\n\t\n\t            if (ending) {\n\t                textParts = textParts.reduce(function (parts, str) {\n\t                    return parts.concat(parseFragmentByEnding(str, ending));\n\t                }, []).map(trimIterator).filter(nonEmptyIterator);\n\t            } else if (begining) {\n\t                textParts = textParts.reduce(function (parts, str) {\n\t                    return parts.concat(parseFragmentByBeginning(str, begining));\n\t                }, []).map(trimIterator).filter(nonEmptyIterator);\n\t            }\n\t        }\n\t\n\t        if (!Array.isArray(textParts) || !textParts.length) {\n\t            range.deleteContents();\n\t            return;\n\t        }\n\t\n\t        var fragment = context.document.createDocumentFragment();\n\t\n\t        textParts.forEach(function (textPart) {\n\t            if (nodes.length >= remainingCapacity) {\n\t                return;\n\t            }\n\t\n\t            var nodeBubble = create(nodeSet, textPart);\n\t            if (nodeBubble) {\n\t                fragment.appendChild(nodeBubble);\n\t                nodes.push(nodeBubble);\n\t            }\n\t        });\n\t\n\t        range.deleteContents();\n\t        range.insertNode(fragment);\n\t    });\n\t\n\t    nodeSet.fireInput();\n\t\n\t    if (nodes.length) {\n\t        nodeSet.fireChange();\n\t    }\n\t\n\t    return nodes;\n\t}\n\t\n\tfunction getBubbleRanges(nodeSet) {\n\t    var ranges = [];\n\t    var children = nodeSet.childNodes;\n\t    var range = void 0;\n\t    var node = void 0;\n\t\n\t    for (var i = 0; i < children.length; i++) {\n\t        node = children[i];\n\t\n\t        if (isBubbleNode(node)) {\n\t            if (range) {\n\t                range.setEndBefore(node);\n\t                ranges.push(range);\n\t                range = undefined;\n\t            }\n\t        } else {\n\t            if (!range) {\n\t                range = context.document.createRange();\n\t                range.setStartBefore(node);\n\t            }\n\t        }\n\t    }\n\t\n\t    if (range) {\n\t        range.setEndAfter(node);\n\t        ranges.push(range);\n\t    }\n\t\n\t    return ranges;\n\t}\n\t\n\tfunction trimIterator(str) {\n\t    return str.trim();\n\t}\n\t\n\tfunction nonEmptyIterator(str) {\n\t    return Boolean(str);\n\t}\n\t\n\tfunction parseFragmentByEnding(str, reg) {\n\t    var parts = [];\n\t    var lastIndex = 0;\n\t    var loop = 999;\n\t\n\t    reg.lastIndex = 0;\n\t    while (reg.exec(str) !== null && loop) {\n\t        loop--;\n\t        parts.push(str.substring(lastIndex, reg.lastIndex));\n\t        lastIndex = reg.lastIndex;\n\t    }\n\t\n\t    return parts;\n\t}\n\t\n\tfunction parseFragmentByBeginning(str, reg) {\n\t    var parts = [];\n\t    var res = void 0;\n\t    var index = 0;\n\t    var loop = 999;\n\t\n\t    reg.lastIndex = 0;\n\t    while ((res = reg.exec(str)) !== null && loop) {\n\t        loop--;\n\t        if (index !== res.index) {\n\t            parts.push(str.substring(index, res.index));\n\t            index = res.index;\n\t        }\n\t    }\n\t\n\t    parts.push(str.substring(index, str.length));\n\t    return parts;\n\t}\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar context = __webpack_require__(1);\n\tvar bubbleset = __webpack_require__(3);\n\t\n\tvar _require = __webpack_require__(6),\n\t    getSelection = _require.getSelection,\n\t    correctSelection = _require.correctSelection;\n\t\n\t/* eslint-disable max-len */\n\t\n\t\n\tvar REG_REPLACE_NON_PRINTABLE = /[\\0-\\x1F\\x7F-\\x9F\\xAD\\u0378\\u0379\\u037F-\\u0383\\u038B\\u038D\\u03A2\\u0528-\\u0530\\u0557\\u0558\\u0560\\u0588\\u058B-\\u058E\\u0590\\u05C8-\\u05CF\\u05EB-\\u05EF\\u05F5-\\u0605\\u061C\\u061D\\u06DD\\u070E\\u070F\\u074B\\u074C\\u07B2-\\u07BF\\u07FB-\\u07FF\\u082E\\u082F\\u083F\\u085C\\u085D\\u085F-\\u089F\\u08A1\\u08AD-\\u08E3\\u08FF\\u0978\\u0980\\u0984\\u098D\\u098E\\u0991\\u0992\\u09A9\\u09B1\\u09B3-\\u09B5\\u09BA\\u09BB\\u09C5\\u09C6\\u09C9\\u09CA\\u09CF-\\u09D6\\u09D8-\\u09DB\\u09DE\\u09E4\\u09E5\\u09FC-\\u0A00\\u0A04\\u0A0B-\\u0A0E\\u0A11\\u0A12\\u0A29\\u0A31\\u0A34\\u0A37\\u0A3A\\u0A3B\\u0A3D\\u0A43-\\u0A46\\u0A49\\u0A4A\\u0A4E-\\u0A50\\u0A52-\\u0A58\\u0A5D\\u0A5F-\\u0A65\\u0A76-\\u0A80\\u0A84\\u0A8E\\u0A92\\u0AA9\\u0AB1\\u0AB4\\u0ABA\\u0ABB\\u0AC6\\u0ACA\\u0ACE\\u0ACF\\u0AD1-\\u0ADF\\u0AE4\\u0AE5\\u0AF2-\\u0B00\\u0B04\\u0B0D\\u0B0E\\u0B11\\u0B12\\u0B29\\u0B31\\u0B34\\u0B3A\\u0B3B\\u0B45\\u0B46\\u0B49\\u0B4A\\u0B4E-\\u0B55\\u0B58-\\u0B5B\\u0B5E\\u0B64\\u0B65\\u0B78-\\u0B81\\u0B84\\u0B8B-\\u0B8D\\u0B91\\u0B96-\\u0B98\\u0B9B\\u0B9D\\u0BA0-\\u0BA2\\u0BA5-\\u0BA7\\u0BAB-\\u0BAD\\u0BBA-\\u0BBD\\u0BC3-\\u0BC5\\u0BC9\\u0BCE\\u0BCF\\u0BD1-\\u0BD6\\u0BD8-\\u0BE5\\u0BFB-\\u0C00\\u0C04\\u0C0D\\u0C11\\u0C29\\u0C34\\u0C3A-\\u0C3C\\u0C45\\u0C49\\u0C4E-\\u0C54\\u0C57\\u0C5A-\\u0C5F\\u0C64\\u0C65\\u0C70-\\u0C77\\u0C80\\u0C81\\u0C84\\u0C8D\\u0C91\\u0CA9\\u0CB4\\u0CBA\\u0CBB\\u0CC5\\u0CC9\\u0CCE-\\u0CD4\\u0CD7-\\u0CDD\\u0CDF\\u0CE4\\u0CE5\\u0CF0\\u0CF3-\\u0D01\\u0D04\\u0D0D\\u0D11\\u0D3B\\u0D3C\\u0D45\\u0D49\\u0D4F-\\u0D56\\u0D58-\\u0D5F\\u0D64\\u0D65\\u0D76-\\u0D78\\u0D80\\u0D81\\u0D84\\u0D97-\\u0D99\\u0DB2\\u0DBC\\u0DBE\\u0DBF\\u0DC7-\\u0DC9\\u0DCB-\\u0DCE\\u0DD5\\u0DD7\\u0DE0-\\u0DF1\\u0DF5-\\u0E00\\u0E3B-\\u0E3E\\u0E5C-\\u0E80\\u0E83\\u0E85\\u0E86\\u0E89\\u0E8B\\u0E8C\\u0E8E-\\u0E93\\u0E98\\u0EA0\\u0EA4\\u0EA6\\u0EA8\\u0EA9\\u0EAC\\u0EBA\\u0EBE\\u0EBF\\u0EC5\\u0EC7\\u0ECE\\u0ECF\\u0EDA\\u0EDB\\u0EE0-\\u0EFF\\u0F48\\u0F6D-\\u0F70\\u0F98\\u0FBD\\u0FCD\\u0FDB-\\u0FFF\\u10C6\\u10C8-\\u10CC\\u10CE\\u10CF\\u1249\\u124E\\u124F\\u1257\\u1259\\u125E\\u125F\\u1289\\u128E\\u128F\\u12B1\\u12B6\\u12B7\\u12BF\\u12C1\\u12C6\\u12C7\\u12D7\\u1311\\u1316\\u1317\\u135B\\u135C\\u137D-\\u137F\\u139A-\\u139F\\u13F5-\\u13FF\\u169D-\\u169F\\u16F1-\\u16FF\\u170D\\u1715-\\u171F\\u1737-\\u173F\\u1754-\\u175F\\u176D\\u1771\\u1774-\\u177F\\u17DE\\u17DF\\u17EA-\\u17EF\\u17FA-\\u17FF\\u180F\\u181A-\\u181F\\u1878-\\u187F\\u18AB-\\u18AF\\u18F6-\\u18FF\\u191D-\\u191F\\u192C-\\u192F\\u193C-\\u193F\\u1941-\\u1943\\u196E\\u196F\\u1975-\\u197F\\u19AC-\\u19AF\\u19CA-\\u19CF\\u19DB-\\u19DD\\u1A1C\\u1A1D\\u1A5F\\u1A7D\\u1A7E\\u1A8A-\\u1A8F\\u1A9A-\\u1A9F\\u1AAE-\\u1AFF\\u1B4C-\\u1B4F\\u1B7D-\\u1B7F\\u1BF4-\\u1BFB\\u1C38-\\u1C3A\\u1C4A-\\u1C4C\\u1C80-\\u1CBF\\u1CC8-\\u1CCF\\u1CF7-\\u1CFF\\u1DE7-\\u1DFB\\u1F16\\u1F17\\u1F1E\\u1F1F\\u1F46\\u1F47\\u1F4E\\u1F4F\\u1F58\\u1F5A\\u1F5C\\u1F5E\\u1F7E\\u1F7F\\u1FB5\\u1FC5\\u1FD4\\u1FD5\\u1FDC\\u1FF0\\u1FF1\\u1FF5\\u1FFF\\u200B-\\u200F\\u202A-\\u202E\\u2060-\\u206F\\u2072\\u2073\\u208F\\u209D-\\u209F\\u20BB-\\u20CF\\u20F1-\\u20FF\\u218A-\\u218F\\u23F4-\\u23FF\\u2427-\\u243F\\u244B-\\u245F\\u2700\\u2B4D-\\u2B4F\\u2B5A-\\u2BFF\\u2C2F\\u2C5F\\u2CF4-\\u2CF8\\u2D26\\u2D28-\\u2D2C\\u2D2E\\u2D2F\\u2D68-\\u2D6E\\u2D71-\\u2D7E\\u2D97-\\u2D9F\\u2DA7\\u2DAF\\u2DB7\\u2DBF\\u2DC7\\u2DCF\\u2DD7\\u2DDF\\u2E3C-\\u2E7F\\u2E9A\\u2EF4-\\u2EFF\\u2FD6-\\u2FEF\\u2FFC-\\u2FFF\\u3040\\u3097\\u3098\\u3100-\\u3104\\u312E-\\u3130\\u318F\\u31BB-\\u31BF\\u31E4-\\u31EF\\u321F\\u32FF\\u4DB6-\\u4DBF\\u9FCD-\\u9FFF\\uA48D-\\uA48F\\uA4C7-\\uA4CF\\uA62C-\\uA63F\\uA698-\\uA69E\\uA6F8-\\uA6FF\\uA78F\\uA794-\\uA79F\\uA7AB-\\uA7F7\\uA82C-\\uA82F\\uA83A-\\uA83F\\uA878-\\uA87F\\uA8C5-\\uA8CD\\uA8DA-\\uA8DF\\uA8FC-\\uA8FF\\uA954-\\uA95E\\uA97D-\\uA97F\\uA9CE\\uA9DA-\\uA9DD\\uA9E0-\\uA9FF\\uAA37-\\uAA3F\\uAA4E\\uAA4F\\uAA5A\\uAA5B\\uAA7C-\\uAA7F\\uAAC3-\\uAADA\\uAAF7-\\uAB00\\uAB07\\uAB08\\uAB0F\\uAB10\\uAB17-\\uAB1F\\uAB27\\uAB2F-\\uABBF\\uABEE\\uABEF\\uABFA-\\uABFF\\uD7A4-\\uD7AF\\uD7C7-\\uD7CA\\uD7FC-\\uF8FF\\uFA6E\\uFA6F\\uFADA-\\uFAFF\\uFB07-\\uFB12\\uFB18-\\uFB1C\\uFB37\\uFB3D\\uFB3F\\uFB42\\uFB45\\uFBC2-\\uFBD2\\uFD40-\\uFD4F\\uFD90\\uFD91\\uFDC8-\\uFDEF\\uFDFE\\uFDFF\\uFE1A-\\uFE1F\\uFE27-\\uFE2F\\uFE53\\uFE67\\uFE6C-\\uFE6F\\uFE75\\uFEFD-\\uFF00\\uFFBF-\\uFFC1\\uFFC8\\uFFC9\\uFFD0\\uFFD1\\uFFD8\\uFFD9\\uFFDD-\\uFFDF\\uFFE7\\uFFEF-\\uFFFB\\uFFFE\\uFFFF]/g;\n\tvar REG_ZWS = /\\u200B/;\n\tvar TEXT_ZWS = '\\u200B';\n\t\n\texports.isEmptyLeft = isEmptyLeft;\n\texports.isEmptyRight = isEmptyRight;\n\texports.arrowRight = arrowRight;\n\texports.arrowLeft = arrowLeft;\n\texports.remove = remove;\n\texports.html2text = html2text;\n\texports.currentTextRange = currentTextRange;\n\texports.text2bubble = text2bubble;\n\texports.replaceString = replaceString;\n\texports.findTextBorderNode = findTextBorderNode;\n\texports.selectFromCursorToStrBegin = selectFromCursorToStrBegin;\n\texports.selectAll = selectAll;\n\texports.textClean = textClean;\n\texports.checkZws = checkZws;\n\texports.createZws = createZws;\n\texports.hasNear = hasNear;\n\t\n\tfunction isEmptyLeft(selection) {\n\t    var _correctSelection = correctSelection(selection),\n\t        startNode = _correctSelection.startNode,\n\t        startOffset = _correctSelection.startOffset;\n\t\n\t    var isEmpty = true;\n\t    var node = startNode;\n\t\n\t    while (node) {\n\t        if (node.nodeType === Node.TEXT_NODE) {\n\t            var value = startOffset > 0 ? node.nodeValue.substring(0, startOffset) : node.nodeValue;\n\t\n\t            if (textClean(value)) {\n\t                isEmpty = false;\n\t                break;\n\t            }\n\t        } else {\n\t            break;\n\t        }\n\t\n\t        startOffset = 0;\n\t        node = node.previousSibling;\n\t    }\n\t\n\t    return isEmpty;\n\t}\n\t\n\tfunction isEmptyRight(selection) {\n\t    var _correctSelection2 = correctSelection(selection),\n\t        endNode = _correctSelection2.endNode,\n\t        endOffset = _correctSelection2.endOffset;\n\t\n\t    var node = endNode;\n\t\n\t    while (node) {\n\t        if (node.nodeType === Node.TEXT_NODE) {\n\t            var value = endOffset > -1 && endOffset < node.nodeValue.length ? node.nodeValue.substring(endOffset) : node.nodeValue;\n\t\n\t            if (textClean(value)) {\n\t                return false;\n\t            }\n\t        } else {\n\t            return false;\n\t        }\n\t\n\t        endOffset = -1;\n\t        node = node.nextSibling;\n\t    }\n\t\n\t    return true;\n\t}\n\t\n\tfunction text2bubble(nodeEditor, nodeBubble) {\n\t    var selection = getSelection(nodeEditor);\n\t    var range = selection && currentTextRange(nodeEditor, selection);\n\t\n\t    if (range) {\n\t        selection.removeAllRanges();\n\t        selection.addRange(range);\n\t        replace(selection, nodeBubble);\n\t    } else {\n\t        nodeEditor.appendChild(nodeBubble);\n\t    }\n\t\n\t    return true;\n\t}\n\t\n\tfunction currentTextRange(nodeEditor, selection) {\n\t    selection = selection || getSelection(nodeEditor);\n\t    if (!selection) {\n\t        return;\n\t    }\n\t\n\t    var pointNode = selection.focusNode && selection.focusNode.nodeType === Node.TEXT_NODE ? selection.focusNode : selection.anchorNode && selection.anchorNode.nodeType === Node.TEXT_NODE ? selection.anchorNode : undefined;\n\t\n\t    if (!pointNode) {\n\t        return;\n\t    }\n\t\n\t    var startNode = pointNode;\n\t    var endNode = pointNode;\n\t    var item = pointNode;\n\t\n\t    while (item && item.nodeType === Node.TEXT_NODE) {\n\t        startNode = item;\n\t        item = item.previousSibling;\n\t    }\n\t\n\t    item = pointNode;\n\t\n\t    while (item && item.nodeType === Node.TEXT_NODE) {\n\t        endNode = item;\n\t        item = item.nextSibling;\n\t    }\n\t\n\t    var range = nodeEditor.ownerDocument.createRange();\n\t    range.setStartBefore(startNode);\n\t    range.setEndAfter(endNode);\n\t\n\t    return range;\n\t}\n\t\n\tfunction remove(selection) {\n\t    return replace(selection, createZws());\n\t}\n\t\n\tfunction replace(selection, node) {\n\t    if (!selection || !selection.rangeCount) {\n\t        return false;\n\t    }\n\t\n\t    var anchor = context.document.createElement('span');\n\t    selection.getRangeAt(0).surroundContents(anchor);\n\t    anchor.parentNode.replaceChild(node, anchor);\n\t\n\t    selection.removeAllRanges();\n\t\n\t    if (node.nodeType === Node.TEXT_NODE) {\n\t        var range = context.document.createRange();\n\t        // для ИЕ обязательно указывать node.nodeValue.length\n\t        range.setStart(node, node.nodeValue.length);\n\t        range.collapse(false);\n\t        selection.addRange(range);\n\t    } else {\n\t        selection.collapse(node, 0);\n\t    }\n\t\n\t    return true;\n\t}\n\t\n\tfunction replaceString(data, selection) {\n\t    data = textClean(data);\n\t    if (!data) {\n\t        return false;\n\t    }\n\t\n\t    selection = selection || context.getSelection();\n\t    var textNode = context.document.createTextNode(data);\n\t\n\t    if (!replace(selection, textNode)) {\n\t        return false;\n\t    }\n\t\n\t    selection.collapse(textNode, textNode.nodeValue.length);\n\t    return true;\n\t}\n\t\n\tfunction arrowLeft(selection, extend) {\n\t    selection = selection || context.getSelection();\n\t\n\t    if (!selection || !selection.anchorNode || selection.anchorNode.nodeType !== Node.TEXT_NODE) {\n\t\n\t        return false;\n\t    }\n\t\n\t    var _correctSelection3 = correctSelection(selection),\n\t        startNode = _correctSelection3.startNode,\n\t        endNode = _correctSelection3.endNode,\n\t        startOffset = _correctSelection3.startOffset,\n\t        endOffset = _correctSelection3.endOffset,\n\t        revert = _correctSelection3.revert;\n\t\n\t    if (!selection.isCollapsed && !extend) {\n\t        selection.collapse(startNode, startOffset);\n\t        return true;\n\t    }\n\t\n\t    var isNativeExtend = Boolean(selection.extend);\n\t    revert = isNativeExtend ? revert : !revert;\n\t    var node = revert ? startNode : endNode;\n\t    var offset = revert ? startOffset : endOffset;\n\t\n\t    while (node) {\n\t        if (node.nodeType !== Node.TEXT_NODE) {\n\t            return false;\n\t        }\n\t\n\t        if (offset === null) {\n\t            offset = node.nodeValue.length;\n\t        }\n\t\n\t        if (offset - 1 < 0) {\n\t            node = node.previousSibling;\n\t            offset = null;\n\t            continue;\n\t        }\n\t\n\t        var text = node.nodeValue.substring(offset - 1, offset);\n\t\n\t        if (checkZws(text)) {\n\t            offset = offset - 1;\n\t            continue;\n\t        }\n\t\n\t        break;\n\t    }\n\t\n\t    if (!node || offset === null) {\n\t        return false;\n\t    }\n\t\n\t    if (extend) {\n\t        if (isNativeExtend) {\n\t            selection.extend(node, offset - 1);\n\t        } else {\n\t            var range = context.document.createRange();\n\t\n\t            if (revert) {\n\t                range.setStart(node, offset - 1);\n\t                range.setEnd(endNode, endOffset);\n\t            } else {\n\t                range.setStart(startNode, startOffset);\n\t                range.setEnd(node, offset - 1);\n\t            }\n\t\n\t            selection.removeAllRanges();\n\t            selection.addRange(range);\n\t        }\n\t    } else {\n\t        selection.collapse(node, offset - 1);\n\t    }\n\t\n\t    return true;\n\t}\n\t\n\tfunction arrowRight(selection, extend) {\n\t    selection = selection || context.getSelection();\n\t\n\t    if (!selection || !selection.focusNode || selection.focusNode.nodeType !== Node.TEXT_NODE) {\n\t\n\t        return false;\n\t    }\n\t\n\t    var _correctSelection4 = correctSelection(selection),\n\t        startNode = _correctSelection4.startNode,\n\t        endNode = _correctSelection4.endNode,\n\t        startOffset = _correctSelection4.startOffset,\n\t        endOffset = _correctSelection4.endOffset,\n\t        revert = _correctSelection4.revert;\n\t\n\t    if (!selection.isCollapsed && !extend) {\n\t        selection.collapse(endNode, endOffset);\n\t        return true;\n\t    }\n\t\n\t    var node = revert ? startNode : endNode;\n\t    var offset = revert ? startOffset : endOffset;\n\t\n\t    while (node) {\n\t        if (node.nodeType !== Node.TEXT_NODE) {\n\t            return false;\n\t        }\n\t\n\t        var len = node.nodeValue.length;\n\t\n\t        if (offset + 1 > len) {\n\t            node = node.nextSibling;\n\t            offset = 0;\n\t            continue;\n\t        }\n\t\n\t        var text = node.nodeValue.substring(offset, offset + 1);\n\t\n\t        if (checkZws(text)) {\n\t            offset = offset + 1;\n\t            continue;\n\t        }\n\t\n\t        break;\n\t    }\n\t\n\t    if (!node) {\n\t        return false;\n\t    }\n\t\n\t    if (extend) {\n\t        var isNativeExtend = Boolean(selection.extend);\n\t\n\t        if (isNativeExtend) {\n\t            selection.extend(node, offset + 1);\n\t        } else {\n\t            var range = context.document.createRange();\n\t\n\t            if (revert) {\n\t                range.setStart(node, offset + 1);\n\t                range.setEnd(endNode, endOffset);\n\t            } else {\n\t                range.setStart(startNode, startOffset);\n\t                range.setEnd(node, offset + 1);\n\t            }\n\t\n\t            selection.removeAllRanges();\n\t            selection.addRange(range);\n\t        }\n\t    } else {\n\t        selection.collapse(node, offset + 1);\n\t    }\n\t\n\t    return true;\n\t}\n\t\n\tfunction html2text(value) {\n\t    if (!value) {\n\t        return '';\n\t    }\n\t\n\t    var DOMContainer = context.document.implementation.createHTMLDocument('').body;\n\t    DOMContainer.innerText = value;\n\t\n\t    return DOMContainer.innerText.replace(/^[\\u0020\\u00a0]+$/gm, '').replace(/\\n/gm, ' ').trim();\n\t}\n\t\n\tfunction findTextBorderNode(cursorNode, mode) {\n\t    var item = cursorNode;\n\t    var result = null;\n\t    var sibling = mode === 'begin' ? 'previousSibling' : 'nextSibling';\n\t\n\t    while (item && item.nodeType === Node.TEXT_NODE) {\n\t        result = item;\n\t        item = item[sibling];\n\t    }\n\t\n\t    return result;\n\t}\n\t\n\tfunction setTextSelection(selection, from, to, nodeSet) {\n\t    var hasBubbles = bubbleset.hasBubbles(nodeSet);\n\t    var range = context.document.createRange();\n\t    range.setStart(from.node, from.offset);\n\t    range.setEnd(to.node, to.offset);\n\t\n\t    var dataText = textClean(range.toString());\n\t\n\t    if (dataText || !dataText && !hasBubbles) {\n\t        if (!dataText) {\n\t            range.collapse();\n\t        }\n\t\n\t        selection.removeAllRanges();\n\t        selection.addRange(range);\n\t        return true;\n\t    }\n\t\n\t    return false;\n\t}\n\t\n\tfunction selectFromCursorToStrBegin(selection, nodeSet) {\n\t    selection = selection || context.getSelection();\n\t    var node = selection && selection.anchorNode;\n\t\n\t    if (!node || node.nodeType !== Node.TEXT_NODE) {\n\t        return false;\n\t    }\n\t\n\t    var cursorPosition = selection.anchorOffset;\n\t\n\t    var fromNode = findTextBorderNode(node, 'begin');\n\t\n\t    return setTextSelection(selection, { node: fromNode, offset: 0 }, { node: node, offset: cursorPosition }, nodeSet);\n\t}\n\t\n\tfunction selectAll(selection, nodeSet) {\n\t    selection = selection || context.getSelection();\n\t    var node = selection && selection.anchorNode;\n\t\n\t    if (!node || node.nodeType !== Node.TEXT_NODE) {\n\t        return false;\n\t    }\n\t\n\t    var fromNode = findTextBorderNode(node, 'begin');\n\t    var toNode = findTextBorderNode(node, 'end');\n\t\n\t    return setTextSelection(selection, { node: fromNode, offset: 0 }, { node: toNode, offset: toNode.nodeValue ? toNode.nodeValue.length : 0 }, nodeSet);\n\t}\n\t\n\tfunction hasNear(selection) {\n\t    selection = selection || context.getSelection();\n\t    var node = selection && selection.anchorNode;\n\t\n\t    if (!node || node.nodeType !== Node.TEXT_NODE) {\n\t        return false;\n\t    }\n\t\n\t    var fromNode = findTextBorderNode(node, 'begin');\n\t    var toNode = findTextBorderNode(node, 'end');\n\t\n\t    var range = context.document.createRange();\n\t\n\t    range.setStart(fromNode, 0);\n\t    range.setEnd(toNode, toNode.nodeValue ? toNode.nodeValue.length : 0);\n\t\n\t    var dataText = textClean(range.toString());\n\t\n\t    return Boolean(dataText);\n\t}\n\t\n\tfunction createZws() {\n\t    return context.document.createTextNode(TEXT_ZWS);\n\t}\n\t\n\tfunction checkZws(value) {\n\t    return REG_ZWS.test(value);\n\t}\n\t\n\tfunction textClean(value) {\n\t    return String(value || '').trim().replace(REG_REPLACE_NON_PRINTABLE, '');\n\t}\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar raf = __webpack_require__(7);\n\tvar context = __webpack_require__(1);\n\t\n\tvar _require = __webpack_require__(10),\n\t    dispatch = _require.dispatch;\n\t\n\tvar _require2 = __webpack_require__(12),\n\t    EV = _require2.EV;\n\t\n\t/* eslint quotes: 0 */\n\t\n\tvar HTML_ESCAPES = {\n\t    '&': '&amp;',\n\t    '<': '&lt;',\n\t    '>': '&gt;',\n\t    '\"': '&quot;',\n\t    \"'\": '&#39;',\n\t    '`': '&#96;'\n\t};\n\t\n\tvar HTML_UNESCAPES = {\n\t    '&amp;': '&',\n\t    '&lt;': '<',\n\t    '&gt;': '>',\n\t    '&quot;': '\"',\n\t    '&#39;': \"'\",\n\t    '&#96;': '`'\n\t};\n\t\n\tvar REG_ESCAPED_HTML = /&(?:amp|lt|gt|quot|#39|#96);/g;\n\tvar REG_UNESCAPED_HTML = /[&<>\"'`]/g;\n\tvar REG_HAS_ESCAPED_HTML = RegExp(REG_ESCAPED_HTML.source);\n\tvar REG_HAS_UNESCAPED_HTML = RegExp(REG_UNESCAPED_HTML.source);\n\tvar REG_IE = /Trident|Edge/;\n\tvar REG_MOBILE_IE = /IEMobile/;\n\t\n\texports.getSelection = function (nodeEditor) {\n\t    var selection = context.getSelection();\n\t\n\t    if (selection && selection.anchorNode && nodeEditor.compareDocumentPosition(selection.anchorNode) & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n\t        return selection;\n\t    }\n\t};\n\t\n\texports.correctSelection = function (selection) {\n\t    var endNode = selection.focusNode;\n\t    var endOffset = selection.focusOffset;\n\t    var startNode = selection.anchorNode;\n\t    var startOffset = selection.anchorOffset;\n\t    var revert = false;\n\t\n\t    if (startNode === endNode) {\n\t        startOffset = Math.min(selection.anchorOffset, selection.focusOffset);\n\t        endOffset = Math.max(selection.anchorOffset, selection.focusOffset);\n\t        revert = selection.anchorOffset > selection.focusOffset;\n\t    } else {\n\t        var position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n\t        if (position & Node.DOCUMENT_POSITION_PRECEDING) {\n\t            startNode = selection.focusNode;\n\t            startOffset = selection.focusOffset;\n\t            endNode = selection.anchorNode;\n\t            endOffset = selection.anchorOffset;\n\t            revert = true;\n\t        }\n\t    }\n\t\n\t    return { startNode: startNode, endNode: endNode, startOffset: startOffset, endOffset: endOffset, revert: revert };\n\t};\n\t\n\texports.throttle = function (callback, runContext) {\n\t    var throttle = 0;\n\t    var animationCallback = function animationCallback() {\n\t        throttle = 0;\n\t    };\n\t\n\t    return function () {\n\t        if (throttle) {\n\t            return;\n\t        }\n\t\n\t        throttle = raf(animationCallback);\n\t\n\t        callback.apply(runContext || this, arguments);\n\t    };\n\t};\n\t\n\texports.escape = function (data) {\n\t    data = String(data);\n\t\n\t    if (data && REG_HAS_UNESCAPED_HTML.test(data)) {\n\t        return data.replace(REG_UNESCAPED_HTML, escapeHtmlChar);\n\t    }\n\t\n\t    return data;\n\t};\n\t\n\texports.unescape = function (data) {\n\t    data = String(data);\n\t\n\t    if (data && REG_HAS_ESCAPED_HTML.test(data)) {\n\t        return data.replace(REG_ESCAPED_HTML, unescapeHtmlChar);\n\t    }\n\t\n\t    return data;\n\t};\n\t\n\texports.canUseDrag = function () {\n\t    return !REG_IE.test(context.navigator.userAgent);\n\t}();\n\t\n\texports.isIE = function () {\n\t    return REG_IE.test(context.navigator.userAgent);\n\t}();\n\t\n\texports.isMobileIE = function () {\n\t    return REG_MOBILE_IE.test(context.navigator.userAgent);\n\t}();\n\t\n\texports.ready = function () {\n\t    var elements = [];\n\t    var ready = false;\n\t    var lock = false;\n\t\n\t    function onready() {\n\t        raf(function () {\n\t            context.setTimeout(function () {\n\t                elements.length && dispatch(context, EV.READY, { detail: { data: elements.splice(0) } });\n\t                ready = true;\n\t            });\n\t        });\n\t    }\n\t\n\t    function run() {\n\t        if (ready && !lock) {\n\t            lock = true;\n\t            raf(function () {\n\t                dispatch(context, EV.READY, { detail: { data: elements.splice(0) } });\n\t                lock = false;\n\t            });\n\t        }\n\t    }\n\t\n\t    if (context.document.readyState === 'complete') {\n\t        onready();\n\t    } else if (context.document.readyState === 'interactive' && !context.attachEvent && (!context.HTMLImports || context.HTMLImports.ready)) {\n\t        onready();\n\t    } else {\n\t        context.addEventListener(context.HTMLImports && !context.HTMLImports.ready ? 'HTMLImportsLoaded' : 'DOMContentLoaded', onready);\n\t    }\n\t\n\t    return function (element) {\n\t        elements.push(element);\n\t        run();\n\t    };\n\t}();\n\t\n\tfunction unescapeHtmlChar(chr) {\n\t    return HTML_UNESCAPES[chr];\n\t}\n\t\n\tfunction escapeHtmlChar(chr) {\n\t    return HTML_ESCAPES[chr];\n\t}\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {var now = __webpack_require__(8)\n\t  , root = typeof window === 'undefined' ? global : window\n\t  , vendors = ['moz', 'webkit']\n\t  , suffix = 'AnimationFrame'\n\t  , raf = root['request' + suffix]\n\t  , caf = root['cancel' + suffix] || root['cancelRequest' + suffix]\n\t\n\tfor(var i = 0; !raf && i < vendors.length; i++) {\n\t  raf = root[vendors[i] + 'Request' + suffix]\n\t  caf = root[vendors[i] + 'Cancel' + suffix]\n\t      || root[vendors[i] + 'CancelRequest' + suffix]\n\t}\n\t\n\t// Some versions of FF have rAF but not cAF\n\tif(!raf || !caf) {\n\t  var last = 0\n\t    , id = 0\n\t    , queue = []\n\t    , frameDuration = 1000 / 60\n\t\n\t  raf = function(callback) {\n\t    if(queue.length === 0) {\n\t      var _now = now()\n\t        , next = Math.max(0, frameDuration - (_now - last))\n\t      last = next + _now\n\t      setTimeout(function() {\n\t        var cp = queue.slice(0)\n\t        // Clear queue here to prevent\n\t        // callbacks from appending listeners\n\t        // to the current frame's queue\n\t        queue.length = 0\n\t        for(var i = 0; i < cp.length; i++) {\n\t          if(!cp[i].cancelled) {\n\t            try{\n\t              cp[i].callback(last)\n\t            } catch(e) {\n\t              setTimeout(function() { throw e }, 0)\n\t            }\n\t          }\n\t        }\n\t      }, Math.round(next))\n\t    }\n\t    queue.push({\n\t      handle: ++id,\n\t      callback: callback,\n\t      cancelled: false\n\t    })\n\t    return id\n\t  }\n\t\n\t  caf = function(handle) {\n\t    for(var i = 0; i < queue.length; i++) {\n\t      if(queue[i].handle === handle) {\n\t        queue[i].cancelled = true\n\t      }\n\t    }\n\t  }\n\t}\n\t\n\tmodule.exports = function(fn) {\n\t  // Wrap in a new function to prevent\n\t  // `cancel` potentially being assigned\n\t  // to the native rAF function\n\t  return raf.call(root, fn)\n\t}\n\tmodule.exports.cancel = function() {\n\t  caf.apply(root, arguments)\n\t}\n\tmodule.exports.polyfill = function() {\n\t  root.requestAnimationFrame = raf\n\t  root.cancelAnimationFrame = caf\n\t}\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process) {// Generated by CoffeeScript 1.7.1\n\t(function() {\n\t  var getNanoSeconds, hrtime, loadTime;\n\t\n\t  if ((typeof performance !== \"undefined\" && performance !== null) && performance.now) {\n\t    module.exports = function() {\n\t      return performance.now();\n\t    };\n\t  } else if ((typeof process !== \"undefined\" && process !== null) && process.hrtime) {\n\t    module.exports = function() {\n\t      return (getNanoSeconds() - loadTime) / 1e6;\n\t    };\n\t    hrtime = process.hrtime;\n\t    getNanoSeconds = function() {\n\t      var hr;\n\t      hr = hrtime();\n\t      return hr[0] * 1e9 + hr[1];\n\t    };\n\t    loadTime = getNanoSeconds();\n\t  } else if (Date.now) {\n\t    module.exports = function() {\n\t      return Date.now() - loadTime;\n\t    };\n\t    loadTime = Date.now();\n\t  } else {\n\t    module.exports = function() {\n\t      return new Date().getTime() - loadTime;\n\t    };\n\t    loadTime = new Date().getTime();\n\t  }\n\t\n\t}).call(this);\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(9)))\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t// shim for using process in browser\n\tvar process = module.exports = {};\n\t\n\t// cached from whatever global is present so that test runners that stub it\n\t// don't break things.  But we need to wrap it in a try catch in case it is\n\t// wrapped in strict mode code which doesn't define any globals.  It's inside a\n\t// function because try/catches deoptimize in certain engines.\n\t\n\tvar cachedSetTimeout;\n\tvar cachedClearTimeout;\n\t\n\tfunction defaultSetTimout() {\n\t    throw new Error('setTimeout has not been defined');\n\t}\n\tfunction defaultClearTimeout () {\n\t    throw new Error('clearTimeout has not been defined');\n\t}\n\t(function () {\n\t    try {\n\t        if (typeof setTimeout === 'function') {\n\t            cachedSetTimeout = setTimeout;\n\t        } else {\n\t            cachedSetTimeout = defaultSetTimout;\n\t        }\n\t    } catch (e) {\n\t        cachedSetTimeout = defaultSetTimout;\n\t    }\n\t    try {\n\t        if (typeof clearTimeout === 'function') {\n\t            cachedClearTimeout = clearTimeout;\n\t        } else {\n\t            cachedClearTimeout = defaultClearTimeout;\n\t        }\n\t    } catch (e) {\n\t        cachedClearTimeout = defaultClearTimeout;\n\t    }\n\t} ())\n\tfunction runTimeout(fun) {\n\t    if (cachedSetTimeout === setTimeout) {\n\t        //normal enviroments in sane situations\n\t        return setTimeout(fun, 0);\n\t    }\n\t    // if setTimeout wasn't available but was latter defined\n\t    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n\t        cachedSetTimeout = setTimeout;\n\t        return setTimeout(fun, 0);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedSetTimeout(fun, 0);\n\t    } catch(e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n\t            return cachedSetTimeout.call(null, fun, 0);\n\t        } catch(e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n\t            return cachedSetTimeout.call(this, fun, 0);\n\t        }\n\t    }\n\t\n\t\n\t}\n\tfunction runClearTimeout(marker) {\n\t    if (cachedClearTimeout === clearTimeout) {\n\t        //normal enviroments in sane situations\n\t        return clearTimeout(marker);\n\t    }\n\t    // if clearTimeout wasn't available but was latter defined\n\t    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n\t        cachedClearTimeout = clearTimeout;\n\t        return clearTimeout(marker);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedClearTimeout(marker);\n\t    } catch (e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n\t            return cachedClearTimeout.call(null, marker);\n\t        } catch (e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n\t            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n\t            return cachedClearTimeout.call(this, marker);\n\t        }\n\t    }\n\t\n\t\n\t\n\t}\n\tvar queue = [];\n\tvar draining = false;\n\tvar currentQueue;\n\tvar queueIndex = -1;\n\t\n\tfunction cleanUpNextTick() {\n\t    if (!draining || !currentQueue) {\n\t        return;\n\t    }\n\t    draining = false;\n\t    if (currentQueue.length) {\n\t        queue = currentQueue.concat(queue);\n\t    } else {\n\t        queueIndex = -1;\n\t    }\n\t    if (queue.length) {\n\t        drainQueue();\n\t    }\n\t}\n\t\n\tfunction drainQueue() {\n\t    if (draining) {\n\t        return;\n\t    }\n\t    var timeout = runTimeout(cleanUpNextTick);\n\t    draining = true;\n\t\n\t    var len = queue.length;\n\t    while(len) {\n\t        currentQueue = queue;\n\t        queue = [];\n\t        while (++queueIndex < len) {\n\t            if (currentQueue) {\n\t                currentQueue[queueIndex].run();\n\t            }\n\t        }\n\t        queueIndex = -1;\n\t        len = queue.length;\n\t    }\n\t    currentQueue = null;\n\t    draining = false;\n\t    runClearTimeout(timeout);\n\t}\n\t\n\tprocess.nextTick = function (fun) {\n\t    var args = new Array(arguments.length - 1);\n\t    if (arguments.length > 1) {\n\t        for (var i = 1; i < arguments.length; i++) {\n\t            args[i - 1] = arguments[i];\n\t        }\n\t    }\n\t    queue.push(new Item(fun, args));\n\t    if (queue.length === 1 && !draining) {\n\t        runTimeout(drainQueue);\n\t    }\n\t};\n\t\n\t// v8 likes predictible objects\n\tfunction Item(fun, array) {\n\t    this.fun = fun;\n\t    this.array = array;\n\t}\n\tItem.prototype.run = function () {\n\t    this.fun.apply(null, this.array);\n\t};\n\tprocess.title = 'browser';\n\tprocess.browser = true;\n\tprocess.env = {};\n\tprocess.argv = [];\n\tprocess.version = ''; // empty string to avoid regexp issues\n\tprocess.versions = {};\n\t\n\tfunction noop() {}\n\t\n\tprocess.on = noop;\n\tprocess.addListener = noop;\n\tprocess.once = noop;\n\tprocess.off = noop;\n\tprocess.removeListener = noop;\n\tprocess.removeAllListeners = noop;\n\tprocess.emit = noop;\n\tprocess.prependListener = noop;\n\tprocess.prependOnceListener = noop;\n\t\n\tprocess.listeners = function (name) { return [] }\n\t\n\tprocess.binding = function (name) {\n\t    throw new Error('process.binding is not supported');\n\t};\n\t\n\tprocess.cwd = function () { return '/' };\n\tprocess.chdir = function (dir) {\n\t    throw new Error('process.chdir is not supported');\n\t};\n\tprocess.umask = function() { return 0; };\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\t\n\t/**\n\t * @module x-bubbles/events\n\t */\n\t\n\tvar context = __webpack_require__(1);\n\tvar CustomEventCommon = __webpack_require__(11);\n\t\n\tvar _require = __webpack_require__(12),\n\t    PROPS = _require.PROPS;\n\t\n\texports.scrollX = scrollX;\n\texports.scrollY = scrollY;\n\texports.dispatch = dispatch;\n\t\n\texports.keyCode = function (event) {\n\t    return event.charCode || event.keyCode;\n\t};\n\t\n\texports.metaKey = function (event) {\n\t    return event.ctrlKey || event.metaKey;\n\t};\n\t\n\texports.pageX = function (event) {\n\t    return event.pageX === null && event.clientX !== null ? event.clientX + scrollX() : event.pageX;\n\t};\n\t\n\texports.pageY = function (event) {\n\t    return event.pageY === null && event.clientY !== null ? event.clientY + scrollY() : event.pageY;\n\t};\n\t\n\texports.one = function (target, eventName, callback) {\n\t    toggleEvent(target, eventName, callback, true, false, true);\n\t};\n\t\n\texports.on = function (target, eventName, callback) {\n\t    toggleEvent(target, eventName, callback);\n\t};\n\t\n\texports.off = function (target, eventName, callback) {\n\t    toggleEvent(target, eventName, callback, false);\n\t};\n\t\n\texports.oneLocal = function (target, eventName, callback) {\n\t    toggleEvent(target, eventName, callback, true, true, true);\n\t};\n\t\n\texports.onLocal = function (target, eventName, callback) {\n\t    toggleEvent(target, eventName, callback, true, true);\n\t};\n\t\n\texports.offLocal = function (target, eventName, callback) {\n\t    toggleEvent(target, eventName, callback, false, true);\n\t};\n\t\n\texports.prevent = function (event) {\n\t    event.cancelBubble = true;\n\t    event.returnValue = false;\n\t    event.stopImmediatePropagation();\n\t    event.stopPropagation();\n\t    event.preventDefault();\n\t    return false;\n\t};\n\t\n\texports.proxyLocal = function (event) {\n\t    dispatchLocalEvent(event.currentTarget, event);\n\t};\n\t\n\tfunction scrollX() {\n\t    var html = context.document.documentElement;\n\t    var body = context.document.body;\n\t    return (html && html.scrollLeft || body && body.scrollLeft || 0) - (html.clientLeft || 0);\n\t}\n\t\n\tfunction scrollY() {\n\t    var html = context.document.documentElement;\n\t    var body = context.document.body;\n\t    return (html && html.scrollTop || body && body.scrollTop || 0) - (html.clientTop || 0);\n\t}\n\t\n\t/**\n\t * Designer events.\n\t *\n\t * @example\n\t * const { Custom } = require('event');\n\t *\n\t * new Custom('custom-event', {\n\t *     bubbles: true,\n\t *     cancelable: true,\n\t *     detail: { data: '123' }\n\t * })\n\t *\n\t * @alias module:x-bubbles/event~Custom\n\t * @constructor\n\t */\n\tvar Custom = function () {\n\t    if (typeof context.CustomEvent === 'function') {\n\t        return context.CustomEvent;\n\t    }\n\t\n\t    return CustomEventCommon;\n\t}();\n\t\n\t/**\n\t * Dispatch event.\n\t *\n\t * @example\n\t * const { dispatch } = require('event');\n\t * dispatch(node, 'custom-event', {\n\t *     bubbles: true,\n\t *     cancelable: true,\n\t *     detail: { data: '123' }\n\t * })\n\t *\n\t * @alias module:x-bubbles/event.dispatch\n\t * @param {HTMLElement} element node events\n\t * @param {string} name event name\n\t * @param {Object} params the event parameters\n\t * @param {boolean} [params.bubbles=false]\n\t * @param {boolean} [params.cancelable=false]\n\t * @param {*} [params.detail]\n\t */\n\tfunction dispatch(element, name) {\n\t    var params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t    element.dispatchEvent(new Custom(name, params));\n\t}\n\t\n\tfunction dispatchLocalEvent(element, event) {\n\t    var callbacks = element[PROPS.LOCAL_EVENTS] && element[PROPS.LOCAL_EVENTS][event.type] || [];\n\t    var sharedData = {};\n\t\n\t    for (var i = 0; i < callbacks.length; i++) {\n\t        if (event.immediatePropagationStopped) {\n\t            break;\n\t        }\n\t\n\t        callbacks[i](event, sharedData);\n\t    }\n\t}\n\t\n\tfunction oneCallback(element, eventName, callback) {\n\t    return function _callback(event) {\n\t        element.removeEventListener(eventName, _callback);\n\t        callback(event);\n\t    };\n\t}\n\t\n\tfunction getEventHandlersQueue(element, eventName) {\n\t    if (!element[PROPS.LOCAL_EVENTS]) {\n\t        element[PROPS.LOCAL_EVENTS] = {};\n\t    }\n\t\n\t    if (!element[PROPS.LOCAL_EVENTS][eventName]) {\n\t        element[PROPS.LOCAL_EVENTS][eventName] = [];\n\t    }\n\t\n\t    return element[PROPS.LOCAL_EVENTS][eventName];\n\t}\n\t\n\tvar EV_ACTIONS = {\n\t    addLocalEventListener: function addLocalEventListener(element, eventName, callback) {\n\t        getEventHandlersQueue(element, eventName).push(callback);\n\t    },\n\t\n\t    removeLocalEventListener: function removeLocalEventListener(element, eventName, callback) {\n\t        var callbacks = element[PROPS.LOCAL_EVENTS] && element[PROPS.LOCAL_EVENTS][eventName] || [];\n\t        var i = 0;\n\t\n\t        while (i < callbacks.length) {\n\t            if (callbacks[i] === callback) {\n\t                callbacks.splice(i, 1);\n\t            } else {\n\t                i++;\n\t            }\n\t        }\n\t    },\n\t\n\t    addEventListener: function addEventListener(element, eventName, callback) {\n\t        element.addEventListener(eventName, callback);\n\t    },\n\t\n\t    removeEventListener: function removeEventListener(element, eventName, callback) {\n\t        element.removeEventListener(eventName, callback);\n\t    }\n\t};\n\t\n\tfunction toggleEvent(element, eventName, userCallback) {\n\t    var isSet = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n\t    var isLocal = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\t    var isOne = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n\t\n\t    var events = userCallback ? _defineProperty({}, eventName, userCallback) : eventName;\n\t    var action = '' + (isSet ? 'add' : 'remove') + (isLocal ? 'Local' : '') + 'EventListener';\n\t\n\t    for (var name in events) {\n\t        var callback = isOne ? oneCallback(element, name, events[name]) : events[name];\n\t        EV_ACTIONS[action](element, name, callback);\n\t    }\n\t}\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar context = __webpack_require__(1);\n\t\n\t/**\n\t * @constant {Document}\n\t * @private\n\t */\n\tvar doc = context.document;\n\t\n\t/**\n\t * @constant {Object}\n\t * @private\n\t */\n\tvar protoEvent = context.Event.prototype;\n\t\n\tvar issetCustomEvent = false;\n\t\n\ttry {\n\t    issetCustomEvent = Boolean(doc.createEvent('CustomEvent'));\n\t} catch (e) {}\n\t// do nothing\n\t\n\t\n\t/**\n\t * The original function \"stopImmediatePropagation\"\n\t * @constant {function}\n\t * @private\n\t */\n\tvar stopImmediatePropagation = protoEvent.stopImmediatePropagation;\n\t\n\t/**\n\t * Override function to set properties \"immediatePropagationStopped\"\n\t */\n\tprotoEvent.stopImmediatePropagation = function () {\n\t    this.immediatePropagationStopped = true;\n\t\n\t    if (stopImmediatePropagation) {\n\t        stopImmediatePropagation.call(this);\n\t    } else {\n\t        this.stopPropagation();\n\t    }\n\t};\n\t\n\tvar CustomEventCommon = function () {\n\t    if (issetCustomEvent) {\n\t        return function (eventName, params) {\n\t            params = params || {};\n\t\n\t            var bubbles = Boolean(params.bubbles);\n\t            var cancelable = Boolean(params.cancelable);\n\t            var evt = doc.createEvent('CustomEvent');\n\t\n\t            evt.initCustomEvent(eventName, bubbles, cancelable, params.detail);\n\t\n\t            return evt;\n\t        };\n\t    }\n\t\n\t    return function (eventName, params) {\n\t        params = params || {};\n\t\n\t        var bubbles = Boolean(params.bubbles);\n\t        var cancelable = Boolean(params.cancelable);\n\t        var evt = doc.createEvent('Event');\n\t\n\t        evt.initEvent(eventName, bubbles, cancelable);\n\t        evt.detail = params.detail;\n\t\n\t        return evt;\n\t    };\n\t}();\n\t\n\tCustomEventCommon.prototype = protoEvent;\n\t\n\tmodule.exports = CustomEventCommon;\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\texports.KEY = {\n\t    a: 65,\n\t    Backspace: 8,\n\t    Bottom: 40,\n\t    c: 67,\n\t    Cmd: 91,\n\t    Comma: 44, // ,\n\t    Delete: 46,\n\t    Enter: 13, // Enter\n\t    Esc: 27,\n\t    Home: 36,\n\t    Left: 37,\n\t    Right: 39,\n\t    Semicolon: 59, // ;\n\t    Space: 32,\n\t    Tab: 9,\n\t    Top: 38,\n\t    x: 88\n\t};\n\t\n\texports.CLS = {\n\t    DRAGSTART: 'drag',\n\t    DROPZONE: 'dropzone'\n\t};\n\t\n\texports.EV = {\n\t    BEFORE_REMOVE: 'before-remove',\n\t    BUBBLE_EDIT: 'bubble-edit',\n\t    BUBBLE_INPUT: 'bubble-input',\n\t    CHANGE: 'change',\n\t    DRAGEND: 'dragend',\n\t    DRAGENTER: 'dragenter',\n\t    DRAGLEAVE: 'dragleave',\n\t    DRAGSTART: 'dragstart',\n\t    DROP: 'drop',\n\t    READY: 'x-bubbles-ready'\n\t};\n\t\n\texports.PROPS = {\n\t    BUBBLE_VALUE: '__bubble_value__',\n\t    CLICK_TIME: '__click_time__',\n\t    LOCAL_EVENTS: '__events__',\n\t    LOCK_COPY: '__lock_copy__',\n\t    OPTIONS: '__options__'\n\t};\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/**\n\t * @module x-bubbles/cursor\n\t */\n\t\n\tvar context = __webpack_require__(1);\n\tvar text = __webpack_require__(5);\n\tvar select = __webpack_require__(14);\n\tvar utils = __webpack_require__(6);\n\t\n\texports.restore = restore;\n\texports.restoreBasis = restoreBasis;\n\t\n\t/**\n\t * Reset the cursor position to the end of the input field.\n\t * This action is forbidden in the IE Mobile because it\n\t * causes a browser crash. There is still no workaround.\n\t * @alias module:x-bubbles/cursor.restore\n\t * @param {HTMLElement} nodeSet\n\t */\n\tfunction restore(nodeSet) {\n\t    if (!utils.isMobileIE) {\n\t        if (!nodeSet.canAddBubble()) {\n\t            select.setLast(nodeSet);\n\t            return;\n\t        }\n\t\n\t        select.clear(nodeSet);\n\t        var basis = restoreBasis(nodeSet);\n\t        var selection = context.getSelection();\n\t        selection.removeAllRanges();\n\t        selection.collapse(basis, 1);\n\t    }\n\t}\n\t\n\t/**\n\t * The creation of the fake text at the end childNodes\n\t * @alias module:x-bubbles/cursor.restoreBasis\n\t * @param {HTMLElement} nodeSet\n\t * @returns {HTMLTextElement} fake text node\n\t */\n\tfunction restoreBasis(nodeSet) {\n\t    var fakeText = text.createZws();\n\t\n\t    if (nodeSet.hasChildNodes()) {\n\t        var lastNode = nodeSet.childNodes[nodeSet.childNodes.length - 1];\n\t\n\t        if (lastNode.isEqualNode(fakeText)) {\n\t            fakeText = lastNode;\n\t        } else {\n\t            nodeSet.appendChild(fakeText);\n\t        }\n\t    } else {\n\t        nodeSet.appendChild(fakeText);\n\t    }\n\t\n\t    return fakeText;\n\t}\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar context = __webpack_require__(1);\n\tvar utils = __webpack_require__(6);\n\tvar bubble = __webpack_require__(4);\n\tvar bubbleset = __webpack_require__(3);\n\t\n\tvar slice = Array.prototype.slice;\n\tvar PATH_SELECTED = '[bubble][selected]';\n\tvar PATH_NOT_SELECTED = '[bubble]:not([selected])';\n\t\n\texports.all = all;\n\texports.allLeft = allLeft;\n\texports.add = add;\n\texports.clear = clear;\n\texports.get = get;\n\texports.uniq = uniq;\n\texports.head = head;\n\texports.last = last;\n\texports.has = has;\n\texports.range = range;\n\texports.toggleUniq = toggleUniq;\n\texports.setLast = setLast;\n\texports.getEditable = getEditable;\n\t\n\tfunction range(node) {\n\t    if (!bubble.isBubbleNode(node)) {\n\t        return;\n\t    }\n\t\n\t    var set = node.parentNode;\n\t    var list = get(set);\n\t\n\t    if (!list.length) {\n\t        uniq(node);\n\t        return;\n\t    }\n\t\n\t    clear(set);\n\t\n\t    var headList = list[0];\n\t    var lastList = list[list.length - 1];\n\t\n\t    if (headList === lastList || !set.startRangeSelect) {\n\t        set.startRangeSelect = headList;\n\t    }\n\t\n\t    var fromNode = void 0;\n\t    var toNode = void 0;\n\t    var position = node.compareDocumentPosition(set.startRangeSelect);\n\t\n\t    if (position & Node.DOCUMENT_POSITION_PRECEDING) {\n\t        fromNode = set.startRangeSelect;\n\t        toNode = node;\n\t    } else {\n\t        fromNode = node;\n\t        toNode = set.startRangeSelect;\n\t    }\n\t\n\t    if (fromNode && toNode) {\n\t        var item = fromNode;\n\t\n\t        while (item) {\n\t            if (!setSelected(item)) {\n\t                break;\n\t            }\n\t\n\t            if (item === toNode) {\n\t                break;\n\t            }\n\t\n\t            item = item.nextSibling;\n\t        }\n\t\n\t        bubble.bubbling(set);\n\t    }\n\t}\n\t\n\tfunction all(nodeSet) {\n\t    slice.call(nodeSet.querySelectorAll(PATH_NOT_SELECTED)).forEach(function (item) {\n\t        return setSelected(item);\n\t    });\n\t    nodeSet.startRangeSelect = nodeSet.querySelector(PATH_SELECTED);\n\t\n\t    bubble.bubbling(nodeSet);\n\t\n\t    var selection = context.getSelection();\n\t    selection && selection.removeAllRanges();\n\t}\n\t\n\tfunction allLeft(nodeSet) {\n\t    var lastSelectedBubble = last(nodeSet);\n\t\n\t    if (!lastSelectedBubble) {\n\t        return;\n\t    }\n\t\n\t    for (var item = bubbleset.prevBubble(lastSelectedBubble); item; item = bubbleset.prevBubble(item)) {\n\t        setSelected(item);\n\t    }\n\t\n\t    nodeSet.startRangeSelect = nodeSet.querySelector(PATH_SELECTED);\n\t\n\t    bubble.bubbling(nodeSet);\n\t\n\t    var selection = context.getSelection();\n\t    selection && selection.removeAllRanges();\n\t}\n\t\n\tfunction has(nodeSet) {\n\t    return Boolean(nodeSet.querySelector(PATH_SELECTED));\n\t}\n\t\n\tfunction head(set) {\n\t    return get(set)[0];\n\t}\n\t\n\tfunction last(set) {\n\t    var list = get(set);\n\t    return list[list.length - 1];\n\t}\n\t\n\tfunction get(nodeSet) {\n\t    return slice.call(nodeSet.querySelectorAll(PATH_SELECTED));\n\t}\n\t\n\tfunction getEditable(nodeSet) {\n\t    if (!nodeSet.options('selection')) {\n\t        return false;\n\t    }\n\t\n\t    var selection = utils.getSelection(nodeSet);\n\t\n\t    if (selection && selection.rangeCount) {\n\t        return false;\n\t    }\n\t\n\t    var list = get(nodeSet);\n\t\n\t    if (list.length !== 1) {\n\t        return false;\n\t    }\n\t\n\t    return list[0];\n\t}\n\t\n\tfunction clear(nodeSet) {\n\t    get(nodeSet).forEach(function (item) {\n\t        return item.removeAttribute('selected');\n\t    });\n\t}\n\t\n\tfunction add(node) {\n\t    if (setSelected(node)) {\n\t        var nodeSet = bubbleset.closestNodeSet(node);\n\t\n\t        nodeSet.startRangeSelect = node;\n\t        // ???\n\t        bubble.bubbling(nodeSet);\n\t\n\t        return true;\n\t    }\n\t\n\t    return false;\n\t}\n\t\n\tfunction uniq(node) {\n\t    if (!bubble.isBubbleNode(node)) {\n\t        return false;\n\t    }\n\t\n\t    var nodeSet = bubbleset.closestNodeSet(node);\n\t    var selection = context.getSelection();\n\t\n\t    selection && selection.removeAllRanges();\n\t    clear(nodeSet);\n\t\n\t    return add(node);\n\t}\n\t\n\tfunction setLast(nodeEditor) {\n\t    return uniq(bubbleset.lastBubble(nodeEditor));\n\t}\n\t\n\tfunction toggleUniq(node) {\n\t    if (isSelected(node)) {\n\t        var nodeSet = bubbleset.closestNodeSet(node);\n\t\n\t        if (get(nodeSet).length === 1) {\n\t            return removeSelected(node);\n\t        }\n\t    }\n\t\n\t    return uniq(node);\n\t}\n\t\n\tfunction isSelected(node) {\n\t    return bubble.isBubbleNode(node) && node.hasAttribute('selected') || false;\n\t}\n\t\n\tfunction setSelected(node) {\n\t    if (bubble.isBubbleNode(node)) {\n\t        node.setAttribute('selected', '');\n\t        return true;\n\t    }\n\t\n\t    return false;\n\t}\n\t\n\tfunction removeSelected(node) {\n\t    if (bubble.isBubbleNode(node)) {\n\t        node.removeAttribute('selected');\n\t        return true;\n\t    }\n\t\n\t    return false;\n\t}\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar native = __webpack_require__(16);\n\tvar mouse = __webpack_require__(19);\n\t\n\tvar _require = __webpack_require__(6),\n\t    canUseDrag = _require.canUseDrag;\n\t\n\texports.init = function (nodeSet) {\n\t    if (canUseDrag) {\n\t        return native.init(nodeSet);\n\t    }\n\t\n\t    return mouse.init(nodeSet);\n\t};\n\t\n\texports.destroy = function (nodeSet) {\n\t    if (canUseDrag) {\n\t        return native.destroy(nodeSet);\n\t    }\n\t\n\t    return mouse.destroy(nodeSet);\n\t};\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar context = __webpack_require__(1);\n\tvar select = __webpack_require__(14);\n\tvar bubbleset = __webpack_require__(3);\n\tvar events = __webpack_require__(10);\n\t\n\tvar _require = __webpack_require__(12),\n\t    CLS = _require.CLS;\n\t\n\tvar _require2 = __webpack_require__(17),\n\t    getDragImage = _require2.getDragImage,\n\t    onDropSuccess = _require2.onDropSuccess,\n\t    DRAG_IMG = _require2.DRAG_IMG;\n\t\n\tvar EVENTS = {\n\t    dragend: onDragend,\n\t    dragenter: onDragenter,\n\t    dragleave: onDragleave,\n\t    dragover: onDragover,\n\t    dragstart: onDragstart,\n\t    drop: onDrop\n\t};\n\t\n\tvar currentDragSet = null;\n\t\n\texports.init = function (nodeSet) {\n\t    events.on(nodeSet, EVENTS);\n\t};\n\t\n\texports.destroy = function (nodeSet) {\n\t    events.off(nodeSet, EVENTS);\n\t};\n\t\n\tfunction onDragstart(event) {\n\t    event.stopPropagation();\n\t\n\t    var nodeSet = bubbleset.closestNodeSet(event.target);\n\t    var nodeBubble = bubbleset.closestNodeBubble(event.target);\n\t\n\t    if (!nodeSet || !nodeBubble) {\n\t        event.preventDefault();\n\t        return;\n\t    }\n\t\n\t    var selection = context.getSelection();\n\t    selection && selection.removeAllRanges();\n\t\n\t    currentDragSet = nodeSet;\n\t    nodeSet.classList.add(CLS.DRAGSTART);\n\t    select.add(nodeBubble);\n\t\n\t    event.dataTransfer.effectAllowed = 'move';\n\t    event.dataTransfer.setData('text/plain', '');\n\t\n\t    var list = select.get(currentDragSet);\n\t\n\t    if (list.length > 1) {\n\t        event.dataTransfer.setDragImage(getDragImage(), DRAG_IMG.w, DRAG_IMG.h);\n\t    }\n\t}\n\t\n\tfunction onDrop(event) {\n\t    event.stopPropagation();\n\t    event.preventDefault();\n\t\n\t    if (!currentDragSet) {\n\t        return;\n\t    }\n\t\n\t    var nodeSet = bubbleset.closestNodeSet(event.target);\n\t\n\t    if (!nodeSet || nodeSet === currentDragSet) {\n\t        return;\n\t    }\n\t\n\t    var checkBubbleDrop = nodeSet.options('checkBubbleDrop');\n\t\n\t    var list = select.get(currentDragSet);\n\t\n\t    if (list.length && checkBubbleDrop(list)) {\n\t        bubbleset.moveBubbles(currentDragSet, nodeSet, list);\n\t        context.setTimeout(onDropSuccess, 0, currentDragSet, nodeSet);\n\t    }\n\t}\n\t\n\tfunction onDragover(event) {\n\t    event.stopPropagation();\n\t    event.preventDefault();\n\t\n\t    if (!currentDragSet) {\n\t        return;\n\t    }\n\t\n\t    event.dataTransfer.dropEffect = 'move';\n\t}\n\t\n\tfunction onDragenter(event) {\n\t    event.stopPropagation();\n\t    event.preventDefault();\n\t\n\t    if (!currentDragSet) {\n\t        return;\n\t    }\n\t\n\t    var nodeSet = bubbleset.closestNodeSet(event.target);\n\t    if (nodeSet && nodeSet !== currentDragSet) {\n\t        nodeSet.classList.add(CLS.DROPZONE);\n\t    }\n\t}\n\t\n\tfunction onDragleave(event) {\n\t    event.stopPropagation();\n\t    event.preventDefault();\n\t\n\t    if (!currentDragSet) {\n\t        return;\n\t    }\n\t\n\t    var nodeSet = bubbleset.closestNodeSet(event.target);\n\t    if (nodeSet && nodeSet !== currentDragSet) {\n\t        nodeSet.classList.remove(CLS.DROPZONE);\n\t    }\n\t}\n\t\n\tfunction onDragend(event) {\n\t    event.stopPropagation();\n\t    event.preventDefault();\n\t\n\t    if (!currentDragSet) {\n\t        return;\n\t    }\n\t\n\t    currentDragSet.classList.remove(CLS.DRAGSTART);\n\t\n\t    var nodeSet = bubbleset.closestNodeSet(event.target);\n\t\n\t    if (nodeSet && nodeSet !== currentDragSet) {\n\t        nodeSet.classList.remove(CLS.DROPZONE);\n\t    }\n\t\n\t    currentDragSet = null;\n\t}\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar DRAG_IMG = { w: 16, h: 16 };\n\t\n\tvar dragImage = null;\n\t\n\texports.DRAG_IMG = DRAG_IMG;\n\t\n\texports.getDragImage = function () {\n\t    if (!dragImage) {\n\t        dragImage = new Image();\n\t        dragImage.src = __webpack_require__(18);\n\t    }\n\t\n\t    return dragImage;\n\t};\n\t\n\texports.onDropSuccess = function (fromNodeSet, toNodeSet) {\n\t    fromNodeSet.fireChange();\n\t    toNodeSet.focus();\n\t    toNodeSet.fireChange();\n\t};\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE8AAAAVCAMAAAAw/0MlAAABblBMVEUAAABOXIZJWIKCkbeNnMKMmsJNW4VNW4VWZY57ibFHV4KVpMxRYImCkLh9jbpgcJ1fcJ1JWoaZqdNUZpaHmMaVpdJIWolTZJKHmMZEV4iXqNdkdqhjdal2iLx2ib2Knc6PodNJXpJJXpNOYpdpfLKCk8JPYpdofLNugblugrqUptdZdLdZd8Nfeb93js1+ksuGm9SGm9VHaLhJarxKZqxKbL9La7pNbr9Pb71Ucr1Wbag/XqU/X6pAVopffMdjf8ZphMpwicx2js9BW51CWZN/ldCBl9KCmNNFYKRFZbGJndWOodVKX5RKX5ZKYJdWdcNXbKJYdL1KYJtAVYpaeMVJXpJKbMBgebpjeLBjf8VLYp5kd65kgMlofLRog8log8tJYqBth8xugrpviMtNabBxi851jc8/X6t3i8BOaK56kdB9lNFOaa5Ob8FPY5qBl9NGXJODmNOEmdNQbrpRcsJUb7RGXJSTptmUptiUp9kfFguNAAAAK3RSTlMAJCQkJDw8P0JCRUVubpaWlpmZwMDAw8nJzMzV29vb7e3t7fDw+Pn5+fn8jndhZAAAAQhJREFUeF6tz2VXwgAYBtBnhBKKkgoGKPY2urvT7u7ujn/vtsM5fN/e+w8uJEaLa+HvR7Zfl8WILo293Qq8vykQaLXtGnRoPcH6i1L1oEcLidpde6BQc6shslXvaVSHIdD7S9c0Sv5+ACbfFRXftBoYuzijUry1AXPHJ1QK5349pvYOqeSPfCaM8Dkq/EFxHAMst0mDY3cL89Clkis0kqmd/CxgvUt8Ukg8rub4UYCZicTiT0rFY5HnNY4dBNC32GiGwtFt+aLhULOx9CWMdRAMbVXK6cyNfJl0ubL8IYytEDHe0/XX7IZ82e/9S3HsZSDpmSQZT/SiQ+UgGDtU6DKYnYrGTrMBon97+TS1J80efgAAAABJRU5ErkJggg==\"\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar context = __webpack_require__(1);\n\tvar events = __webpack_require__(10);\n\tvar utils = __webpack_require__(6);\n\tvar select = __webpack_require__(14);\n\tvar bubbleset = __webpack_require__(3);\n\tvar Modernizr = __webpack_require__(20);\n\t\n\tvar _require = __webpack_require__(12),\n\t    CLS = _require.CLS,\n\t    EV = _require.EV;\n\t\n\tvar _require2 = __webpack_require__(17),\n\t    getDragImage = _require2.getDragImage,\n\t    onDropSuccess = _require2.onDropSuccess,\n\t    DRAG_IMG = _require2.DRAG_IMG;\n\t\n\tvar currentDragSet = null;\n\tvar currentMoveSet = null;\n\tvar currentDragElement = null;\n\t\n\texports.init = function (nodeSet) {\n\t    events.on(nodeSet, 'mousedown', onMousedown);\n\t};\n\t\n\texports.destroy = function (nodeSet) {\n\t    events.off(nodeSet, 'mousedown', onMousedown);\n\t};\n\t\n\tfunction onMousedown(event) {\n\t    var nodeBubble = bubbleset.closestNodeBubble(event.target);\n\t    if (!nodeBubble) {\n\t        return;\n\t    }\n\t\n\t    var nodeSet = bubbleset.closestNodeSet(event.target);\n\t    if (!nodeSet) {\n\t        return;\n\t    }\n\t\n\t    event.preventDefault();\n\t    nodeSet.focus();\n\t\n\t    var drag = nodeSet.__drag__ = {\n\t        nodeBubble: nodeBubble,\n\t        nodeOffsetX: event.offsetX,\n\t        nodeOffsetY: event.offsetY,\n\t        onMousemove: utils.throttle(onMousemove.bind(this, nodeSet)),\n\t        onMouseup: onMouseup.bind(this, nodeSet),\n\t        onScroll: utils.throttle(onScroll.bind(this, nodeSet)),\n\t        x: 0,\n\t        y: 0\n\t    };\n\t\n\t    currentDragSet = null;\n\t    currentMoveSet = null;\n\t    currentDragElement = null;\n\t\n\t    events.one(document, 'mouseup', drag.onMouseup);\n\t    events.on(document, 'mousemove', drag.onMousemove);\n\t    events.on(document, 'scroll', drag.onScroll);\n\t}\n\t\n\tfunction onMouseup(dragSet, event) {\n\t    var drag = dragSet.__drag__;\n\t    if (!drag) {\n\t        return;\n\t    }\n\t\n\t    events.off(document, 'mousemove', drag.onMousemove);\n\t    events.off(document, 'scroll', drag.onScroll);\n\t    delete dragSet.__drag__;\n\t\n\t    if (currentDragElement) {\n\t        currentDragElement.parentNode && currentDragElement.parentNode.removeChild(currentDragElement);\n\t        currentDragElement = null;\n\t    }\n\t\n\t    if (currentMoveSet) {\n\t        var _ = currentMoveSet;\n\t        currentMoveSet = null;\n\t\n\t        _.classList.remove(CLS.DROPZONE);\n\t        events.dispatch(_, EV.DRAGLEAVE, { bubbles: false, cancelable: false });\n\t    }\n\t\n\t    if (currentDragSet) {\n\t        var nodeSet = bubbleset.closestNodeSet(event.target);\n\t\n\t        if (nodeSet && nodeSet !== currentDragSet) {\n\t            var list = select.get(currentDragSet);\n\t            var checkBubbleDrop = nodeSet.options('checkBubbleDrop');\n\t\n\t            if (list.length && checkBubbleDrop(list)) {\n\t                bubbleset.moveBubbles(currentDragSet, nodeSet, list);\n\t                context.setTimeout(onDropSuccess, 0, currentDragSet, nodeSet);\n\t            }\n\t        }\n\t\n\t        var tmpDragSet = currentDragSet;\n\t        currentDragSet = null;\n\t\n\t        tmpDragSet.classList.remove(CLS.DRAGSTART);\n\t        events.dispatch(tmpDragSet, EV.DROP, { bubbles: false, cancelable: false });\n\t        events.dispatch(tmpDragSet, EV.DRAGEND, { bubbles: false, cancelable: false, detail: { target: select.head(tmpDragSet) } });\n\t    }\n\t}\n\t\n\tfunction onMousemove(dragSet) {\n\t    var drag = dragSet.__drag__;\n\t    if (!drag) {\n\t        return;\n\t    }\n\t\n\t    if (!currentDragSet) {\n\t        var selection = context.getSelection();\n\t        selection && selection.removeAllRanges();\n\t\n\t        currentDragSet = dragSet;\n\t        currentDragSet.classList.add(CLS.DRAGSTART);\n\t        select.add(drag.nodeBubble);\n\t\n\t        var moveElement = void 0;\n\t\n\t        var list = select.get(currentDragSet);\n\t\n\t        if (list.length === 1) {\n\t            moveElement = drag.nodeBubble.cloneNode(true);\n\t        }\n\t\n\t        if (!moveElement) {\n\t            moveElement = getDragImage();\n\t            drag.nodeOffsetX = DRAG_IMG.w;\n\t            drag.nodeOffsetY = DRAG_IMG.h;\n\t        }\n\t\n\t        currentDragElement = document.body.appendChild(document.createElement('div'));\n\t        currentDragElement.style.cssText = 'position:absolute;z-index:9999;pointer-events:none;top:0;left:0;';\n\t        currentDragElement.appendChild(moveElement);\n\t\n\t        events.dispatch(currentDragSet, EV.DRAGSTART, { bubbles: false, cancelable: false, detail: { target: select.head(currentDragSet) } });\n\t    }\n\t\n\t    drag.x = event.clientX;\n\t    drag.y = event.clientY;\n\t    onScroll(dragSet);\n\t\n\t    var nodeSet = bubbleset.closestNodeSet(event.target);\n\t    if (nodeSet && nodeSet !== currentDragSet) {\n\t        if (currentMoveSet && currentMoveSet !== nodeSet) {\n\t            currentMoveSet.classList.remove(CLS.DROPZONE);\n\t            nodeSet.classList.add(CLS.DROPZONE);\n\t            currentMoveSet = nodeSet;\n\t            events.dispatch(currentMoveSet, EV.DRAGENTER, { bubbles: false, cancelable: false });\n\t        } else if (!currentMoveSet) {\n\t            nodeSet.classList.add(CLS.DROPZONE);\n\t            currentMoveSet = nodeSet;\n\t            events.dispatch(currentMoveSet, EV.DRAGENTER, { bubbles: false, cancelable: false });\n\t        }\n\t    } else if (currentMoveSet) {\n\t        var _ = currentMoveSet;\n\t        currentMoveSet = null;\n\t\n\t        _.classList.remove(CLS.DROPZONE);\n\t        events.dispatch(_, EV.DRAGLEAVE, { bubbles: false, cancelable: false });\n\t    }\n\t}\n\t\n\tfunction onScroll(dragSet) {\n\t    var drag = dragSet.__drag__;\n\t    if (!drag || !currentDragElement) {\n\t        return;\n\t    }\n\t\n\t    var x = drag.x - drag.nodeOffsetX + events.scrollX();\n\t    var y = drag.y - drag.nodeOffsetY + events.scrollY();\n\t\n\t    if (Modernizr.csstransforms3d) {\n\t        currentDragElement.style.transform = 'translate3d(' + x + 'px, ' + y + 'px, 0px)';\n\t    } else if (Modernizr.csstransforms) {\n\t        currentDragElement.style.transform = 'translate(' + x + 'px, ' + y + 'px)';\n\t    } else {\n\t        currentDragElement.style.top = y + 'px';\n\t        currentDragElement.style.left = x + 'px';\n\t    }\n\t}\n\n/***/ },\n/* 20 */\n/***/ function(module, exports) {\n\n\t;(function(window){\n\t/*!\n\t * modernizr v3.3.1\n\t * Build http://modernizr.com/download?-csstransforms-csstransforms3d-dontmin\n\t *\n\t * Copyright (c)\n\t *  Faruk Ates\n\t *  Paul Irish\n\t *  Alex Sexton\n\t *  Ryan Seddon\n\t *  Patrick Kettner\n\t *  Stu Cox\n\t *  Richard Herrera\n\t\n\t * MIT License\n\t */\n\t\n\t/*\n\t * Modernizr tests which native CSS3 and HTML5 features are available in the\n\t * current UA and makes the results available to you in two ways: as properties on\n\t * a global `Modernizr` object, and as classes on the `<html>` element. This\n\t * information allows you to progressively enhance your pages with a granular level\n\t * of control over the experience.\n\t*/\n\t\n\t;(function(window, document, undefined){\n\t  var tests = [];\n\t  \n\t\n\t  /**\n\t   *\n\t   * ModernizrProto is the constructor for Modernizr\n\t   *\n\t   * @class\n\t   * @access public\n\t   */\n\t\n\t  var ModernizrProto = {\n\t    // The current version, dummy\n\t    _version: '3.3.1',\n\t\n\t    // Any settings that don't work as separate modules\n\t    // can go in here as configuration.\n\t    _config: {\n\t      'classPrefix': '',\n\t      'enableClasses': true,\n\t      'enableJSClass': true,\n\t      'usePrefixes': true\n\t    },\n\t\n\t    // Queue of tests\n\t    _q: [],\n\t\n\t    // Stub these for people who are listening\n\t    on: function(test, cb) {\n\t      // I don't really think people should do this, but we can\n\t      // safe guard it a bit.\n\t      // -- NOTE:: this gets WAY overridden in src/addTest for actual async tests.\n\t      // This is in case people listen to synchronous tests. I would leave it out,\n\t      // but the code to *disallow* sync tests in the real version of this\n\t      // function is actually larger than this.\n\t      var self = this;\n\t      setTimeout(function() {\n\t        cb(self[test]);\n\t      }, 0);\n\t    },\n\t\n\t    addTest: function(name, fn, options) {\n\t      tests.push({name: name, fn: fn, options: options});\n\t    },\n\t\n\t    addAsyncTest: function(fn) {\n\t      tests.push({name: null, fn: fn});\n\t    }\n\t  };\n\t\n\t  \n\t\n\t  // Fake some of Object.create so we can force non test results to be non \"own\" properties.\n\t  var Modernizr = function() {};\n\t  Modernizr.prototype = ModernizrProto;\n\t\n\t  // Leak modernizr globally when you `require` it rather than force it here.\n\t  // Overwrite name so constructor name is nicer :D\n\t  Modernizr = new Modernizr();\n\t\n\t  \n\t\n\t  var classes = [];\n\t  \n\t\n\t  /**\n\t   * is returns a boolean if the typeof an obj is exactly type.\n\t   *\n\t   * @access private\n\t   * @function is\n\t   * @param {*} obj - A thing we want to check the type of\n\t   * @param {string} type - A string to compare the typeof against\n\t   * @returns {boolean}\n\t   */\n\t\n\t  function is(obj, type) {\n\t    return typeof obj === type;\n\t  }\n\t  ;\n\t\n\t  /**\n\t   * Run through all tests and detect their support in the current UA.\n\t   *\n\t   * @access private\n\t   */\n\t\n\t  function testRunner() {\n\t    var featureNames;\n\t    var feature;\n\t    var aliasIdx;\n\t    var result;\n\t    var nameIdx;\n\t    var featureName;\n\t    var featureNameSplit;\n\t\n\t    for (var featureIdx in tests) {\n\t      if (tests.hasOwnProperty(featureIdx)) {\n\t        featureNames = [];\n\t        feature = tests[featureIdx];\n\t        // run the test, throw the return value into the Modernizr,\n\t        // then based on that boolean, define an appropriate className\n\t        // and push it into an array of classes we'll join later.\n\t        //\n\t        // If there is no name, it's an 'async' test that is run,\n\t        // but not directly added to the object. That should\n\t        // be done with a post-run addTest call.\n\t        if (feature.name) {\n\t          featureNames.push(feature.name.toLowerCase());\n\t\n\t          if (feature.options && feature.options.aliases && feature.options.aliases.length) {\n\t            // Add all the aliases into the names list\n\t            for (aliasIdx = 0; aliasIdx < feature.options.aliases.length; aliasIdx++) {\n\t              featureNames.push(feature.options.aliases[aliasIdx].toLowerCase());\n\t            }\n\t          }\n\t        }\n\t\n\t        // Run the test, or use the raw value if it's not a function\n\t        result = is(feature.fn, 'function') ? feature.fn() : feature.fn;\n\t\n\t\n\t        // Set each of the names on the Modernizr object\n\t        for (nameIdx = 0; nameIdx < featureNames.length; nameIdx++) {\n\t          featureName = featureNames[nameIdx];\n\t          // Support dot properties as sub tests. We don't do checking to make sure\n\t          // that the implied parent tests have been added. You must call them in\n\t          // order (either in the test, or make the parent test a dependency).\n\t          //\n\t          // Cap it to TWO to make the logic simple and because who needs that kind of subtesting\n\t          // hashtag famous last words\n\t          featureNameSplit = featureName.split('.');\n\t\n\t          if (featureNameSplit.length === 1) {\n\t            Modernizr[featureNameSplit[0]] = result;\n\t          } else {\n\t            // cast to a Boolean, if not one already\n\t            /* jshint -W053 */\n\t            if (Modernizr[featureNameSplit[0]] && !(Modernizr[featureNameSplit[0]] instanceof Boolean)) {\n\t              Modernizr[featureNameSplit[0]] = new Boolean(Modernizr[featureNameSplit[0]]);\n\t            }\n\t\n\t            Modernizr[featureNameSplit[0]][featureNameSplit[1]] = result;\n\t          }\n\t\n\t          classes.push((result ? '' : 'no-') + featureNameSplit.join('-'));\n\t        }\n\t      }\n\t    }\n\t  }\n\t  ;\n\t\n\t  /**\n\t   * If the browsers follow the spec, then they would expose vendor-specific style as:\n\t   *   elem.style.WebkitBorderRadius\n\t   * instead of something like the following, which would be technically incorrect:\n\t   *   elem.style.webkitBorderRadius\n\t\n\t   * Webkit ghosts their properties in lowercase but Opera & Moz do not.\n\t   * Microsoft uses a lowercase `ms` instead of the correct `Ms` in IE8+\n\t   *   erik.eae.net/archives/2008/03/10/21.48.10/\n\t\n\t   * More here: github.com/Modernizr/Modernizr/issues/issue/21\n\t   *\n\t   * @access private\n\t   * @returns {string} The string representing the vendor-specific style properties\n\t   */\n\t\n\t  var omPrefixes = 'Moz O ms Webkit';\n\t  \n\t\n\t  var cssomPrefixes = (ModernizrProto._config.usePrefixes ? omPrefixes.split(' ') : []);\n\t  ModernizrProto._cssomPrefixes = cssomPrefixes;\n\t  \n\t\n\t\n\t  /**\n\t   * contains checks to see if a string contains another string\n\t   *\n\t   * @access private\n\t   * @function contains\n\t   * @param {string} str - The string we want to check for substrings\n\t   * @param {string} substr - The substring we want to search the first string for\n\t   * @returns {boolean}\n\t   */\n\t\n\t  function contains(str, substr) {\n\t    return !!~('' + str).indexOf(substr);\n\t  }\n\t\n\t  ;\n\t\n\t  /**\n\t   * docElement is a convenience wrapper to grab the root element of the document\n\t   *\n\t   * @access private\n\t   * @returns {HTMLElement|SVGElement} The root element of the document\n\t   */\n\t\n\t  var docElement = document.documentElement;\n\t  \n\t\n\t  /**\n\t   * A convenience helper to check if the document we are running in is an SVG document\n\t   *\n\t   * @access private\n\t   * @returns {boolean}\n\t   */\n\t\n\t  var isSVG = docElement.nodeName.toLowerCase() === 'svg';\n\t  \n\t\n\t  /**\n\t   * createElement is a convenience wrapper around document.createElement. Since we\n\t   * use createElement all over the place, this allows for (slightly) smaller code\n\t   * as well as abstracting away issues with creating elements in contexts other than\n\t   * HTML documents (e.g. SVG documents).\n\t   *\n\t   * @access private\n\t   * @function createElement\n\t   * @returns {HTMLElement|SVGElement} An HTML or SVG element\n\t   */\n\t\n\t  function createElement() {\n\t    if (typeof document.createElement !== 'function') {\n\t      // This is the case in IE7, where the type of createElement is \"object\".\n\t      // For this reason, we cannot call apply() as Object is not a Function.\n\t      return document.createElement(arguments[0]);\n\t    } else if (isSVG) {\n\t      return document.createElementNS.call(document, 'http://www.w3.org/2000/svg', arguments[0]);\n\t    } else {\n\t      return document.createElement.apply(document, arguments);\n\t    }\n\t  }\n\t\n\t  ;\n\t\n\t  /**\n\t   * Create our \"modernizr\" element that we do most feature tests on.\n\t   *\n\t   * @access private\n\t   */\n\t\n\t  var modElem = {\n\t    elem: createElement('modernizr')\n\t  };\n\t\n\t  // Clean up this element\n\t  Modernizr._q.push(function() {\n\t    delete modElem.elem;\n\t  });\n\t\n\t  \n\t\n\t  var mStyle = {\n\t    style: modElem.elem.style\n\t  };\n\t\n\t  // kill ref for gc, must happen before mod.elem is removed, so we unshift on to\n\t  // the front of the queue.\n\t  Modernizr._q.unshift(function() {\n\t    delete mStyle.style;\n\t  });\n\t\n\t  \n\t\n\t  /**\n\t   * getBody returns the body of a document, or an element that can stand in for\n\t   * the body if a real body does not exist\n\t   *\n\t   * @access private\n\t   * @function getBody\n\t   * @returns {HTMLElement|SVGElement} Returns the real body of a document, or an\n\t   * artificially created element that stands in for the body\n\t   */\n\t\n\t  function getBody() {\n\t    // After page load injecting a fake body doesn't work so check if body exists\n\t    var body = document.body;\n\t\n\t    if (!body) {\n\t      // Can't use the real body create a fake one.\n\t      body = createElement(isSVG ? 'svg' : 'body');\n\t      body.fake = true;\n\t    }\n\t\n\t    return body;\n\t  }\n\t\n\t  ;\n\t\n\t  /**\n\t   * injectElementWithStyles injects an element with style element and some CSS rules\n\t   *\n\t   * @access private\n\t   * @function injectElementWithStyles\n\t   * @param {string} rule - String representing a css rule\n\t   * @param {function} callback - A function that is used to test the injected element\n\t   * @param {number} [nodes] - An integer representing the number of additional nodes you want injected\n\t   * @param {string[]} [testnames] - An array of strings that are used as ids for the additional nodes\n\t   * @returns {boolean}\n\t   */\n\t\n\t  function injectElementWithStyles(rule, callback, nodes, testnames) {\n\t    var mod = 'modernizr';\n\t    var style;\n\t    var ret;\n\t    var node;\n\t    var docOverflow;\n\t    var div = createElement('div');\n\t    var body = getBody();\n\t\n\t    if (parseInt(nodes, 10)) {\n\t      // In order not to give false positives we create a node for each test\n\t      // This also allows the method to scale for unspecified uses\n\t      while (nodes--) {\n\t        node = createElement('div');\n\t        node.id = testnames ? testnames[nodes] : mod + (nodes + 1);\n\t        div.appendChild(node);\n\t      }\n\t    }\n\t\n\t    style = createElement('style');\n\t    style.type = 'text/css';\n\t    style.id = 's' + mod;\n\t\n\t    // IE6 will false positive on some tests due to the style element inside the test div somehow interfering offsetHeight, so insert it into body or fakebody.\n\t    // Opera will act all quirky when injecting elements in documentElement when page is served as xml, needs fakebody too. #270\n\t    (!body.fake ? div : body).appendChild(style);\n\t    body.appendChild(div);\n\t\n\t    if (style.styleSheet) {\n\t      style.styleSheet.cssText = rule;\n\t    } else {\n\t      style.appendChild(document.createTextNode(rule));\n\t    }\n\t    div.id = mod;\n\t\n\t    if (body.fake) {\n\t      //avoid crashing IE8, if background image is used\n\t      body.style.background = '';\n\t      //Safari 5.13/5.1.4 OSX stops loading if ::-webkit-scrollbar is used and scrollbars are visible\n\t      body.style.overflow = 'hidden';\n\t      docOverflow = docElement.style.overflow;\n\t      docElement.style.overflow = 'hidden';\n\t      docElement.appendChild(body);\n\t    }\n\t\n\t    ret = callback(div, rule);\n\t    // If this is done after page load we don't want to remove the body so check if body exists\n\t    if (body.fake) {\n\t      body.parentNode.removeChild(body);\n\t      docElement.style.overflow = docOverflow;\n\t      // Trigger layout so kinetic scrolling isn't disabled in iOS6+\n\t      docElement.offsetHeight;\n\t    } else {\n\t      div.parentNode.removeChild(div);\n\t    }\n\t\n\t    return !!ret;\n\t\n\t  }\n\t\n\t  ;\n\t\n\t  /**\n\t   * domToCSS takes a camelCase string and converts it to kebab-case\n\t   * e.g. boxSizing -> box-sizing\n\t   *\n\t   * @access private\n\t   * @function domToCSS\n\t   * @param {string} name - String name of camelCase prop we want to convert\n\t   * @returns {string} The kebab-case version of the supplied name\n\t   */\n\t\n\t  function domToCSS(name) {\n\t    return name.replace(/([A-Z])/g, function(str, m1) {\n\t      return '-' + m1.toLowerCase();\n\t    }).replace(/^ms-/, '-ms-');\n\t  }\n\t  ;\n\t\n\t  /**\n\t   * nativeTestProps allows for us to use native feature detection functionality if available.\n\t   * some prefixed form, or false, in the case of an unsupported rule\n\t   *\n\t   * @access private\n\t   * @function nativeTestProps\n\t   * @param {array} props - An array of property names\n\t   * @param {string} value - A string representing the value we want to check via @supports\n\t   * @returns {boolean|undefined} A boolean when @supports exists, undefined otherwise\n\t   */\n\t\n\t  // Accepts a list of property names and a single value\n\t  // Returns `undefined` if native detection not available\n\t  function nativeTestProps(props, value) {\n\t    var i = props.length;\n\t    // Start with the JS API: http://www.w3.org/TR/css3-conditional/#the-css-interface\n\t    if ('CSS' in window && 'supports' in window.CSS) {\n\t      // Try every prefixed variant of the property\n\t      while (i--) {\n\t        if (window.CSS.supports(domToCSS(props[i]), value)) {\n\t          return true;\n\t        }\n\t      }\n\t      return false;\n\t    }\n\t    // Otherwise fall back to at-rule (for Opera 12.x)\n\t    else if ('CSSSupportsRule' in window) {\n\t      // Build a condition string for every prefixed variant\n\t      var conditionText = [];\n\t      while (i--) {\n\t        conditionText.push('(' + domToCSS(props[i]) + ':' + value + ')');\n\t      }\n\t      conditionText = conditionText.join(' or ');\n\t      return injectElementWithStyles('@supports (' + conditionText + ') { #modernizr { position: absolute; } }', function(node) {\n\t        return getComputedStyle(node, null).position == 'absolute';\n\t      });\n\t    }\n\t    return undefined;\n\t  }\n\t  ;\n\t\n\t  /**\n\t   * cssToDOM takes a kebab-case string and converts it to camelCase\n\t   * e.g. box-sizing -> boxSizing\n\t   *\n\t   * @access private\n\t   * @function cssToDOM\n\t   * @param {string} name - String name of kebab-case prop we want to convert\n\t   * @returns {string} The camelCase version of the supplied name\n\t   */\n\t\n\t  function cssToDOM(name) {\n\t    return name.replace(/([a-z])-([a-z])/g, function(str, m1, m2) {\n\t      return m1 + m2.toUpperCase();\n\t    }).replace(/^-/, '');\n\t  }\n\t  ;\n\t\n\t  // testProps is a generic CSS / DOM property test.\n\t\n\t  // In testing support for a given CSS property, it's legit to test:\n\t  //    `elem.style[styleName] !== undefined`\n\t  // If the property is supported it will return an empty string,\n\t  // if unsupported it will return undefined.\n\t\n\t  // We'll take advantage of this quick test and skip setting a style\n\t  // on our modernizr element, but instead just testing undefined vs\n\t  // empty string.\n\t\n\t  // Property names can be provided in either camelCase or kebab-case.\n\t\n\t  function testProps(props, prefixed, value, skipValueTest) {\n\t    skipValueTest = is(skipValueTest, 'undefined') ? false : skipValueTest;\n\t\n\t    // Try native detect first\n\t    if (!is(value, 'undefined')) {\n\t      var result = nativeTestProps(props, value);\n\t      if (!is(result, 'undefined')) {\n\t        return result;\n\t      }\n\t    }\n\t\n\t    // Otherwise do it properly\n\t    var afterInit, i, propsLength, prop, before;\n\t\n\t    // If we don't have a style element, that means we're running async or after\n\t    // the core tests, so we'll need to create our own elements to use\n\t\n\t    // inside of an SVG element, in certain browsers, the `style` element is only\n\t    // defined for valid tags. Therefore, if `modernizr` does not have one, we\n\t    // fall back to a less used element and hope for the best.\n\t    var elems = ['modernizr', 'tspan'];\n\t    while (!mStyle.style) {\n\t      afterInit = true;\n\t      mStyle.modElem = createElement(elems.shift());\n\t      mStyle.style = mStyle.modElem.style;\n\t    }\n\t\n\t    // Delete the objects if we created them.\n\t    function cleanElems() {\n\t      if (afterInit) {\n\t        delete mStyle.style;\n\t        delete mStyle.modElem;\n\t      }\n\t    }\n\t\n\t    propsLength = props.length;\n\t    for (i = 0; i < propsLength; i++) {\n\t      prop = props[i];\n\t      before = mStyle.style[prop];\n\t\n\t      if (contains(prop, '-')) {\n\t        prop = cssToDOM(prop);\n\t      }\n\t\n\t      if (mStyle.style[prop] !== undefined) {\n\t\n\t        // If value to test has been passed in, do a set-and-check test.\n\t        // 0 (integer) is a valid property value, so check that `value` isn't\n\t        // undefined, rather than just checking it's truthy.\n\t        if (!skipValueTest && !is(value, 'undefined')) {\n\t\n\t          // Needs a try catch block because of old IE. This is slow, but will\n\t          // be avoided in most cases because `skipValueTest` will be used.\n\t          try {\n\t            mStyle.style[prop] = value;\n\t          } catch (e) {}\n\t\n\t          // If the property value has changed, we assume the value used is\n\t          // supported. If `value` is empty string, it'll fail here (because\n\t          // it hasn't changed), which matches how browsers have implemented\n\t          // CSS.supports()\n\t          if (mStyle.style[prop] != before) {\n\t            cleanElems();\n\t            return prefixed == 'pfx' ? prop : true;\n\t          }\n\t        }\n\t        // Otherwise just return true, or the property name if this is a\n\t        // `prefixed()` call\n\t        else {\n\t          cleanElems();\n\t          return prefixed == 'pfx' ? prop : true;\n\t        }\n\t      }\n\t    }\n\t    cleanElems();\n\t    return false;\n\t  }\n\t\n\t  ;\n\t\n\t  /**\n\t   * List of JavaScript DOM values used for tests\n\t   *\n\t   * @memberof Modernizr\n\t   * @name Modernizr._domPrefixes\n\t   * @optionName Modernizr._domPrefixes\n\t   * @optionProp domPrefixes\n\t   * @access public\n\t   * @example\n\t   *\n\t   * Modernizr._domPrefixes is exactly the same as [_prefixes](#modernizr-_prefixes), but rather\n\t   * than kebab-case properties, all properties are their Capitalized variant\n\t   *\n\t   * ```js\n\t   * Modernizr._domPrefixes === [ \"Moz\", \"O\", \"ms\", \"Webkit\" ];\n\t   * ```\n\t   */\n\t\n\t  var domPrefixes = (ModernizrProto._config.usePrefixes ? omPrefixes.toLowerCase().split(' ') : []);\n\t  ModernizrProto._domPrefixes = domPrefixes;\n\t  \n\t\n\t  /**\n\t   * fnBind is a super small [bind](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind) polyfill.\n\t   *\n\t   * @access private\n\t   * @function fnBind\n\t   * @param {function} fn - a function you want to change `this` reference to\n\t   * @param {object} that - the `this` you want to call the function with\n\t   * @returns {function} The wrapped version of the supplied function\n\t   */\n\t\n\t  function fnBind(fn, that) {\n\t    return function() {\n\t      return fn.apply(that, arguments);\n\t    };\n\t  }\n\t\n\t  ;\n\t\n\t  /**\n\t   * testDOMProps is a generic DOM property test; if a browser supports\n\t   *   a certain property, it won't return undefined for it.\n\t   *\n\t   * @access private\n\t   * @function testDOMProps\n\t   * @param {array.<string>} props - An array of properties to test for\n\t   * @param {object} obj - An object or Element you want to use to test the parameters again\n\t   * @param {boolean|object} elem - An Element to bind the property lookup again. Use `false` to prevent the check\n\t   */\n\t  function testDOMProps(props, obj, elem) {\n\t    var item;\n\t\n\t    for (var i in props) {\n\t      if (props[i] in obj) {\n\t\n\t        // return the property name as a string\n\t        if (elem === false) {\n\t          return props[i];\n\t        }\n\t\n\t        item = obj[props[i]];\n\t\n\t        // let's bind a function\n\t        if (is(item, 'function')) {\n\t          // bind to obj unless overriden\n\t          return fnBind(item, elem || obj);\n\t        }\n\t\n\t        // return the unbound function or obj or value\n\t        return item;\n\t      }\n\t    }\n\t    return false;\n\t  }\n\t\n\t  ;\n\t\n\t  /**\n\t   * testPropsAll tests a list of DOM properties we want to check against.\n\t   * We specify literally ALL possible (known and/or likely) properties on\n\t   * the element including the non-vendor prefixed one, for forward-\n\t   * compatibility.\n\t   *\n\t   * @access private\n\t   * @function testPropsAll\n\t   * @param {string} prop - A string of the property to test for\n\t   * @param {string|object} [prefixed] - An object to check the prefixed properties on. Use a string to skip\n\t   * @param {HTMLElement|SVGElement} [elem] - An element used to test the property and value against\n\t   * @param {string} [value] - A string of a css value\n\t   * @param {boolean} [skipValueTest] - An boolean representing if you want to test if value sticks when set\n\t   */\n\t  function testPropsAll(prop, prefixed, elem, value, skipValueTest) {\n\t\n\t    var ucProp = prop.charAt(0).toUpperCase() + prop.slice(1),\n\t    props = (prop + ' ' + cssomPrefixes.join(ucProp + ' ') + ucProp).split(' ');\n\t\n\t    // did they call .prefixed('boxSizing') or are we just testing a prop?\n\t    if (is(prefixed, 'string') || is(prefixed, 'undefined')) {\n\t      return testProps(props, prefixed, value, skipValueTest);\n\t\n\t      // otherwise, they called .prefixed('requestAnimationFrame', window[, elem])\n\t    } else {\n\t      props = (prop + ' ' + (domPrefixes).join(ucProp + ' ') + ucProp).split(' ');\n\t      return testDOMProps(props, prefixed, elem);\n\t    }\n\t  }\n\t\n\t  // Modernizr.testAllProps() investigates whether a given style property,\n\t  // or any of its vendor-prefixed variants, is recognized\n\t  //\n\t  // Note that the property names must be provided in the camelCase variant.\n\t  // Modernizr.testAllProps('boxSizing')\n\t  ModernizrProto.testAllProps = testPropsAll;\n\t\n\t  \n\t\n\t  /**\n\t   * testAllProps determines whether a given CSS property is supported in the browser\n\t   *\n\t   * @memberof Modernizr\n\t   * @name Modernizr.testAllProps\n\t   * @optionName Modernizr.testAllProps()\n\t   * @optionProp testAllProps\n\t   * @access public\n\t   * @function testAllProps\n\t   * @param {string} prop - String naming the property to test (either camelCase or kebab-case)\n\t   * @param {string} [value] - String of the value to test\n\t   * @param {boolean} [skipValueTest=false] - Whether to skip testing that the value is supported when using non-native detection\n\t   * @example\n\t   *\n\t   * testAllProps determines whether a given CSS property, in some prefixed form,\n\t   * is supported by the browser.\n\t   *\n\t   * ```js\n\t   * testAllProps('boxSizing')  // true\n\t   * ```\n\t   *\n\t   * It can optionally be given a CSS value in string form to test if a property\n\t   * value is valid\n\t   *\n\t   * ```js\n\t   * testAllProps('display', 'block') // true\n\t   * testAllProps('display', 'penguin') // false\n\t   * ```\n\t   *\n\t   * A boolean can be passed as a third parameter to skip the value check when\n\t   * native detection (@supports) isn't available.\n\t   *\n\t   * ```js\n\t   * testAllProps('shapeOutside', 'content-box', true);\n\t   * ```\n\t   */\n\t\n\t  function testAllProps(prop, value, skipValueTest) {\n\t    return testPropsAll(prop, undefined, undefined, value, skipValueTest);\n\t  }\n\t  ModernizrProto.testAllProps = testAllProps;\n\t  \n\t/*!\n\t{\n\t  \"name\": \"CSS Transforms\",\n\t  \"property\": \"csstransforms\",\n\t  \"caniuse\": \"transforms2d\",\n\t  \"tags\": [\"css\"]\n\t}\n\t!*/\n\t\n\t  Modernizr.addTest('csstransforms', function() {\n\t    // Android < 3.0 is buggy, so we sniff and blacklist\n\t    // http://git.io/hHzL7w\n\t    return navigator.userAgent.indexOf('Android 2.') === -1 &&\n\t           testAllProps('transform', 'scale(1)', true);\n\t  });\n\t\n\t\n\t  /**\n\t   * testStyles injects an element with style element and some CSS rules\n\t   *\n\t   * @memberof Modernizr\n\t   * @name Modernizr.testStyles\n\t   * @optionName Modernizr.testStyles()\n\t   * @optionProp testStyles\n\t   * @access public\n\t   * @function testStyles\n\t   * @param {string} rule - String representing a css rule\n\t   * @param {function} callback - A function that is used to test the injected element\n\t   * @param {number} [nodes] - An integer representing the number of additional nodes you want injected\n\t   * @param {string[]} [testnames] - An array of strings that are used as ids for the additional nodes\n\t   * @returns {boolean}\n\t   * @example\n\t   *\n\t   * `Modernizr.testStyles` takes a CSS rule and injects it onto the current page\n\t   * along with (possibly multiple) DOM elements. This lets you check for features\n\t   * that can not be detected by simply checking the [IDL](https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Interface_development_guide/IDL_interface_rules).\n\t   *\n\t   * ```js\n\t   * Modernizr.testStyles('#modernizr { width: 9px; color: papayawhip; }', function(elem, rule) {\n\t   *   // elem is the first DOM node in the page (by default #modernizr)\n\t   *   // rule is the first argument you supplied - the CSS rule in string form\n\t   *\n\t   *   addTest('widthworks', elem.style.width === '9px')\n\t   * });\n\t   * ```\n\t   *\n\t   * If your test requires multiple nodes, you can include a third argument\n\t   * indicating how many additional div elements to include on the page. The\n\t   * additional nodes are injected as children of the `elem` that is returned as\n\t   * the first argument to the callback.\n\t   *\n\t   * ```js\n\t   * Modernizr.testStyles('#modernizr {width: 1px}; #modernizr2 {width: 2px}', function(elem) {\n\t   *   document.getElementById('modernizr').style.width === '1px'; // true\n\t   *   document.getElementById('modernizr2').style.width === '2px'; // true\n\t   *   elem.firstChild === document.getElementById('modernizr2'); // true\n\t   * }, 1);\n\t   * ```\n\t   *\n\t   * By default, all of the additional elements have an ID of `modernizr[n]`, where\n\t   * `n` is its index (e.g. the first additional, second overall is `#modernizr2`,\n\t   * the second additional is `#modernizr3`, etc.).\n\t   * If you want to have more meaningful IDs for your function, you can provide\n\t   * them as the fourth argument, as an array of strings\n\t   *\n\t   * ```js\n\t   * Modernizr.testStyles('#foo {width: 10px}; #bar {height: 20px}', function(elem) {\n\t   *   elem.firstChild === document.getElementById('foo'); // true\n\t   *   elem.lastChild === document.getElementById('bar'); // true\n\t   * }, 2, ['foo', 'bar']);\n\t   * ```\n\t   *\n\t   */\n\t\n\t  var testStyles = ModernizrProto.testStyles = injectElementWithStyles;\n\t  \n\t/*!\n\t{\n\t  \"name\": \"CSS Supports\",\n\t  \"property\": \"supports\",\n\t  \"caniuse\": \"css-featurequeries\",\n\t  \"tags\": [\"css\"],\n\t  \"builderAliases\": [\"css_supports\"],\n\t  \"notes\": [{\n\t    \"name\": \"W3 Spec\",\n\t    \"href\": \"http://dev.w3.org/csswg/css3-conditional/#at-supports\"\n\t  },{\n\t    \"name\": \"Related Github Issue\",\n\t    \"href\": \"github.com/Modernizr/Modernizr/issues/648\"\n\t  },{\n\t    \"name\": \"W3 Info\",\n\t    \"href\": \"http://dev.w3.org/csswg/css3-conditional/#the-csssupportsrule-interface\"\n\t  }]\n\t}\n\t!*/\n\t\n\t  var newSyntax = 'CSS' in window && 'supports' in window.CSS;\n\t  var oldSyntax = 'supportsCSS' in window;\n\t  Modernizr.addTest('supports', newSyntax || oldSyntax);\n\t\n\t/*!\n\t{\n\t  \"name\": \"CSS Transforms 3D\",\n\t  \"property\": \"csstransforms3d\",\n\t  \"caniuse\": \"transforms3d\",\n\t  \"tags\": [\"css\"],\n\t  \"warnings\": [\n\t    \"Chrome may occassionally fail this test on some systems; more info: https://code.google.com/p/chromium/issues/detail?id=129004\"\n\t  ]\n\t}\n\t!*/\n\t\n\t  Modernizr.addTest('csstransforms3d', function() {\n\t    var ret = !!testAllProps('perspective', '1px', true);\n\t    var usePrefix = Modernizr._config.usePrefixes;\n\t\n\t    // Webkit's 3D transforms are passed off to the browser's own graphics renderer.\n\t    //   It works fine in Safari on Leopard and Snow Leopard, but not in Chrome in\n\t    //   some conditions. As a result, Webkit typically recognizes the syntax but\n\t    //   will sometimes throw a false positive, thus we must do a more thorough check:\n\t    if (ret && (!usePrefix || 'webkitPerspective' in docElement.style)) {\n\t      var mq;\n\t      var defaultStyle = '#modernizr{width:0;height:0}';\n\t      // Use CSS Conditional Rules if available\n\t      if (Modernizr.supports) {\n\t        mq = '@supports (perspective: 1px)';\n\t      } else {\n\t        // Otherwise, Webkit allows this media query to succeed only if the feature is enabled.\n\t        // `@media (transform-3d),(-webkit-transform-3d){ ... }`\n\t        mq = '@media (transform-3d)';\n\t        if (usePrefix) {\n\t          mq += ',(-webkit-transform-3d)';\n\t        }\n\t      }\n\t\n\t      mq += '{#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}';\n\t\n\t      testStyles(defaultStyle + mq, function(elem) {\n\t        ret = elem.offsetWidth === 7 && elem.offsetHeight === 18;\n\t      });\n\t    }\n\t\n\t    return ret;\n\t  });\n\t\n\t\n\t  // Run each test\n\t  testRunner();\n\t\n\t  delete ModernizrProto.addTest;\n\t  delete ModernizrProto.addAsyncTest;\n\t\n\t  // Run the things that are supposed to run after the tests\n\t  for (var i = 0; i < Modernizr._q.length; i++) {\n\t    Modernizr._q[i]();\n\t  }\n\t\n\t  // Leak Modernizr namespace\n\t  window.Modernizr = Modernizr;\n\t\n\t\n\t;\n\t\n\t})(window, document);\n\tmodule.exports = window.Modernizr;\n\t})(window);\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar events = __webpack_require__(10);\n\t\n\tvar _require = __webpack_require__(12),\n\t    PROPS = _require.PROPS;\n\t\n\t/**\n\t * @param {Event} event\n\t * @returns {?boolean}\n\t */\n\t\n\t\n\tmodule.exports = function (event) {\n\t    if (event.currentTarget[PROPS.LOCK_COPY]) {\n\t        return events.prevent(event);\n\t    }\n\t};\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar events = __webpack_require__(10);\n\tvar bubbleset = __webpack_require__(3);\n\t\n\tvar _require = __webpack_require__(12),\n\t    PROPS = _require.PROPS;\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t * @param {HTMLElement} [sharedData.nodeBubble]\n\t * @param {boolean} [sharedData.isDblclick]\n\t * @returns {?boolean}\n\t */\n\t\n\t\n\tmodule.exports = function (event, sharedData) {\n\t    var nodeEditor = bubbleset.closestNodeSet(event.target);\n\t    if (!nodeEditor) {\n\t        return events.prevent(event);\n\t    }\n\t\n\t    sharedData.nodeEditor = nodeEditor;\n\t    sharedData.nodeBubble = bubbleset.closestNodeBubble(event.target);\n\t    sharedData.isDblclick = false;\n\t    sharedData.canAddBubble = nodeEditor.canAddBubble();\n\t\n\t    if (sharedData.nodeBubble) {\n\t        var clickTime = Date.now();\n\t        sharedData.isDblclick = nodeEditor[PROPS.CLICK_TIME] && clickTime - nodeEditor[PROPS.CLICK_TIME] < 200;\n\t\n\t        nodeEditor[PROPS.CLICK_TIME] = clickTime;\n\t    }\n\t};\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar raf = __webpack_require__(7);\n\tvar context = __webpack_require__(1);\n\tvar events = __webpack_require__(10);\n\t\n\tvar _require = __webpack_require__(12),\n\t    PROPS = _require.PROPS;\n\t\n\t/**\n\t * @param {Event} event\n\t * @returns {?boolean}\n\t */\n\t\n\t\n\tmodule.exports = function (event) {\n\t    var nodeEditor = event.currentTarget;\n\t    if (nodeEditor[PROPS.LOCK_COPY]) {\n\t        events.prevent(event);\n\t        delete nodeEditor[PROPS.LOCK_COPY];\n\t\n\t        // Safary 10 не сбрасывает курсор без задержки\n\t        raf(function () {\n\t            var selection = context.getSelection();\n\t            selection && selection.removeAllRanges();\n\t        });\n\t\n\t        return false;\n\t    }\n\t};\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar utils = __webpack_require__(6);\n\tvar events = __webpack_require__(10);\n\t\n\tvar _require = __webpack_require__(12),\n\t    KEY = _require.KEY;\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\t\n\t\n\tmodule.exports = function (event, sharedData) {\n\t    var code = events.keyCode(event);\n\t    sharedData.nodeEditor = event.currentTarget;\n\t\n\t    switch (code) {\n\t        case KEY.Left:\n\t        case KEY.Right:\n\t        case KEY.Delete:\n\t        case KEY.Backspace:\n\t            event.preventDefault();\n\t            sharedData.selection = utils.getSelection(event.currentTarget);\n\t            break;\n\t    }\n\t};\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar bubble = __webpack_require__(4);\n\t\n\t/**\n\t * @param {Event} event\n\t */\n\tmodule.exports = function (event) {\n\t  bubble.bubbling(event.currentTarget);\n\t};\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar events = __webpack_require__(10);\n\tvar bubble = __webpack_require__(4);\n\tvar cursor = __webpack_require__(13);\n\tvar utils = __webpack_require__(6);\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {HTMLElement} sharedData.nodeEditor\n\t * @param {HTMLElement} [sharedData.nodeBubble]\n\t * @param {boolean} sharedData.isDblclick\n\t */\n\tmodule.exports = function (event, sharedData) {\n\t    var nodeEditor = sharedData.nodeEditor;\n\t    var nodeBubble = sharedData.nodeBubble;\n\t    var isDblclick = sharedData.isDblclick;\n\t\n\t    if (nodeBubble) {\n\t        if (isDblclick) {\n\t            if (!event.shiftKey && !events.metaKey(event)) {\n\t                bubble.edit(nodeEditor, nodeBubble);\n\t            }\n\t        } else if (!nodeEditor.options('selection')) {\n\t            bubble.bubbling(nodeEditor);\n\t            cursor.restore(nodeEditor);\n\t        }\n\t    } else {\n\t        var selection = utils.getSelection(nodeEditor);\n\t\n\t        if (!selection || selection.anchorNode.nodeType !== Node.TEXT_NODE) {\n\t            cursor.restore(nodeEditor);\n\t        }\n\t    }\n\t};\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar bubbleset = __webpack_require__(3);\n\t\n\tmodule.exports = function (event) {\n\t    var nodeEditor = bubbleset.closestNodeSet(event.target);\n\t\n\t    if (!nodeEditor) {\n\t        return;\n\t    }\n\t\n\t    var nodeBubble = bubbleset.closestNodeBubble(event.target);\n\t\n\t    // Don't show cursor if can't add bubble\n\t    if (!nodeBubble && !nodeEditor.canAddBubble()) {\n\t        nodeEditor.focus();\n\t        event.preventDefault();\n\t    }\n\t};\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar raf = __webpack_require__(7);\n\tvar cursor = __webpack_require__(13);\n\tvar context = __webpack_require__(1);\n\t\n\t/**\n\t * @param {Event} event\n\t */\n\tmodule.exports = function (event) {\n\t    var nodeEditor = event.currentTarget;\n\t\n\t    // Don't show cursor if can't add bubble\n\t    if (!nodeEditor.canAddBubble()) {\n\t        // Safary 10 не сбрасывает курсор без задержки\n\t        raf(function () {\n\t            var selection = context.getSelection();\n\t            selection && selection.removeAllRanges();\n\t        });\n\t    }\n\t\n\t    cursor.restore(nodeEditor);\n\t};\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar events = __webpack_require__(10);\n\tvar bubble = __webpack_require__(4);\n\tvar cursor = __webpack_require__(13);\n\tvar text = __webpack_require__(5);\n\tvar bubbleset = __webpack_require__(3);\n\t\n\tvar _require = __webpack_require__(12),\n\t    KEY = _require.KEY;\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isTextSelectAll]\n\t * @param {boolean} [sharedData.isTextSelectedFromBeginToCursor]\n\t * @param {boolean} [sharedData.isEmptyLeft]\n\t * @param {boolean} [sharedData.isEmptyRight]\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\t\n\t\n\tmodule.exports = function (event, sharedData) {\n\t    var code = events.keyCode(event);\n\t    var metaKey = events.metaKey(event);\n\t\n\t    switch (code) {\n\t        case KEY.Esc:\n\t            event.preventDefault();\n\t            bubble.bubbling(sharedData.nodeEditor);\n\t            cursor.restore(sharedData.nodeEditor);\n\t            break;\n\t\n\t        case KEY.Backspace:\n\t            onBackspace(event, sharedData);\n\t            break;\n\t\n\t        case KEY.Delete:\n\t            onDelete(event, sharedData);\n\t            break;\n\t\n\t        case KEY.Left:\n\t            onArrowLeft(event, sharedData);\n\t            break;\n\t\n\t        case KEY.Right:\n\t            onArrowRight(event, sharedData);\n\t            break;\n\t\n\t        case KEY.Home:\n\t            if (event.shiftKey) {\n\t                event.preventDefault();\n\t                sharedData.isTextSelectedFromBeginToCursor = text.selectFromCursorToStrBegin(null, sharedData.nodeEditor);\n\t            }\n\t            break;\n\t\n\t        case KEY.a:\n\t            if (metaKey) {\n\t                event.preventDefault();\n\t                sharedData.isTextSelectAll = text.selectAll(null, sharedData.nodeEditor);\n\t            }\n\t            break;\n\t    }\n\t};\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isEmptyLeft]\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\tfunction onBackspace(event, sharedData) {\n\t    var selection = sharedData.selection;\n\t    if (!selection) {\n\t        return;\n\t    }\n\t\n\t    var nodeEditor = sharedData.nodeEditor;\n\t\n\t    if (!selection.isCollapsed || text.arrowLeft(selection, true)) {\n\t        text.remove(selection);\n\t        nodeEditor.fireInput();\n\t\n\t        // Если после удаления больше нет текста, то, возможно,\n\t        // удалили какой-то бабл во время его редактирования.\n\t        // Нужно оповестить о изменениях\n\t        if (!text.hasNear(selection)) {\n\t            nodeEditor.fireChange();\n\t        }\n\t    } else if (!nodeEditor.options('selection')) {\n\t        var nodeBubble = bubbleset.findBubbleLeft(selection);\n\t\n\t        if (nodeBubble) {\n\t            bubbleset.removeBubbles(nodeEditor, [nodeBubble]);\n\t            nodeEditor.fireChange();\n\t        }\n\t    } else {\n\t        sharedData.isEmptyLeft = true;\n\t    }\n\t}\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isEmptyRight]\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\tfunction onDelete(event, sharedData) {\n\t    var selection = sharedData.selection;\n\t    if (!selection) {\n\t        return;\n\t    }\n\t\n\t    var nodeEditor = sharedData.nodeEditor;\n\t\n\t    if (!selection.isCollapsed || text.arrowRight(selection, true)) {\n\t        text.remove(selection);\n\t        nodeEditor.fireInput();\n\t\n\t        // Если после удаления больше нет текста, то, возможно,\n\t        // удалили какой-то бабл во время его редактирования.\n\t        // Нужно оповестить о изменениях\n\t        if (!text.hasNear(selection)) {\n\t            nodeEditor.fireChange();\n\t        }\n\t    } else if (!nodeEditor.options('selection')) {\n\t        var nodeBubble = bubbleset.findBubbleRight(selection);\n\t\n\t        if (nodeBubble) {\n\t            bubbleset.removeBubbles(nodeEditor, [nodeBubble]);\n\t            nodeEditor.fireChange();\n\t        }\n\t    } else {\n\t        sharedData.isEmptyRight = true;\n\t    }\n\t}\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isEmptyLeft]\n\t * @param {Selection} [sharedData.selection]\n\t */\n\tfunction onArrowLeft(event, sharedData) {\n\t    sharedData.isEmptyLeft = !text.arrowLeft(sharedData.selection, event.shiftKey);\n\t}\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isEmptyRight]\n\t * @param {Selection} [sharedData.selection]\n\t */\n\tfunction onArrowRight(event, sharedData) {\n\t    sharedData.isEmptyRight = !text.arrowRight(sharedData.selection, event.shiftKey);\n\t}\n\n/***/ },\n/* 30 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar events = __webpack_require__(10);\n\tvar bubble = __webpack_require__(4);\n\tvar cursor = __webpack_require__(13);\n\tvar select = __webpack_require__(14);\n\t\n\tvar _require = __webpack_require__(12),\n\t    KEY = _require.KEY;\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t */\n\t\n\t\n\tmodule.exports = function (event, sharedData) {\n\t    var code = events.keyCode(event);\n\t    var nodeEditor = event.currentTarget;\n\t\n\t    sharedData.enterBubbling = false;\n\t\n\t    if (code === KEY.Enter) {\n\t        event.preventDefault();\n\t        if (!nodeEditor.options('disableControls') && !select.getEditable(nodeEditor)) {\n\t            bubble.bubbling(nodeEditor);\n\t            cursor.restore(nodeEditor);\n\t\n\t            sharedData.enterBubbling = true;\n\t        }\n\t    } else if (nodeEditor.canAddBubble()) {\n\t        var separator = nodeEditor.options('separator');\n\t        if (separator && separator.test(String.fromCharCode(code))) {\n\t            var separatorCond = nodeEditor.options('separatorCond');\n\t\n\t            if (!separatorCond || separatorCond(nodeEditor.inputValue)) {\n\t                event.preventDefault();\n\t                bubble.bubbling(nodeEditor);\n\t                cursor.restore(nodeEditor);\n\t            }\n\t        }\n\t    } else {\n\t        event.preventDefault();\n\t    }\n\t};\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar events = __webpack_require__(10);\n\t\n\tvar _require = __webpack_require__(12),\n\t    KEY = _require.KEY;\n\t\n\t/**\n\t * @param {Event} event\n\t */\n\t\n\t\n\tmodule.exports = function (event) {\n\t    var nodeEditor = event.currentTarget;\n\t    var code = events.keyCode(event);\n\t    var isPrintableChar = event.key ? event.key.length === 1 : (code > 47 || code === KEY.Space || code === KEY.Backspace) && code !== KEY.Cmd;\n\t\n\t    if (isPrintableChar && nodeEditor.canAddBubble()) {\n\t        nodeEditor.fireInput();\n\t    }\n\t};\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar raf = __webpack_require__(7);\n\tvar context = __webpack_require__(1);\n\tvar bubble = __webpack_require__(4);\n\tvar cursor = __webpack_require__(13);\n\tvar text = __webpack_require__(5);\n\t\n\tvar _require = __webpack_require__(6),\n\t    isIE = _require.isIE;\n\t\n\tmodule.exports = function (event) {\n\t    event.preventDefault();\n\t    var nodeEditor = event.currentTarget;\n\t\n\t    if (!nodeEditor.canAddBubble()) {\n\t        return;\n\t    }\n\t\n\t    if (context.clipboardData && context.clipboardData.getData) {\n\t        onPasteSuccess(nodeEditor, context.clipboardData.getData('Text'));\n\t    } else if (event.clipboardData) {\n\t        var contentType = 'text/plain';\n\t        var clipboardData = event.clipboardData;\n\t        var data = clipboardData.getData && clipboardData.getData(contentType);\n\t\n\t        if (!onPasteSuccess(nodeEditor, data) && clipboardData.items) {\n\t            Array.prototype.slice.call(clipboardData.items).filter(function (item) {\n\t                return item.kind === 'string' && item.type === contentType;\n\t            }).some(function (item) {\n\t                item.getAsString(function (dataText) {\n\t                    onPasteSuccess(nodeEditor, dataText);\n\t                });\n\t\n\t                return true;\n\t            });\n\t        }\n\t    }\n\t};\n\t\n\tfunction onPasteSuccess(nodeEditor, dataText) {\n\t    var checkBubblePaste = nodeEditor.options('checkBubblePaste');\n\t    var selection = context.getSelection();\n\t    var isBubbling = dataText && selection.isCollapsed && !nodeEditor.inputValue ? checkBubblePaste(dataText) : false;\n\t\n\t    if (text.replaceString(dataText, selection)) {\n\t        if (isBubbling) {\n\t            if (isIE) {\n\t                raf(function () {\n\t                    return onReplaceSuccess(nodeEditor);\n\t                });\n\t            } else {\n\t                onReplaceSuccess(nodeEditor);\n\t            }\n\t        } else {\n\t            nodeEditor.fireInput();\n\t        }\n\t\n\t        return true;\n\t    }\n\t\n\t    return false;\n\t}\n\t\n\tfunction onReplaceSuccess(nodeEditor) {\n\t    bubble.bubbling(nodeEditor);\n\t    nodeEditor.focus();\n\t    raf(function () {\n\t        return cursor.restore(nodeEditor);\n\t    });\n\t}\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar select = __webpack_require__(14);\n\t\n\t/**\n\t * @param {Event} event\n\t */\n\tmodule.exports = function (event) {\n\t  select.clear(event.currentTarget);\n\t};\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar events = __webpack_require__(10);\n\tvar select = __webpack_require__(14);\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {HTMLElement} sharedData.nodeEditor\n\t * @param {HTMLElement} [sharedData.nodeBubble]\n\t * @param {boolean} sharedData.isDblclick\n\t */\n\tmodule.exports = function (event, sharedData) {\n\t    var nodeEditor = sharedData.nodeEditor;\n\t    var nodeBubble = sharedData.nodeBubble;\n\t    var isDblclick = sharedData.isDblclick;\n\t    var canAddBubble = sharedData.canAddBubble;\n\t\n\t    if (nodeBubble) {\n\t        if (events.metaKey(event)) {\n\t            select.add(nodeBubble);\n\t        } else if (event.shiftKey) {\n\t            if (!nodeEditor.startRangeSelect) {\n\t                select.uniq(nodeBubble);\n\t            } else {\n\t                select.range(nodeBubble);\n\t            }\n\t        } else if (!isDblclick) {\n\t            canAddBubble ? select.toggleUniq(nodeBubble) : select.uniq(nodeBubble);\n\t        }\n\t    } else if (canAddBubble) {\n\t        select.clear(nodeEditor);\n\t    }\n\t};\n\n/***/ },\n/* 35 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar raf = __webpack_require__(7);\n\tvar events = __webpack_require__(10);\n\tvar utils = __webpack_require__(6);\n\tvar bubble = __webpack_require__(4);\n\tvar select = __webpack_require__(14);\n\tvar bubbleset = __webpack_require__(3);\n\tvar cursor = __webpack_require__(13);\n\t\n\tvar _require = __webpack_require__(12),\n\t    KEY = _require.KEY,\n\t    PROPS = _require.PROPS;\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isTextSelectAll]\n\t * @param {boolean} [sharedData.isTextSelectedFromBeginToCursor]\n\t * @param {boolean} [sharedData.isEmptyLeft]\n\t * @param {boolean} [sharedData.isEmptyRight]\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\t\n\t\n\tmodule.exports = function (event, sharedData) {\n\t    var code = events.keyCode(event);\n\t    var metaKey = events.metaKey(event);\n\t\n\t    switch (code) {\n\t        case KEY.Backspace:\n\t            onBackspace(event, sharedData);\n\t            break;\n\t\n\t        case KEY.Delete:\n\t            onDelete(event, sharedData);\n\t            break;\n\t\n\t        case KEY.Left:\n\t            onArrowLeft(event, sharedData);\n\t            break;\n\t\n\t        case KEY.Right:\n\t            onArrowRight(event, sharedData);\n\t            break;\n\t\n\t        // курсор в начало списка\n\t        case KEY.Top:\n\t            event.preventDefault();\n\t            onTop(event, sharedData);\n\t            break;\n\t\n\t        // курсор в конец списка\n\t        case KEY.Bottom:\n\t            event.preventDefault();\n\t            onBottom(event, sharedData);\n\t            break;\n\t\n\t        case KEY.Home:\n\t            if (event.shiftKey && !sharedData.isTextSelectedFromBeginToCursor && select.has(sharedData.nodeEditor)) {\n\t                event.preventDefault();\n\t                select.allLeft(sharedData.nodeEditor);\n\t            }\n\t\n\t            break;\n\t\n\t        case KEY.a:\n\t            if (metaKey && !sharedData.isTextSelectAll) {\n\t                event.preventDefault();\n\t                select.all(sharedData.nodeEditor);\n\t            }\n\t            break;\n\t\n\t        case KEY.c:\n\t            metaKey && copyBubbles(sharedData.nodeEditor);\n\t            break;\n\t\n\t        case KEY.x:\n\t            metaKey && copyBubbles(sharedData.nodeEditor, function () {\n\t                return onDelete(event, sharedData);\n\t            });\n\t            break;\n\t    }\n\t};\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\tfunction onTop(event, sharedData) {\n\t    var nodeEditor = sharedData.nodeEditor;\n\t    if (nodeEditor.options('disableControls')) {\n\t        return;\n\t    }\n\t\n\t    var nodeBubble = bubbleset.headBubble(nodeEditor);\n\t    nodeBubble && select.uniq(nodeBubble);\n\t}\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\tfunction onBottom(event, sharedData) {\n\t    var nodeEditor = sharedData.nodeEditor;\n\t    if (nodeEditor.options('disableControls')) {\n\t        return;\n\t    }\n\t\n\t    if (select.has(nodeEditor)) {\n\t        cursor.restore(nodeEditor);\n\t    }\n\t}\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isEmptyLeft]\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\tfunction onBackspace(event, sharedData) {\n\t    var nodeEditor = sharedData.nodeEditor;\n\t    var selection = sharedData.selection;\n\t\n\t    if (selection) {\n\t        if (sharedData.isEmptyLeft) {\n\t            var nodeBubble = bubbleset.findBubbleLeft(selection);\n\t            nodeBubble && select.uniq(nodeBubble);\n\t        }\n\t    } else if (!removeBubbles(nodeEditor)) {\n\t        nodeEditor.focus();\n\t        // без задержки не восстанавливает курсор\n\t        raf(function () {\n\t            return cursor.restore(nodeEditor);\n\t        });\n\t    }\n\t}\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isEmptyRight]\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\tfunction onDelete(event, sharedData) {\n\t    var nodeEditor = sharedData.nodeEditor;\n\t    var selection = sharedData.selection;\n\t\n\t    if (selection) {\n\t        if (sharedData.isEmptyRight) {\n\t            var nodeBubble = bubbleset.findBubbleRight(selection);\n\t            nodeBubble && select.uniq(nodeBubble);\n\t        }\n\t    } else if (!removeBubbles(nodeEditor, true)) {\n\t        nodeEditor.focus();\n\t        // без задержки не восстанавливает курсор\n\t        raf(function () {\n\t            return cursor.restore(nodeEditor);\n\t        });\n\t    }\n\t}\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isEmptyLeft]\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\tfunction onArrowLeft(event, sharedData) {\n\t    var selection = sharedData.selection;\n\t\n\t    if (selection) {\n\t        if (sharedData.isEmptyLeft) {\n\t            var nodeBubble = bubbleset.findBubbleLeft(selection);\n\t            nodeBubble && select.uniq(nodeBubble);\n\t        }\n\t    } else {\n\t        var nodeEditor = sharedData.nodeEditor;\n\t        var list = select.get(nodeEditor);\n\t        var begin = list.length > 1 && list[0] === nodeEditor.startRangeSelect ? list[list.length - 1] : list[0];\n\t\n\t        var node = bubbleset.prevBubble(begin);\n\t\n\t        if (node) {\n\t            if (event.shiftKey) {\n\t                select.range(node);\n\t            } else {\n\t                select.uniq(node);\n\t            }\n\t        }\n\t    }\n\t}\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t * @param {boolean} [sharedData.isEmptyRight]\n\t * @param {Selection} [sharedData.selection]\n\t * @param {HTMLElement} [sharedData.nodeEditor]\n\t */\n\tfunction onArrowRight(event, sharedData) {\n\t    var selection = sharedData.selection;\n\t\n\t    if (selection) {\n\t        if (sharedData.isEmptyRight) {\n\t            var nodeBubble = bubbleset.findBubbleRight(selection);\n\t            nodeBubble && select.uniq(nodeBubble);\n\t        }\n\t    } else {\n\t        var nodeEditor = sharedData.nodeEditor;\n\t        var list = select.get(nodeEditor);\n\t        var begin = list.length > 1 && list[list.length - 1] === nodeEditor.startRangeSelect ? list[0] : list[list.length - 1];\n\t\n\t        var node = bubbleset.nextBubble(begin);\n\t\n\t        if (node) {\n\t            if (event.shiftKey) {\n\t                select.range(node);\n\t            } else {\n\t                select.uniq(node);\n\t            }\n\t\n\t            // } else if (begin && begin.nextSibling && begin.nextSibling.nodeType === Node.TEXT_NODE) {\n\t            //     select.clear(nodeEditor);\n\t            //     selection.collapse(begin.nextSibling, 0);\n\t        } else {\n\t            cursor.restore(nodeEditor);\n\t        }\n\t    }\n\t}\n\t\n\tfunction removeBubbles(nodeEditor) {\n\t    var removeFromRight = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\t\n\t    var list = select.get(nodeEditor);\n\t    if (!list.length) {\n\t        return false;\n\t    }\n\t\n\t    var firstBubble = list[0].previousSibling;\n\t    var secondBubble = list[list.length - 1].nextSibling;\n\t\n\t    if (removeFromRight) {\n\t        var _ = firstBubble;\n\t        firstBubble = secondBubble;\n\t        secondBubble = _;\n\t    }\n\t\n\t    bubbleset.removeBubbles(nodeEditor, list);\n\t\n\t    if (bubble.isBubbleNode(firstBubble)) {\n\t        select.uniq(firstBubble);\n\t    } else if (bubble.isBubbleNode(secondBubble)) {\n\t        select.uniq(secondBubble);\n\t    } else {\n\t        nodeEditor.focus();\n\t        // без задержки не восстанавливает курсор\n\t        raf(function () {\n\t            return cursor.restore(nodeEditor);\n\t        });\n\t    }\n\t\n\t    nodeEditor.fireChange();\n\t    return true;\n\t}\n\t\n\tfunction copyBubbles(nodeEditor) {\n\t    var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n\t\n\t    var selection = utils.getSelection(nodeEditor);\n\t    if (selection) {\n\t        return false;\n\t    }\n\t\n\t    var list = select.get(nodeEditor);\n\t    if (!list.length) {\n\t        return false;\n\t    }\n\t\n\t    var bubbleCopy = nodeEditor.options('bubbleCopy');\n\t    var value = bubbleCopy(list);\n\t\n\t    if (!value) {\n\t        return false;\n\t    }\n\t\n\t    nodeEditor[PROPS.LOCK_COPY] = true;\n\t\n\t    var target = nodeEditor.ownerDocument.createElement('input');\n\t    target.value = value;\n\t    target.style.cssText = '\\n        position: absolute;\\n        left: -9999px;\\n        width: 1px;\\n        height: 1px;\\n        margin: 0;\\n        padding: 0;\\n        border: none;';\n\t\n\t    nodeEditor.parentNode.appendChild(target);\n\t\n\t    events.one(target, {\n\t        keyup: function keyup() {\n\t            return nodeEditor.focus();\n\t        },\n\t        blur: function blur() {\n\t            target && target.parentNode && target.parentNode.removeChild(target);\n\t            raf(callback);\n\t        }\n\t    });\n\t\n\t    target.select();\n\t    return true;\n\t}\n\n/***/ },\n/* 36 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar events = __webpack_require__(10);\n\tvar bubble = __webpack_require__(4);\n\tvar select = __webpack_require__(14);\n\t\n\tvar _require = __webpack_require__(12),\n\t    KEY = _require.KEY;\n\t\n\t/**\n\t * @param {Event} event\n\t * @param {Object} sharedData\n\t */\n\t\n\t\n\tmodule.exports = function (event, sharedData) {\n\t    var code = events.keyCode(event);\n\t    var nodeEditor = event.currentTarget;\n\t\n\t    if (code === KEY.Enter) {\n\t        event.preventDefault();\n\t        if (!nodeEditor.options('disableControls') && !sharedData.enterBubbling) {\n\t            editBubbleKeyboardEvent(nodeEditor);\n\t        }\n\t    } else if (code === KEY.Space) {\n\t        if (editBubbleKeyboardEvent(nodeEditor)) {\n\t            event.preventDefault();\n\t        }\n\t    }\n\t};\n\t\n\tfunction editBubbleKeyboardEvent(nodeEditor) {\n\t    var editableBubble = select.getEditable(nodeEditor);\n\t\n\t    if (editableBubble) {\n\t        return bubble.edit(nodeEditor, editableBubble);\n\t    }\n\t\n\t    return false;\n\t}\n\n/***/ },\n/* 37 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar context = __webpack_require__(1);\n\t\n\tvar _require = __webpack_require__(12),\n\t    PROPS = _require.PROPS;\n\t\n\tvar REG_STRREG = /\\/(.+)\\/([gimy]{0,3})/i;\n\t\n\tvar OPTIONS = {\n\t    begining: ['reg', null, 'begining'],\n\t    bubbleCopy: ['func', function (list) {\n\t        return list.map(function (item) {\n\t            return item.innerHTML;\n\t        }).join(', ');\n\t    }, 'bubble-copy'],\n\t    bubbleDeformation: ['func', function () {}, 'bubble-deformation'],\n\t    bubbleFormation: ['func', function () {}, 'bubble-formation'],\n\t    checkBubblePaste: ['func', function () {\n\t        return true;\n\t    }, 'check-bubble-paste'],\n\t    checkBubbleDrop: ['func', function () {\n\t        return true;\n\t    }, 'check-bubble-drop'],\n\t    classBubble: ['str', 'bubble', 'class-bubble'],\n\t    disableControls: ['bool', false, 'disable-controls'],\n\t    draggable: ['bool', true, 'draggable'],\n\t    ending: ['reg', null, 'ending'], // /\\@ya\\.ru/g\n\t    limit: ['uint', 0, 'limit'],\n\t    selection: ['bool', true, 'selection'],\n\t    separator: ['reg', /[,;]/, 'separator'],\n\t    separatorCond: ['func', null, 'separator-cond'],\n\t    tokenizer: ['func', null, 'tokenizer']\n\t};\n\t\n\tvar OPTIONS_PREPARE = {\n\t    func: function func(value) {\n\t        var type = typeof value === 'undefined' ? 'undefined' : _typeof(value);\n\t        switch (type) {\n\t            case 'string':\n\t                return new Function('context', 'return context.' + value + ';')(context);\n\t\n\t            case 'function':\n\t                return value;\n\t        }\n\t    },\n\t    bool: function bool(value) {\n\t        var type = typeof value === 'undefined' ? 'undefined' : _typeof(value);\n\t        switch (type) {\n\t            case 'string':\n\t                return value === 'true' || value === 'on';\n\t\n\t            case 'boolean':\n\t                return value;\n\t        }\n\t    },\n\t    noop: function noop(value) {\n\t        return value;\n\t    },\n\t    reg: function reg(value) {\n\t        var type = typeof value === 'undefined' ? 'undefined' : _typeof(value);\n\t        switch (type) {\n\t            case 'string':\n\t                if (value) {\n\t                    var match = value.match(REG_STRREG);\n\t                    if (match) {\n\t                        return new RegExp(match[1], match[2]);\n\t                    }\n\t                }\n\t\n\t                return null;\n\t\n\t            case 'object':\n\t                if (value instanceof context.RegExp || value === null) {\n\t                    return value;\n\t                }\n\t        }\n\t    },\n\t    str: function str(value) {\n\t        if (typeof value !== 'undefined') {\n\t            return value ? String(value) : '';\n\t        }\n\t    },\n\t    uint: function uint(value) {\n\t        value = Number(value);\n\t\n\t        if (!isNaN(value) && value > 0) {\n\t            return value;\n\t        }\n\t    }\n\t};\n\t\n\t/**\n\t * @param {HTMLElement} node\n\t * @param {array} args\n\t * @param {string|object} args.0 - string, if only one option is inserted, or object, if many options inserted,\n\t *  in the second case second argument doing nothing\n\t * @param {*} args.1 - value of inserted option\n\t *\n\t * @returns {*}\n\t */\n\tmodule.exports = function (node) {\n\t    var value = arguments.length <= 1 ? undefined : arguments[1];\n\t\n\t    if (value) {\n\t        if (!node[PROPS.OPTIONS]) {\n\t            reinitOptions(node);\n\t        }\n\t\n\t        if ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && value !== null) {\n\t            var optionsObj = value;\n\t\n\t            Object.keys(optionsObj).forEach(function (optionName) {\n\t                node[PROPS.OPTIONS][optionName] = optionsObj[optionName];\n\t            });\n\t\n\t            prepareOptions(node[PROPS.OPTIONS]);\n\t\n\t            return;\n\t        }\n\t\n\t        var optionName = value;\n\t        var optionValue = arguments.length <= 2 ? undefined : arguments[2];\n\t\n\t        if (typeof optionValue !== 'undefined') {\n\t            node[PROPS.OPTIONS][optionName] = optionValue;\n\t            prepareOptions(node[PROPS.OPTIONS]);\n\t        } else {\n\t            return node[PROPS.OPTIONS][optionName];\n\t        }\n\t    } else {\n\t        reinitOptions(node);\n\t    }\n\t};\n\t\n\tfunction reinitOptions(node) {\n\t    var options = node[PROPS.OPTIONS] = node[PROPS.OPTIONS] || {};\n\t\n\t    for (var optionName in OPTIONS) {\n\t        var attrName = 'data-' + OPTIONS[optionName][2];\n\t        if (node.hasAttribute(attrName)) {\n\t            options[optionName] = node.getAttribute(attrName);\n\t        }\n\t    }\n\t\n\t    prepareOptions(options);\n\t}\n\t\n\tfunction prepareOptions(options) {\n\t    for (var name in OPTIONS) {\n\t        var _OPTIONS$name = _slicedToArray(OPTIONS[name], 2),\n\t            type = _OPTIONS$name[0],\n\t            def = _OPTIONS$name[1];\n\t\n\t        options[name] = OPTIONS_PREPARE[type](options[name]);\n\t        if (typeof options[name] === 'undefined') {\n\t            options[name] = def;\n\t        }\n\t    }\n\t}\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// x-bubbles.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 44df42366707a0e4964d","/**\n * XBubbles custom element.\n * @module x-bubbles\n */\n\nconst context = require('./context');\nconst editor = require('./core/editor');\nconst utils = require('./core/utils');\nconst options = require('./core/options');\n\nclass XBubbles extends HTMLDivElement {\n    constructor() {\n        super();\n\n        initEditor(this);\n        utils.ready(this);\n    }\n\n    connectedCallback() {\n        initEditor(this);\n        this.editor.bubbling();\n    }\n\n    disconnectedCallback() {\n        destroyEditor(this);\n    }\n\n    attributeChangedCallback(/* name, prevValue, value */) {\n        options(this);\n    }\n\n    /**\n     * The receiving and recording settings.\n     * @memberof XBubbles\n     * @function\n     * @param {string|object} name - string, if only one option is inserted, or object - if many options inserted\n     * @param {*} value\n     * @returns {*}\n     * @public\n     */\n    options(name, value) {\n        return options(this, name, value)\n    }\n\n\n    /**\n     * List bablow.\n     * @memberof XBubbles\n     * @type {array}\n     * @public\n     */\n    get items() {\n        return this.editor.getItems();\n    }\n\n    /**\n     * The value entered.\n     * @memberof XBubbles\n     * @type {string}\n     * @public\n     */\n    get inputValue() {\n        return this.editor.inputValue();\n    }\n\n    /**\n     * Set contents of the set.\n     * @function\n     * @memberof XBubbles\n     * @param {string} data\n     * @returns {boolean}\n     * @public\n     */\n    setContent(data) {\n        return this.editor.setContent(data);\n    }\n\n    canAddBubble() {\n        return this.editor.canAddBubble();\n    }\n\n    /**\n     * Add bubble.\n     * @function\n     * @memberof XBubbles\n     * @param {string} bubbleText\n     * @param {Object} [data]\n     * @returns {boolean}\n     * @public\n     */\n    addBubble(bubbleText, data) {\n        return this.editor.addBubble(bubbleText, data)\n    }\n\n    /**\n     * Remove bubble.\n     * @function\n     * @memberof XBubbles\n     * @param {HTMLElement} nodeBubble\n     * @returns {boolean}\n     * @public\n     */\n    removeBubble(nodeBubble) {\n        return this.editor.removeBubble(nodeBubble);\n    }\n\n    /**\n     * Edit bubble.\n     * @function\n     * @memberof XBubbles\n     * @param {HTMLElement} nodeBubble\n     * @returns {boolean}\n     * @public\n     */\n    editBubble(nodeBubble) {\n        return this.editor.editBubble(nodeBubble);\n    }\n\n    /**\n     * Starting formation bablow.\n     * @function\n     * @memberof XBubbles\n     * @returns {boolean}\n     * @public\n     */\n    bubbling() {\n        return this.editor.bubbling();\n    }\n}\n\nmodule.exports = context.customElements.define('x-bubbles', XBubbles, {\n    extends: 'div'\n});\n\nfunction initEditor(node) {\n    if (!node.editor) {\n        Object.defineProperty(node, 'editor', {\n            configurable: true,\n            value: editor.init(node)\n        });\n    }\n}\n\nfunction destroyEditor(node) {\n    if (node.editor) {\n        editor.destroy(node);\n        delete node.editor;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","module.exports = (function () {\n    /* eslint no-eval: 0 */\n    return this || (1, eval)('this');\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./context.js","const context = require('../context');\nconst bubbleset = require('./bubbleset');\nconst bubble = require('./bubble');\nconst cursor = require('./cursor');\nconst { EV, PROPS } = require('./constant');\nconst text = require('./text');\nconst events = require('./events');\nconst utils = require('./utils');\nconst drag = require('./drag');\nconst select = require('./select');\n\nconst COMMON_EVENTS = {\n    blur: require('./common/blur'),\n    click: require('./common/click'),\n    focus: require('./common/focus'),\n    keydown: require('./common/keydown'),\n};\n\nconst EDITOR_EVENTS = {\n    blur: require('./editor/blur'),\n    click: require('./editor/click'),\n    mousedown: require('./editor/mousedown'),\n    focus: require('./editor/focus'),\n    keydown: require('./editor/keydown'),\n    keypress: require('./editor/keypress'),\n    keyup: require('./editor/keyup'),\n    paste: require('./editor/paste'),\n};\n\nconst SELECT_EVENTS = {\n    blur: require('./select/blur'),\n    click: require('./select/click'),\n    keydown: require('./select/keydown'),\n    keypress: require('./select/keypress'),\n};\n\nconst PROXY_EVENTS = {\n    blur: events.proxyLocal,\n    click: events.proxyLocal,\n    mousedown: events.proxyLocal,\n    focus: events.proxyLocal,\n    keydown: events.proxyLocal,\n    keypress: events.proxyLocal,\n    keyup: events.proxyLocal,\n    mscontrolselect: events.prevent,\n    paste: events.proxyLocal,\n    resize: events.prevent,\n    resizestart: events.prevent,\n};\n\nexports.init = function (nodeWrap) {\n    const nodeEditor = nodeWrap;\n    nodeEditor.setAttribute('contenteditable', 'true');\n    nodeEditor.setAttribute('spellcheck', 'false');\n\n    events.onLocal(nodeEditor, COMMON_EVENTS);\n    events.onLocal(nodeEditor, EDITOR_EVENTS);\n\n    if (nodeEditor.options('selection')) {\n        events.onLocal(nodeEditor, SELECT_EVENTS);\n        drag.init(nodeEditor);\n    }\n\n    events.on(nodeEditor, PROXY_EVENTS);\n\n    nodeEditor.fireChange = utils.throttle(fireChange, nodeEditor);\n    nodeEditor.fireEdit = utils.throttle(fireEdit, nodeEditor);\n    nodeEditor.fireInput = utils.throttle(fireInput, nodeEditor);\n    nodeEditor.fireBeforeRemove = fireBeforeRemove.bind(nodeEditor);\n\n    return {\n        canAddBubble: canAddBubble.bind(nodeEditor),\n        addBubble: addBubble.bind(nodeEditor),\n        bubbling: bubbling.bind(nodeEditor),\n        editBubble: editBubble.bind(nodeEditor),\n        getItems: getItems.bind(nodeEditor),\n        inputValue: inputValue.bind(nodeEditor),\n        removeBubble: removeBubble.bind(nodeEditor),\n        setContent: setContent.bind(nodeEditor)\n    };\n};\n\nexports.destroy = function (nodeWrap) {\n    const nodeEditor = nodeWrap;\n    events.off(nodeEditor, PROXY_EVENTS);\n    events.offLocal(nodeEditor, COMMON_EVENTS);\n    events.offLocal(nodeEditor, EDITOR_EVENTS);\n\n    if (nodeEditor.options('selection')) {\n        events.offLocal(nodeEditor, SELECT_EVENTS);\n        drag.destroy(nodeEditor);\n    }\n};\n\nfunction canAddBubble() {\n    return bubbleset.canAddBubble(this);\n}\n\nfunction getItems() {\n    return bubbleset.getBubbles(this);\n}\n\nfunction setContent(data) {\n    const selection = context.getSelection();\n    selection && selection.removeAllRanges();\n\n    const list = select.get(this);\n    if (list.length) {\n        bubbleset.removeBubbles(this, list);\n        this.fireChange();\n    }\n\n    while (this.firstChild) {\n        this.removeChild(this.firstChild);\n    }\n\n    data = text.html2text(data);\n    this.appendChild(this.ownerDocument.createTextNode(data));\n    bubble.bubbling(this);\n    cursor.restore(this);\n\n    return true;\n}\n\nfunction addBubble(bubbleText, dataAttributes) {\n    const nodeBubble = bubble.create(this, bubbleText, dataAttributes);\n    if (!this.canAddBubble() || !nodeBubble) {\n        return false;\n    }\n\n    if (text.text2bubble(this, nodeBubble)) {\n        this.fireInput();\n        this.fireChange();\n        cursor.restore(this);\n        return true;\n    }\n\n    return false;\n}\n\nfunction removeBubble(nodeBubble) {\n    if (this.contains(nodeBubble)) {\n        bubbleset.removeBubbles(this, [ nodeBubble ]);\n        this.fireChange();\n        return true;\n    }\n\n    return false;\n}\n\nfunction editBubble(nodeBubble) {\n    if (this.contains(nodeBubble)) {\n        return bubble.edit(this, nodeBubble);\n    }\n\n    return false;\n}\n\nfunction inputValue() {\n    const textRange = text.currentTextRange(this);\n    return textRange && text.textClean(textRange.toString()) || '';\n}\n\nfunction bubbling() {\n    bubble.bubbling(this);\n}\n\n/**\n * Генерация события редактирования бабла.\n * Выполняется в контексте узла-обертки.\n * @alias module:x-bubbles/editor.fireEdit\n * @param {HTMLElement} nodeBubble нода бабл\n * @this HTMLElement\n * @private\n */\nfunction fireEdit(nodeBubble) {\n    events.dispatch(this, EV.BUBBLE_EDIT, {\n        bubbles: false,\n        cancelable: false,\n        detail: { data: nodeBubble }\n    });\n}\n\n/**\n * Генерация события изменения набора баблов.\n * Выполняется в контексте узла-обертки.\n * @alias module:x-bubbles/editor.fireChange\n * @this HTMLElement\n * @private\n */\nfunction fireChange() {\n    events.dispatch(this, EV.CHANGE, {\n        bubbles: false,\n        cancelable: false\n    });\n}\n\n/**\n * Генерация события ввода текста.\n * Выполняется в контексте узла-обертки.\n * @alias module:x-bubbles/editor.fireInput\n * @this HTMLElement\n * @private\n */\nfunction fireInput() {\n    const editText = inputValue.call(this);\n\n    if (this[ PROPS.BUBBLE_VALUE ] !== editText) {\n        this[ PROPS.BUBBLE_VALUE ] = editText;\n\n        events.dispatch(this, EV.BUBBLE_INPUT, {\n            bubbles: false,\n            cancelable: false,\n            detail: { data: editText }\n        });\n    }\n}\n\n/**\n * Генерация события удаления баблов перед выполнением удаления из DOM.\n * Выполняется в контексте узла-обертки.\n * @alias module:x-bubbles/editor.fireRemove\n * @param {array} list список удаляемых узлов\n * @this HTMLElement\n * @private\n */\nfunction fireBeforeRemove(list) {\n    events.dispatch(this, EV.BEFORE_REMOVE, {\n        bubbles: false,\n        cancelable: false,\n        detail: { data: list }\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/editor.js","const bubble = require('./bubble');\nconst text = require('./text');\n\nexports.closestNodeBubble = closestNodeBubble;\nexports.closestNodeSet = closestNodeSet;\nexports.findBubbleLeft = findBubbleLeft;\nexports.findBubbleRight = findBubbleRight;\nexports.getBubbles = getBubbles;\nexports.bubblesCount = bubblesCount;\nexports.hasBubbles = hasBubbles;\nexports.headBubble = headBubble;\nexports.lastBubble = lastBubble;\nexports.nextBubble = nextBubble;\nexports.prevBubble = prevBubble;\nexports.removeBubbles = removeBubbles;\nexports.moveBubbles = moveBubbles;\nexports.canAddBubble = canAddBubble;\nexports.getRemainingCapacity = getRemainingCapacity;\n\nfunction lastBubble(nodeSet) {\n    return nodeSet.querySelector('[bubble]:last-child');\n}\n\nfunction headBubble(nodeSet) {\n    return nodeSet.querySelector('[bubble]:first-child');\n}\n\nfunction getBubbles(nodeSet) {\n    return Array.prototype.slice.call(nodeSet.querySelectorAll('[bubble]'));\n}\n\nfunction bubblesCount(nodeSet) {\n    const bubbles = getBubbles(nodeSet);\n    return bubbles.length;\n}\n\nfunction hasBubbles(nodeSet) {\n    return Boolean(nodeSet.querySelector('[bubble]'));\n}\n\nfunction findBubbleLeft(selection) {\n    if (!selection.focusNode || !selection.anchorNode) {\n        return;\n    }\n\n    let node = selection.focusNode.previousSibling;\n\n    if (selection.anchorNode !== selection.focusNode &&\n        selection.anchorNode.compareDocumentPosition(selection.focusNode) & Node.DOCUMENT_POSITION_FOLLOWING) {\n        node = selection.anchorNode.previousSibling;\n    }\n\n    while (node) {\n        if (bubble.isBubbleNode(node)) {\n            return node;\n        }\n\n        if (node.nodeType === Node.TEXT_NODE && text.textClean(node.nodeValue)) {\n            return;\n        }\n\n        node = node.previousSibling;\n    }\n}\n\nfunction findBubbleRight(selection) {\n    if (!selection.focusNode || !selection.anchorNode) {\n        return;\n    }\n\n    let node = selection.focusNode.nextSibling;\n\n    if (selection.anchorNode !== selection.focusNode &&\n        selection.anchorNode.compareDocumentPosition(selection.focusNode) & Node.DOCUMENT_POSITION_FOLLOWING) {\n        node = selection.anchorNode.nextSibling;\n    }\n\n    while (node) {\n        if (bubble.isBubbleNode(node)) {\n            return node;\n        }\n\n        if (node.nodeType === Node.TEXT_NODE && text.textClean(node.nodeValue)) {\n            return;\n        }\n\n        node = node.nextSibling;\n    }\n}\n\nfunction closestNodeSet(node) {\n    while (node) {\n        if (isEditorNode(node)) {\n            return node;\n        }\n\n        node = node.parentNode;\n    }\n}\n\nfunction closestNodeBubble(node) {\n    while (node) {\n        if (bubble.isBubbleNode(node)) {\n            return node;\n        }\n\n        if (isEditorNode(node)) {\n            return;\n        }\n\n        node = node.parentNode;\n    }\n}\n\nfunction prevBubble(target) {\n    let node = target && target.previousSibling;\n    while (node) {\n        if (bubble.isBubbleNode(node)) {\n            return node;\n        }\n\n        node = node.previousSibling;\n    }\n}\n\nfunction nextBubble(target) {\n    let node = target && target.nextSibling;\n    while (node) {\n        if (bubble.isBubbleNode(node)) {\n            return node;\n        }\n\n        node = node.nextSibling;\n    }\n}\n\nfunction isEditorNode(node) {\n    return (\n        node.nodeType === Node.ELEMENT_NODE &&\n        node.getAttribute('is') === 'x-bubbles'\n    );\n}\n\nfunction removeBubbles(nodeEditor, list) {\n    nodeEditor.fireBeforeRemove(list);\n    list.forEach(item => nodeEditor.removeChild(item));\n}\n\nfunction moveBubbles(nodeEditorFrom, nodeEditorTo, list) {\n    const remainingCapacity = getRemainingCapacity(nodeEditorTo);\n\n    if (remainingCapacity <= 0) {\n        return;\n    }\n\n    const movedBubbles = list.slice(0, remainingCapacity);\n\n    nodeEditorFrom.fireBeforeRemove(movedBubbles);\n    movedBubbles.forEach(item => nodeEditorTo.appendChild(item));\n}\n\nfunction canAddBubble(nodeEditor) {\n    const bubblesLimit = nodeEditor.options('limit');\n\n    return !bubblesLimit || (bubblesCount(nodeEditor) < bubblesLimit);\n}\n\nfunction getRemainingCapacity(nodeEditor) {\n    const bubblesLimit = nodeEditor.options('limit');\n\n    if (!bubblesLimit) {\n        return Number.POSITIVE_INFINITY;\n    }\n\n    return bubblesLimit - bubblesCount(nodeEditor);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/bubbleset.js","const context = require('../context');\nconst text = require('./text');\nconst bubbleset = require('./bubbleset');\nconst { escape, canUseDrag } = require('./utils');\n\nexports.isBubbleNode = isBubbleNode;\nexports.bubbling = bubbling;\nexports.create = create;\nexports.edit = edit;\n\nfunction isBubbleNode(node) {\n    if (!node || node.nodeType !== Node.ELEMENT_NODE) {\n        return false;\n    }\n\n    return node.hasAttribute('bubble');\n}\n\nfunction edit(nodeSet, nodeBubble) {\n    if (nodeBubble.hasAttribute('readonly')) {\n        return false;\n    }\n\n    const selection = context.getSelection();\n\n    if (!selection) {\n        return false;\n    }\n\n    const bubbleDeformation = nodeSet.options('bubbleDeformation');\n    let rangeParams = bubbleDeformation(nodeBubble);\n\n    if (!rangeParams) {\n        const dataText = text.textClean(nodeBubble.innerText);\n\n        rangeParams = {\n            text: dataText,\n            startOffset: 0,\n            endOffset: dataText.length\n        };\n    }\n\n    const textFake = text.createZws();\n    const textNode = context.document.createTextNode(rangeParams.text);\n\n    nodeSet.fireEdit(nodeBubble);\n    nodeSet.replaceChild(textNode, nodeBubble);\n    nodeSet.insertBefore(textFake, textNode);\n\n    const range = context.document.createRange();\n    range.setStart(textNode, rangeParams.startOffset);\n    range.setEnd(textNode, rangeParams.endOffset);\n\n    selection.removeAllRanges();\n    selection.addRange(range);\n    return true;\n}\n\n/**\n * У обертки нельзя делать tabindex=-1, иначе будет слетать фокус с поля ввода.\n * @param {HTMLElement} nodeEditor\n * @param {string} dataText\n * @param {Object} [dataAttributes={}]\n * @returns {?HTMLElement}\n */\nfunction create(nodeEditor, dataText, dataAttributes = {}) {\n    dataText = text.textClean(dataText);\n\n    if (!dataText) {\n        return;\n    }\n\n    const bubbleFormation = nodeEditor.options('bubbleFormation');\n    const classBubble = nodeEditor.options('classBubble');\n    const draggable = canUseDrag && nodeEditor.options('draggable') && nodeEditor.options('selection');\n    const wrap = nodeEditor.ownerDocument.createElement('span');\n\n    wrap.innerText = dataText;\n\n    for (let key in dataAttributes) {\n        if (dataAttributes[ key ]) {\n            wrap.setAttribute(`data-${key}`, escape(dataAttributes[ key ]));\n        }\n    }\n\n    bubbleFormation(wrap);\n\n    if (classBubble) {\n        const classes = String(classBubble).trim().split(/\\s+/);\n        let len = classes.length;\n\n        while (len--) {\n            wrap.classList.add(classes[ len ]);\n        }\n    }\n\n    wrap.setAttribute('bubble', '');\n    wrap.setAttribute('contenteditable', 'false');\n    draggable && wrap.setAttribute('draggable', 'true');\n\n    return wrap;\n}\n\nfunction bubbling(nodeSet) {\n    const begining = nodeSet.options('begining');\n    const ending = nodeSet.options('ending');\n    const separator = nodeSet.options('separator');\n    const tokenizer = nodeSet.options('tokenizer');\n    const ranges = getBubbleRanges(nodeSet);\n    const nodes = [];\n\n    const remainingCapacity = bubbleset.getRemainingCapacity(nodeSet);\n\n    ranges.forEach(function (range) {\n        const dataText = text.textClean(range.toString());\n\n        if (!dataText) {\n            range.deleteContents();\n            return;\n        }\n\n        let textParts = [ dataText ];\n\n        if (tokenizer) {\n            textParts = tokenizer(dataText);\n\n        } else {\n            if (separator) {\n                textParts = dataText\n                    .split(separator)\n                    .map(trimIterator)\n                    .filter(nonEmptyIterator);\n            }\n\n            if (ending) {\n                textParts = textParts\n                    .reduce((parts, str) => parts.concat(parseFragmentByEnding(str, ending)), [])\n                    .map(trimIterator)\n                    .filter(nonEmptyIterator);\n\n            } else if (begining) {\n                textParts = textParts\n                    .reduce((parts, str) => parts.concat(parseFragmentByBeginning(str, begining)), [])\n                    .map(trimIterator)\n                    .filter(nonEmptyIterator);\n            }\n        }\n\n        if (!Array.isArray(textParts) || !textParts.length) {\n            range.deleteContents();\n            return;\n        }\n\n        const fragment = context.document.createDocumentFragment();\n\n        textParts.forEach(function (textPart) {\n            if (nodes.length >= remainingCapacity) {\n                return;\n            }\n\n            const nodeBubble = create(nodeSet, textPart);\n            if (nodeBubble) {\n                fragment.appendChild(nodeBubble);\n                nodes.push(nodeBubble);\n            }\n        });\n\n        range.deleteContents();\n        range.insertNode(fragment);\n    });\n\n    nodeSet.fireInput();\n\n    if (nodes.length) {\n        nodeSet.fireChange();\n    }\n\n    return nodes;\n}\n\nfunction getBubbleRanges(nodeSet) {\n    const ranges = [];\n    const children = nodeSet.childNodes;\n    let range;\n    let node;\n\n    for (let i = 0; i < children.length; i++) {\n        node = children[ i ];\n\n        if (isBubbleNode(node)) {\n            if (range) {\n                range.setEndBefore(node);\n                ranges.push(range);\n                range = undefined;\n            }\n\n        } else {\n            if (!range) {\n                range = context.document.createRange();\n                range.setStartBefore(node);\n            }\n        }\n    }\n\n    if (range) {\n        range.setEndAfter(node);\n        ranges.push(range);\n    }\n\n    return ranges;\n}\n\nfunction trimIterator(str) {\n    return str.trim();\n}\n\nfunction nonEmptyIterator(str) {\n    return Boolean(str);\n}\n\nfunction parseFragmentByEnding(str, reg) {\n    const parts = [];\n    let lastIndex = 0;\n    let loop = 999;\n\n    reg.lastIndex = 0;\n    while (reg.exec(str) !== null && loop) {\n        loop--;\n        parts.push(str.substring(lastIndex, reg.lastIndex));\n        lastIndex = reg.lastIndex;\n    }\n\n    return parts;\n}\n\nfunction parseFragmentByBeginning(str, reg) {\n    const parts = [];\n    let res;\n    let index = 0;\n    let loop = 999;\n\n    reg.lastIndex = 0;\n    while ((res = reg.exec(str)) !== null && loop) {\n        loop--;\n        if (index !== res.index) {\n            parts.push(str.substring(index, res.index));\n            index = res.index;\n        }\n    }\n\n    parts.push(str.substring(index, str.length));\n    return parts;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/bubble.js","const context = require('../context');\nconst bubbleset = require('./bubbleset');\nconst { getSelection, correctSelection } = require('./utils');\n\n/* eslint-disable max-len */\nconst REG_REPLACE_NON_PRINTABLE = /[\\0-\\x1F\\x7F-\\x9F\\xAD\\u0378\\u0379\\u037F-\\u0383\\u038B\\u038D\\u03A2\\u0528-\\u0530\\u0557\\u0558\\u0560\\u0588\\u058B-\\u058E\\u0590\\u05C8-\\u05CF\\u05EB-\\u05EF\\u05F5-\\u0605\\u061C\\u061D\\u06DD\\u070E\\u070F\\u074B\\u074C\\u07B2-\\u07BF\\u07FB-\\u07FF\\u082E\\u082F\\u083F\\u085C\\u085D\\u085F-\\u089F\\u08A1\\u08AD-\\u08E3\\u08FF\\u0978\\u0980\\u0984\\u098D\\u098E\\u0991\\u0992\\u09A9\\u09B1\\u09B3-\\u09B5\\u09BA\\u09BB\\u09C5\\u09C6\\u09C9\\u09CA\\u09CF-\\u09D6\\u09D8-\\u09DB\\u09DE\\u09E4\\u09E5\\u09FC-\\u0A00\\u0A04\\u0A0B-\\u0A0E\\u0A11\\u0A12\\u0A29\\u0A31\\u0A34\\u0A37\\u0A3A\\u0A3B\\u0A3D\\u0A43-\\u0A46\\u0A49\\u0A4A\\u0A4E-\\u0A50\\u0A52-\\u0A58\\u0A5D\\u0A5F-\\u0A65\\u0A76-\\u0A80\\u0A84\\u0A8E\\u0A92\\u0AA9\\u0AB1\\u0AB4\\u0ABA\\u0ABB\\u0AC6\\u0ACA\\u0ACE\\u0ACF\\u0AD1-\\u0ADF\\u0AE4\\u0AE5\\u0AF2-\\u0B00\\u0B04\\u0B0D\\u0B0E\\u0B11\\u0B12\\u0B29\\u0B31\\u0B34\\u0B3A\\u0B3B\\u0B45\\u0B46\\u0B49\\u0B4A\\u0B4E-\\u0B55\\u0B58-\\u0B5B\\u0B5E\\u0B64\\u0B65\\u0B78-\\u0B81\\u0B84\\u0B8B-\\u0B8D\\u0B91\\u0B96-\\u0B98\\u0B9B\\u0B9D\\u0BA0-\\u0BA2\\u0BA5-\\u0BA7\\u0BAB-\\u0BAD\\u0BBA-\\u0BBD\\u0BC3-\\u0BC5\\u0BC9\\u0BCE\\u0BCF\\u0BD1-\\u0BD6\\u0BD8-\\u0BE5\\u0BFB-\\u0C00\\u0C04\\u0C0D\\u0C11\\u0C29\\u0C34\\u0C3A-\\u0C3C\\u0C45\\u0C49\\u0C4E-\\u0C54\\u0C57\\u0C5A-\\u0C5F\\u0C64\\u0C65\\u0C70-\\u0C77\\u0C80\\u0C81\\u0C84\\u0C8D\\u0C91\\u0CA9\\u0CB4\\u0CBA\\u0CBB\\u0CC5\\u0CC9\\u0CCE-\\u0CD4\\u0CD7-\\u0CDD\\u0CDF\\u0CE4\\u0CE5\\u0CF0\\u0CF3-\\u0D01\\u0D04\\u0D0D\\u0D11\\u0D3B\\u0D3C\\u0D45\\u0D49\\u0D4F-\\u0D56\\u0D58-\\u0D5F\\u0D64\\u0D65\\u0D76-\\u0D78\\u0D80\\u0D81\\u0D84\\u0D97-\\u0D99\\u0DB2\\u0DBC\\u0DBE\\u0DBF\\u0DC7-\\u0DC9\\u0DCB-\\u0DCE\\u0DD5\\u0DD7\\u0DE0-\\u0DF1\\u0DF5-\\u0E00\\u0E3B-\\u0E3E\\u0E5C-\\u0E80\\u0E83\\u0E85\\u0E86\\u0E89\\u0E8B\\u0E8C\\u0E8E-\\u0E93\\u0E98\\u0EA0\\u0EA4\\u0EA6\\u0EA8\\u0EA9\\u0EAC\\u0EBA\\u0EBE\\u0EBF\\u0EC5\\u0EC7\\u0ECE\\u0ECF\\u0EDA\\u0EDB\\u0EE0-\\u0EFF\\u0F48\\u0F6D-\\u0F70\\u0F98\\u0FBD\\u0FCD\\u0FDB-\\u0FFF\\u10C6\\u10C8-\\u10CC\\u10CE\\u10CF\\u1249\\u124E\\u124F\\u1257\\u1259\\u125E\\u125F\\u1289\\u128E\\u128F\\u12B1\\u12B6\\u12B7\\u12BF\\u12C1\\u12C6\\u12C7\\u12D7\\u1311\\u1316\\u1317\\u135B\\u135C\\u137D-\\u137F\\u139A-\\u139F\\u13F5-\\u13FF\\u169D-\\u169F\\u16F1-\\u16FF\\u170D\\u1715-\\u171F\\u1737-\\u173F\\u1754-\\u175F\\u176D\\u1771\\u1774-\\u177F\\u17DE\\u17DF\\u17EA-\\u17EF\\u17FA-\\u17FF\\u180F\\u181A-\\u181F\\u1878-\\u187F\\u18AB-\\u18AF\\u18F6-\\u18FF\\u191D-\\u191F\\u192C-\\u192F\\u193C-\\u193F\\u1941-\\u1943\\u196E\\u196F\\u1975-\\u197F\\u19AC-\\u19AF\\u19CA-\\u19CF\\u19DB-\\u19DD\\u1A1C\\u1A1D\\u1A5F\\u1A7D\\u1A7E\\u1A8A-\\u1A8F\\u1A9A-\\u1A9F\\u1AAE-\\u1AFF\\u1B4C-\\u1B4F\\u1B7D-\\u1B7F\\u1BF4-\\u1BFB\\u1C38-\\u1C3A\\u1C4A-\\u1C4C\\u1C80-\\u1CBF\\u1CC8-\\u1CCF\\u1CF7-\\u1CFF\\u1DE7-\\u1DFB\\u1F16\\u1F17\\u1F1E\\u1F1F\\u1F46\\u1F47\\u1F4E\\u1F4F\\u1F58\\u1F5A\\u1F5C\\u1F5E\\u1F7E\\u1F7F\\u1FB5\\u1FC5\\u1FD4\\u1FD5\\u1FDC\\u1FF0\\u1FF1\\u1FF5\\u1FFF\\u200B-\\u200F\\u202A-\\u202E\\u2060-\\u206F\\u2072\\u2073\\u208F\\u209D-\\u209F\\u20BB-\\u20CF\\u20F1-\\u20FF\\u218A-\\u218F\\u23F4-\\u23FF\\u2427-\\u243F\\u244B-\\u245F\\u2700\\u2B4D-\\u2B4F\\u2B5A-\\u2BFF\\u2C2F\\u2C5F\\u2CF4-\\u2CF8\\u2D26\\u2D28-\\u2D2C\\u2D2E\\u2D2F\\u2D68-\\u2D6E\\u2D71-\\u2D7E\\u2D97-\\u2D9F\\u2DA7\\u2DAF\\u2DB7\\u2DBF\\u2DC7\\u2DCF\\u2DD7\\u2DDF\\u2E3C-\\u2E7F\\u2E9A\\u2EF4-\\u2EFF\\u2FD6-\\u2FEF\\u2FFC-\\u2FFF\\u3040\\u3097\\u3098\\u3100-\\u3104\\u312E-\\u3130\\u318F\\u31BB-\\u31BF\\u31E4-\\u31EF\\u321F\\u32FF\\u4DB6-\\u4DBF\\u9FCD-\\u9FFF\\uA48D-\\uA48F\\uA4C7-\\uA4CF\\uA62C-\\uA63F\\uA698-\\uA69E\\uA6F8-\\uA6FF\\uA78F\\uA794-\\uA79F\\uA7AB-\\uA7F7\\uA82C-\\uA82F\\uA83A-\\uA83F\\uA878-\\uA87F\\uA8C5-\\uA8CD\\uA8DA-\\uA8DF\\uA8FC-\\uA8FF\\uA954-\\uA95E\\uA97D-\\uA97F\\uA9CE\\uA9DA-\\uA9DD\\uA9E0-\\uA9FF\\uAA37-\\uAA3F\\uAA4E\\uAA4F\\uAA5A\\uAA5B\\uAA7C-\\uAA7F\\uAAC3-\\uAADA\\uAAF7-\\uAB00\\uAB07\\uAB08\\uAB0F\\uAB10\\uAB17-\\uAB1F\\uAB27\\uAB2F-\\uABBF\\uABEE\\uABEF\\uABFA-\\uABFF\\uD7A4-\\uD7AF\\uD7C7-\\uD7CA\\uD7FC-\\uF8FF\\uFA6E\\uFA6F\\uFADA-\\uFAFF\\uFB07-\\uFB12\\uFB18-\\uFB1C\\uFB37\\uFB3D\\uFB3F\\uFB42\\uFB45\\uFBC2-\\uFBD2\\uFD40-\\uFD4F\\uFD90\\uFD91\\uFDC8-\\uFDEF\\uFDFE\\uFDFF\\uFE1A-\\uFE1F\\uFE27-\\uFE2F\\uFE53\\uFE67\\uFE6C-\\uFE6F\\uFE75\\uFEFD-\\uFF00\\uFFBF-\\uFFC1\\uFFC8\\uFFC9\\uFFD0\\uFFD1\\uFFD8\\uFFD9\\uFFDD-\\uFFDF\\uFFE7\\uFFEF-\\uFFFB\\uFFFE\\uFFFF]/g;\nconst REG_ZWS = /\\u200B/;\nconst TEXT_ZWS = '\\u200B';\n\nexports.isEmptyLeft = isEmptyLeft;\nexports.isEmptyRight = isEmptyRight;\nexports.arrowRight = arrowRight;\nexports.arrowLeft = arrowLeft;\nexports.remove = remove;\nexports.html2text = html2text;\nexports.currentTextRange = currentTextRange;\nexports.text2bubble = text2bubble;\nexports.replaceString = replaceString;\nexports.findTextBorderNode = findTextBorderNode;\nexports.selectFromCursorToStrBegin = selectFromCursorToStrBegin;\nexports.selectAll = selectAll;\nexports.textClean = textClean;\nexports.checkZws = checkZws;\nexports.createZws = createZws;\nexports.hasNear = hasNear;\n\nfunction isEmptyLeft(selection) {\n    let { startNode, startOffset } = correctSelection(selection);\n    let isEmpty = true;\n    let node = startNode;\n\n    while (node) {\n        if (node.nodeType === Node.TEXT_NODE) {\n            const value = startOffset > 0 ? node.nodeValue.substring(0, startOffset) : node.nodeValue;\n\n            if (textClean(value)) {\n                isEmpty = false;\n                break;\n            }\n\n        } else {\n            break;\n        }\n\n        startOffset = 0;\n        node = node.previousSibling;\n    }\n\n    return isEmpty;\n}\n\nfunction isEmptyRight(selection) {\n    let { endNode, endOffset } = correctSelection(selection);\n    let node = endNode;\n\n    while (node) {\n        if (node.nodeType === Node.TEXT_NODE) {\n            const value = endOffset > -1 && endOffset < node.nodeValue.length ? node.nodeValue.substring(endOffset) : node.nodeValue;\n\n            if (textClean(value)) {\n                return false;\n            }\n\n        } else {\n            return false;\n        }\n\n        endOffset = -1;\n        node = node.nextSibling;\n    }\n\n    return true;\n}\n\nfunction text2bubble(nodeEditor, nodeBubble) {\n    const selection = getSelection(nodeEditor);\n    const range = selection && currentTextRange(nodeEditor, selection);\n\n    if (range) {\n        selection.removeAllRanges();\n        selection.addRange(range);\n        replace(selection, nodeBubble);\n\n    } else {\n        nodeEditor.appendChild(nodeBubble);\n    }\n\n    return true;\n}\n\nfunction currentTextRange(nodeEditor, selection) {\n    selection = selection || getSelection(nodeEditor);\n    if (!selection) {\n        return;\n    }\n\n    const pointNode = do {\n        if (selection.focusNode && selection.focusNode.nodeType === Node.TEXT_NODE) {\n            selection.focusNode;\n\n        } else if (selection.anchorNode && selection.anchorNode.nodeType === Node.TEXT_NODE) {\n            selection.anchorNode;\n\n        } else {\n            undefined;\n        }\n    };\n\n    if (!pointNode) {\n        return;\n    }\n\n    let startNode = pointNode;\n    let endNode = pointNode;\n    let item = pointNode;\n\n    while (item && item.nodeType === Node.TEXT_NODE) {\n        startNode = item;\n        item = item.previousSibling;\n    }\n\n    item = pointNode;\n\n    while (item && item.nodeType === Node.TEXT_NODE) {\n        endNode = item;\n        item = item.nextSibling;\n    }\n\n    const range = nodeEditor.ownerDocument.createRange();\n    range.setStartBefore(startNode);\n    range.setEndAfter(endNode);\n\n    return range;\n}\n\nfunction remove(selection) {\n    return replace(selection, createZws());\n}\n\nfunction replace(selection, node) {\n    if (!selection || !selection.rangeCount) {\n        return false;\n    }\n\n    const anchor = context.document.createElement('span');\n    selection.getRangeAt(0).surroundContents(anchor);\n    anchor.parentNode.replaceChild(node, anchor);\n\n    selection.removeAllRanges();\n\n    if (node.nodeType === Node.TEXT_NODE) {\n        const range = context.document.createRange();\n        // для ИЕ обязательно указывать node.nodeValue.length\n        range.setStart(node, node.nodeValue.length);\n        range.collapse(false);\n        selection.addRange(range);\n\n    } else {\n        selection.collapse(node, 0);\n    }\n\n    return true;\n}\n\nfunction replaceString(data, selection) {\n    data = textClean(data);\n    if (!data) {\n        return false;\n    }\n\n    selection = selection || context.getSelection();\n    const textNode = context.document.createTextNode(data);\n\n    if (!replace(selection, textNode)) {\n        return false;\n    }\n\n    selection.collapse(textNode, textNode.nodeValue.length);\n    return true;\n}\n\nfunction arrowLeft(selection, extend) {\n    selection = selection || context.getSelection();\n\n    if (!selection ||\n        !selection.anchorNode ||\n        selection.anchorNode.nodeType !== Node.TEXT_NODE) {\n\n        return false;\n    }\n\n    let { startNode, endNode, startOffset, endOffset, revert } = correctSelection(selection);\n\n    if (!selection.isCollapsed && !extend) {\n        selection.collapse(startNode, startOffset);\n        return true;\n    }\n\n    const isNativeExtend = Boolean(selection.extend);\n    revert = isNativeExtend ? revert : !revert;\n    let node = revert ? startNode : endNode;\n    let offset = revert ? startOffset : endOffset;\n\n    while (node) {\n        if (node.nodeType !== Node.TEXT_NODE) {\n            return false;\n        }\n\n        if (offset === null) {\n            offset = node.nodeValue.length;\n        }\n\n        if (offset - 1 < 0) {\n            node = node.previousSibling;\n            offset = null;\n            continue;\n        }\n\n        const text = node.nodeValue.substring(offset - 1, offset);\n\n        if (checkZws(text)) {\n            offset = offset - 1;\n            continue;\n        }\n\n        break;\n    }\n\n    if (!node || offset === null) {\n        return false;\n    }\n\n    if (extend) {\n        if (isNativeExtend) {\n            selection.extend(node, offset - 1);\n\n        } else {\n            const range = context.document.createRange();\n\n            if (revert) {\n                range.setStart(node, offset - 1);\n                range.setEnd(endNode, endOffset);\n\n            } else {\n                range.setStart(startNode, startOffset);\n                range.setEnd(node, offset - 1);\n            }\n\n            selection.removeAllRanges();\n            selection.addRange(range);\n        }\n\n    } else {\n        selection.collapse(node, offset - 1);\n    }\n\n    return true;\n}\n\nfunction arrowRight(selection, extend) {\n    selection = selection || context.getSelection();\n\n    if (!selection ||\n        !selection.focusNode ||\n        selection.focusNode.nodeType !== Node.TEXT_NODE) {\n\n        return false;\n    }\n\n    let { startNode, endNode, startOffset, endOffset, revert } = correctSelection(selection);\n\n    if (!selection.isCollapsed && !extend) {\n        selection.collapse(endNode, endOffset);\n        return true;\n    }\n\n    let node = revert ? startNode : endNode;\n    let offset = revert ? startOffset : endOffset;\n\n    while (node) {\n        if (node.nodeType !== Node.TEXT_NODE) {\n            return false;\n        }\n\n        const len = node.nodeValue.length;\n\n        if (offset + 1 > len) {\n            node = node.nextSibling;\n            offset = 0;\n            continue;\n        }\n\n        const text = node.nodeValue.substring(offset, offset + 1);\n\n        if (checkZws(text)) {\n            offset = offset + 1;\n            continue;\n        }\n\n        break;\n    }\n\n    if (!node) {\n        return false;\n    }\n\n    if (extend) {\n        const isNativeExtend = Boolean(selection.extend);\n\n        if (isNativeExtend) {\n            selection.extend(node, offset + 1);\n\n        } else {\n            const range = context.document.createRange();\n\n            if (revert) {\n                range.setStart(node, offset + 1);\n                range.setEnd(endNode, endOffset);\n\n            } else {\n                range.setStart(startNode, startOffset);\n                range.setEnd(node, offset + 1);\n            }\n\n            selection.removeAllRanges();\n            selection.addRange(range);\n        }\n\n    } else {\n        selection.collapse(node, offset + 1);\n    }\n\n    return true;\n}\n\nfunction html2text(value) {\n    if (!value) {\n        return '';\n    }\n\n    var DOMContainer = context.document.implementation.createHTMLDocument('').body;\n    DOMContainer.innerText = value;\n\n    return DOMContainer.innerText\n        .replace(/^[\\u0020\\u00a0]+$/gm, '')\n        .replace(/\\n/gm, ' ')\n        .trim();\n}\n\nfunction findTextBorderNode(cursorNode, mode) {\n    let item = cursorNode;\n    let result = null;\n    const sibling = mode === 'begin' ? 'previousSibling' : 'nextSibling';\n\n    while (item && item.nodeType === Node.TEXT_NODE) {\n        result = item;\n        item = item[sibling];\n    }\n\n    return result;\n}\n\nfunction setTextSelection(selection, from, to, nodeSet) {\n    const hasBubbles = bubbleset.hasBubbles(nodeSet);\n    const range = context.document.createRange();\n    range.setStart(from.node, from.offset);\n    range.setEnd(to.node, to.offset);\n\n    const dataText = textClean(range.toString());\n\n    if (dataText || (!dataText && !hasBubbles)) {\n        if (!dataText) {\n            range.collapse();\n        }\n\n        selection.removeAllRanges();\n        selection.addRange(range);\n        return true;\n    }\n\n    return false;\n}\n\nfunction selectFromCursorToStrBegin(selection, nodeSet) {\n    selection = selection || context.getSelection();\n    const node = selection && selection.anchorNode;\n\n    if (!node || node.nodeType !== Node.TEXT_NODE) {\n        return false;\n    }\n\n    const cursorPosition = selection.anchorOffset;\n\n    const fromNode = findTextBorderNode(node, 'begin');\n\n    return setTextSelection(\n        selection,\n        { node: fromNode, offset: 0 },\n        { node, offset: cursorPosition },\n        nodeSet\n    );\n}\n\n\nfunction selectAll(selection, nodeSet) {\n    selection = selection || context.getSelection();\n    const node = selection && selection.anchorNode;\n\n    if (!node || node.nodeType !== Node.TEXT_NODE) {\n        return false;\n    }\n\n    const fromNode = findTextBorderNode(node, 'begin');\n    const toNode = findTextBorderNode(node, 'end');\n\n    return setTextSelection(\n        selection,\n        { node: fromNode, offset: 0 },\n        { node: toNode, offset: toNode.nodeValue ? toNode.nodeValue.length : 0 },\n        nodeSet\n    );\n}\n\nfunction hasNear(selection) {\n    selection = selection || context.getSelection();\n    const node = selection && selection.anchorNode;\n\n    if (!node || node.nodeType !== Node.TEXT_NODE) {\n        return false;\n    }\n\n    const fromNode = findTextBorderNode(node, 'begin');\n    const toNode = findTextBorderNode(node, 'end');\n\n    const range = context.document.createRange();\n\n    range.setStart(fromNode, 0);\n    range.setEnd(toNode, toNode.nodeValue ? toNode.nodeValue.length : 0);\n\n    const dataText = textClean(range.toString());\n\n    return Boolean(dataText);\n}\n\nfunction createZws() {\n    return context.document.createTextNode(TEXT_ZWS);\n}\n\nfunction checkZws(value) {\n    return REG_ZWS.test(value);\n}\n\nfunction textClean(value) {\n    return String(value || '')\n        .trim()\n        .replace(REG_REPLACE_NON_PRINTABLE, '');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/text.js","const raf = require('raf');\nconst context = require('../context');\nconst { dispatch } = require('./events');\nconst { EV } = require('./constant');\n\n/* eslint quotes: 0 */\n\nconst HTML_ESCAPES = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '`': '&#96;'\n};\n\nconst HTML_UNESCAPES = {\n    '&amp;': '&',\n    '&lt;': '<',\n    '&gt;': '>',\n    '&quot;': '\"',\n    '&#39;': \"'\",\n    '&#96;': '`'\n};\n\nconst REG_ESCAPED_HTML = /&(?:amp|lt|gt|quot|#39|#96);/g;\nconst REG_UNESCAPED_HTML = /[&<>\"'`]/g;\nconst REG_HAS_ESCAPED_HTML = RegExp(REG_ESCAPED_HTML.source);\nconst REG_HAS_UNESCAPED_HTML = RegExp(REG_UNESCAPED_HTML.source);\nconst REG_IE = /Trident|Edge/;\nconst REG_MOBILE_IE = /IEMobile/;\n\nexports.getSelection = function (nodeEditor) {\n    const selection = context.getSelection();\n\n    if (selection && selection.anchorNode && (nodeEditor.compareDocumentPosition(selection.anchorNode) & Node.DOCUMENT_POSITION_CONTAINED_BY)) {\n        return selection;\n    }\n};\n\nexports.correctSelection = function (selection) {\n    let endNode = selection.focusNode;\n    let endOffset = selection.focusOffset;\n    let startNode = selection.anchorNode;\n    let startOffset = selection.anchorOffset;\n    let revert = false;\n\n    if (startNode === endNode) {\n        startOffset = Math.min(selection.anchorOffset, selection.focusOffset);\n        endOffset = Math.max(selection.anchorOffset, selection.focusOffset);\n        revert = selection.anchorOffset > selection.focusOffset;\n\n    } else {\n        const position = selection.anchorNode.compareDocumentPosition(selection.focusNode);\n        if (position & Node.DOCUMENT_POSITION_PRECEDING) {\n            startNode = selection.focusNode;\n            startOffset = selection.focusOffset;\n            endNode = selection.anchorNode;\n            endOffset = selection.anchorOffset;\n            revert = true;\n        }\n    }\n\n    return { startNode, endNode, startOffset, endOffset, revert };\n};\n\nexports.throttle = function (callback, runContext) {\n    let throttle = 0;\n    const animationCallback = function () {\n        throttle = 0;\n    };\n\n    return function () {\n        if (throttle) {\n            return;\n        }\n\n        throttle = raf(animationCallback);\n\n        callback.apply(runContext || this, arguments);\n    };\n};\n\nexports.escape = function (data) {\n    data = String(data);\n\n    if (data && REG_HAS_UNESCAPED_HTML.test(data)) {\n        return data.replace(REG_UNESCAPED_HTML, escapeHtmlChar);\n    }\n\n    return data;\n};\n\nexports.unescape = function (data) {\n    data = String(data);\n\n    if (data && REG_HAS_ESCAPED_HTML.test(data)) {\n        return data.replace(REG_ESCAPED_HTML, unescapeHtmlChar);\n    }\n\n    return data;\n};\n\nexports.canUseDrag = (function () {\n    return !REG_IE.test(context.navigator.userAgent);\n})();\n\nexports.isIE = (function () {\n    return REG_IE.test(context.navigator.userAgent);\n})();\n\nexports.isMobileIE = (function () {\n    return REG_MOBILE_IE.test(context.navigator.userAgent);\n})();\n\nexports.ready = (function () {\n    let elements = [];\n    let ready = false;\n    let lock = false;\n\n    function onready() {\n        raf(function () {\n            context.setTimeout(function () {\n                elements.length && dispatch(context, EV.READY, { detail: { data: elements.splice(0) } });\n                ready = true;\n            });\n        });\n    }\n\n    function run() {\n        if (ready && !lock) {\n            lock = true;\n            raf(function () {\n                dispatch(context, EV.READY, { detail: { data: elements.splice(0) } });\n                lock = false;\n            });\n        }\n    }\n\n    if (context.document.readyState === 'complete') {\n        onready();\n\n    } else if (context.document.readyState === 'interactive' && !context.attachEvent && (!context.HTMLImports || context.HTMLImports.ready)) {\n        onready();\n\n    } else {\n        context.addEventListener(context.HTMLImports && !context.HTMLImports.ready ? 'HTMLImportsLoaded' : 'DOMContentLoaded', onready);\n    }\n\n    return function (element) {\n        elements.push(element);\n        run();\n    };\n})();\n\nfunction unescapeHtmlChar(chr) {\n    return HTML_UNESCAPES[ chr ];\n}\n\nfunction escapeHtmlChar(chr) {\n    return HTML_ESCAPES[ chr ];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/utils.js","var now = require('performance-now')\n  , root = typeof window === 'undefined' ? global : window\n  , vendors = ['moz', 'webkit']\n  , suffix = 'AnimationFrame'\n  , raf = root['request' + suffix]\n  , caf = root['cancel' + suffix] || root['cancelRequest' + suffix]\n\nfor(var i = 0; !raf && i < vendors.length; i++) {\n  raf = root[vendors[i] + 'Request' + suffix]\n  caf = root[vendors[i] + 'Cancel' + suffix]\n      || root[vendors[i] + 'CancelRequest' + suffix]\n}\n\n// Some versions of FF have rAF but not cAF\nif(!raf || !caf) {\n  var last = 0\n    , id = 0\n    , queue = []\n    , frameDuration = 1000 / 60\n\n  raf = function(callback) {\n    if(queue.length === 0) {\n      var _now = now()\n        , next = Math.max(0, frameDuration - (_now - last))\n      last = next + _now\n      setTimeout(function() {\n        var cp = queue.slice(0)\n        // Clear queue here to prevent\n        // callbacks from appending listeners\n        // to the current frame's queue\n        queue.length = 0\n        for(var i = 0; i < cp.length; i++) {\n          if(!cp[i].cancelled) {\n            try{\n              cp[i].callback(last)\n            } catch(e) {\n              setTimeout(function() { throw e }, 0)\n            }\n          }\n        }\n      }, Math.round(next))\n    }\n    queue.push({\n      handle: ++id,\n      callback: callback,\n      cancelled: false\n    })\n    return id\n  }\n\n  caf = function(handle) {\n    for(var i = 0; i < queue.length; i++) {\n      if(queue[i].handle === handle) {\n        queue[i].cancelled = true\n      }\n    }\n  }\n}\n\nmodule.exports = function(fn) {\n  // Wrap in a new function to prevent\n  // `cancel` potentially being assigned\n  // to the native rAF function\n  return raf.call(root, fn)\n}\nmodule.exports.cancel = function() {\n  caf.apply(root, arguments)\n}\nmodule.exports.polyfill = function() {\n  root.requestAnimationFrame = raf\n  root.cancelAnimationFrame = caf\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/raf/index.js\n// module id = 7\n// module chunks = 0","// Generated by CoffeeScript 1.7.1\n(function() {\n  var getNanoSeconds, hrtime, loadTime;\n\n  if ((typeof performance !== \"undefined\" && performance !== null) && performance.now) {\n    module.exports = function() {\n      return performance.now();\n    };\n  } else if ((typeof process !== \"undefined\" && process !== null) && process.hrtime) {\n    module.exports = function() {\n      return (getNanoSeconds() - loadTime) / 1e6;\n    };\n    hrtime = process.hrtime;\n    getNanoSeconds = function() {\n      var hr;\n      hr = hrtime();\n      return hr[0] * 1e9 + hr[1];\n    };\n    loadTime = getNanoSeconds();\n  } else if (Date.now) {\n    module.exports = function() {\n      return Date.now() - loadTime;\n    };\n    loadTime = Date.now();\n  } else {\n    module.exports = function() {\n      return new Date().getTime() - loadTime;\n    };\n    loadTime = new Date().getTime();\n  }\n\n}).call(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/raf/~/performance-now/lib/performance-now.js\n// module id = 8\n// module chunks = 0","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/process/browser.js\n// module id = 9\n// module chunks = 0","/**\n * @module x-bubbles/events\n */\n\nconst context = require('../context');\nconst CustomEventCommon = require('../polyfills/CustomEventCommon');\nconst { PROPS } = require('./constant');\n\nexports.scrollX = scrollX;\nexports.scrollY = scrollY;\nexports.dispatch = dispatch;\n\nexports.keyCode = function (event) {\n    return event.charCode || event.keyCode;\n};\n\nexports.metaKey = function (event) {\n    return event.ctrlKey || event.metaKey;\n};\n\nexports.pageX = function (event) {\n    return (event.pageX === null && event.clientX !== null) ?\n        event.clientX + scrollX() :\n        event.pageX;\n};\n\nexports.pageY = function (event) {\n    return (event.pageY === null && event.clientY !== null) ?\n        event.clientY + scrollY() :\n        event.pageY;\n};\n\nexports.one = function (target, eventName, callback) {\n    toggleEvent(target, eventName, callback, true, false, true);\n};\n\nexports.on = function (target, eventName, callback) {\n    toggleEvent(target, eventName, callback);\n};\n\nexports.off = function (target, eventName, callback) {\n    toggleEvent(target, eventName, callback, false);\n};\n\nexports.oneLocal = function (target, eventName, callback) {\n    toggleEvent(target, eventName, callback, true, true, true);\n};\n\nexports.onLocal = function (target, eventName, callback) {\n    toggleEvent(target, eventName, callback, true, true);\n};\n\nexports.offLocal = function (target, eventName, callback) {\n    toggleEvent(target, eventName, callback, false, true);\n};\n\nexports.prevent = function (event) {\n    event.cancelBubble = true;\n    event.returnValue = false;\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n    event.preventDefault();\n    return false;\n};\n\nexports.proxyLocal = function (event) {\n    dispatchLocalEvent(event.currentTarget, event);\n};\n\nfunction scrollX() {\n    const html = context.document.documentElement;\n    const body = context.document.body;\n    return (html && html.scrollLeft || body && body.scrollLeft || 0) - (html.clientLeft || 0);\n}\n\nfunction scrollY() {\n    const html = context.document.documentElement;\n    const body = context.document.body;\n    return (html && html.scrollTop || body && body.scrollTop || 0) - (html.clientTop || 0);\n}\n\n/**\n * Designer events.\n *\n * @example\n * const { Custom } = require('event');\n *\n * new Custom('custom-event', {\n *     bubbles: true,\n *     cancelable: true,\n *     detail: { data: '123' }\n * })\n *\n * @alias module:x-bubbles/event~Custom\n * @constructor\n */\nconst Custom = (function () {\n    if (typeof context.CustomEvent === 'function') {\n        return context.CustomEvent;\n    }\n\n    return CustomEventCommon;\n}());\n\n/**\n * Dispatch event.\n *\n * @example\n * const { dispatch } = require('event');\n * dispatch(node, 'custom-event', {\n *     bubbles: true,\n *     cancelable: true,\n *     detail: { data: '123' }\n * })\n *\n * @alias module:x-bubbles/event.dispatch\n * @param {HTMLElement} element node events\n * @param {string} name event name\n * @param {Object} params the event parameters\n * @param {boolean} [params.bubbles=false]\n * @param {boolean} [params.cancelable=false]\n * @param {*} [params.detail]\n */\nfunction dispatch(element, name, params = {}) {\n    element.dispatchEvent(new Custom(name, params));\n}\n\nfunction dispatchLocalEvent(element, event) {\n    const callbacks = element[ PROPS.LOCAL_EVENTS ] && element[ PROPS.LOCAL_EVENTS ][ event.type ] || [];\n    const sharedData = {};\n\n    for (let i = 0; i < callbacks.length; i++) {\n        if (event.immediatePropagationStopped) {\n            break;\n        }\n\n        callbacks[ i ](event, sharedData);\n    }\n}\n\nfunction oneCallback(element, eventName, callback) {\n    return function _callback(event) {\n        element.removeEventListener(eventName, _callback);\n        callback(event);\n    };\n}\n\nfunction getEventHandlersQueue(element, eventName) {\n    if (!element[ PROPS.LOCAL_EVENTS ]) {\n        element[ PROPS.LOCAL_EVENTS ] = {};\n    }\n\n    if (!element[ PROPS.LOCAL_EVENTS ][ eventName ]) {\n        element[ PROPS.LOCAL_EVENTS ][ eventName ] = [];\n    }\n\n    return element[ PROPS.LOCAL_EVENTS ][ eventName ];\n}\n\nconst EV_ACTIONS = {\n    addLocalEventListener: function (element, eventName, callback) {\n        getEventHandlersQueue(element, eventName).push(callback);\n    },\n\n    removeLocalEventListener: function (element, eventName, callback) {\n        const callbacks = element[ PROPS.LOCAL_EVENTS ] && element[ PROPS.LOCAL_EVENTS ][ eventName ] || [];\n        let i = 0;\n\n        while (i < callbacks.length) {\n            if (callbacks[ i ] === callback) {\n                callbacks.splice(i, 1);\n\n            } else {\n                i++;\n            }\n        }\n    },\n\n    addEventListener: function (element, eventName, callback) {\n        element.addEventListener(eventName, callback);\n    },\n\n    removeEventListener: function (element, eventName, callback) {\n        element.removeEventListener(eventName, callback);\n    },\n};\n\nfunction toggleEvent(element, eventName, userCallback, isSet = true, isLocal = false, isOne = false) {\n    const events = userCallback ? { [ eventName ]: userCallback } : eventName;\n    const action = `${isSet ? 'add' : 'remove'}${isLocal ? 'Local' : ''}EventListener`;\n\n    for (const name in events) {\n        const callback = isOne ? oneCallback(element, name, events[ name ]) : events[ name ];\n        EV_ACTIONS[ action ](element, name, callback);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/events.js","const context = require('../context');\n\n/**\n * @constant {Document}\n * @private\n */\nconst doc = context.document;\n\n/**\n * @constant {Object}\n * @private\n */\nconst protoEvent = context.Event.prototype;\n\nlet issetCustomEvent = false;\n\ntry {\n    issetCustomEvent = Boolean(doc.createEvent('CustomEvent'));\n} catch (e) {\n    // do nothing\n}\n\n/**\n * The original function \"stopImmediatePropagation\"\n * @constant {function}\n * @private\n */\nconst stopImmediatePropagation = protoEvent.stopImmediatePropagation;\n\n/**\n * Override function to set properties \"immediatePropagationStopped\"\n */\nprotoEvent.stopImmediatePropagation = function () {\n    this.immediatePropagationStopped = true;\n\n    if (stopImmediatePropagation) {\n        stopImmediatePropagation.call(this);\n\n    } else {\n        this.stopPropagation();\n    }\n};\n\nlet CustomEventCommon = (function () {\n    if (issetCustomEvent) {\n        return function (eventName, params) {\n            params = params || {};\n\n            let bubbles = Boolean(params.bubbles);\n            let cancelable = Boolean(params.cancelable);\n            let evt = doc.createEvent('CustomEvent');\n\n            evt.initCustomEvent(eventName, bubbles, cancelable, params.detail);\n\n            return evt;\n        };\n    }\n\n    return function (eventName, params) {\n        params = params || {};\n\n        let bubbles = Boolean(params.bubbles);\n        let cancelable = Boolean(params.cancelable);\n        let evt = doc.createEvent('Event');\n\n        evt.initEvent(eventName, bubbles, cancelable);\n        evt.detail = params.detail;\n\n        return evt;\n    };\n}());\n\nCustomEventCommon.prototype = protoEvent;\n\nmodule.exports = CustomEventCommon;\n\n\n\n// WEBPACK FOOTER //\n// ./polyfills/CustomEventCommon.js","exports.KEY = {\n    a: 65,\n    Backspace: 8,\n    Bottom: 40,\n    c: 67,\n    Cmd: 91,\n    Comma: 44, // ,\n    Delete: 46,\n    Enter: 13, // Enter\n    Esc: 27,\n    Home: 36,\n    Left: 37,\n    Right: 39,\n    Semicolon: 59, // ;\n    Space: 32,\n    Tab: 9,\n    Top: 38,\n    x: 88,\n};\n\nexports.CLS = {\n    DRAGSTART: 'drag',\n    DROPZONE: 'dropzone',\n};\n\nexports.EV = {\n    BEFORE_REMOVE: 'before-remove',\n    BUBBLE_EDIT: 'bubble-edit',\n    BUBBLE_INPUT: 'bubble-input',\n    CHANGE: 'change',\n    DRAGEND: 'dragend',\n    DRAGENTER: 'dragenter',\n    DRAGLEAVE: 'dragleave',\n    DRAGSTART: 'dragstart',\n    DROP: 'drop',\n    READY: 'x-bubbles-ready',\n};\n\nexports.PROPS = {\n    BUBBLE_VALUE: '__bubble_value__',\n    CLICK_TIME: '__click_time__',\n    LOCAL_EVENTS: '__events__',\n    LOCK_COPY: '__lock_copy__',\n    OPTIONS: '__options__',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/constant.js","/**\n * @module x-bubbles/cursor\n */\n\nconst context = require('../context');\nconst text = require('./text');\nconst select = require('./select');\nconst utils = require('./utils');\n\nexports.restore = restore;\nexports.restoreBasis = restoreBasis;\n\n/**\n * Reset the cursor position to the end of the input field.\n * This action is forbidden in the IE Mobile because it\n * causes a browser crash. There is still no workaround.\n * @alias module:x-bubbles/cursor.restore\n * @param {HTMLElement} nodeSet\n */\nfunction restore(nodeSet) {\n    if (!utils.isMobileIE) {\n        if (!nodeSet.canAddBubble()) {\n            select.setLast(nodeSet);\n            return;\n        }\n\n        select.clear(nodeSet);\n        const basis = restoreBasis(nodeSet);\n        const selection = context.getSelection();\n        selection.removeAllRanges();\n        selection.collapse(basis, 1);\n    }\n}\n\n/**\n * The creation of the fake text at the end childNodes\n * @alias module:x-bubbles/cursor.restoreBasis\n * @param {HTMLElement} nodeSet\n * @returns {HTMLTextElement} fake text node\n */\nfunction restoreBasis(nodeSet) {\n    let fakeText = text.createZws();\n\n    if (nodeSet.hasChildNodes()) {\n        const lastNode = nodeSet.childNodes[ nodeSet.childNodes.length - 1 ];\n\n        if (lastNode.isEqualNode(fakeText)) {\n            fakeText = lastNode;\n\n        } else {\n            nodeSet.appendChild(fakeText);\n        }\n\n    } else {\n        nodeSet.appendChild(fakeText);\n    }\n\n    return fakeText;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/cursor.js","const context = require('../context');\nconst utils = require('./utils');\nconst bubble = require('./bubble');\nconst bubbleset = require('./bubbleset');\n\nconst slice = Array.prototype.slice;\nconst PATH_SELECTED = '[bubble][selected]';\nconst PATH_NOT_SELECTED = '[bubble]:not([selected])';\n\nexports.all = all;\nexports.allLeft = allLeft;\nexports.add = add;\nexports.clear = clear;\nexports.get = get;\nexports.uniq = uniq;\nexports.head = head;\nexports.last = last;\nexports.has = has;\nexports.range = range;\nexports.toggleUniq = toggleUniq;\nexports.setLast = setLast;\nexports.getEditable = getEditable;\n\nfunction range(node) {\n    if (!bubble.isBubbleNode(node)) {\n        return;\n    }\n\n    const set = node.parentNode;\n    const list = get(set);\n\n    if (!list.length) {\n        uniq(node);\n        return;\n    }\n\n    clear(set);\n\n    const headList = list[0];\n    const lastList = list[ list.length - 1 ];\n\n    if (headList === lastList || !set.startRangeSelect) {\n        set.startRangeSelect = headList;\n    }\n\n    let fromNode;\n    let toNode;\n    const position = node.compareDocumentPosition(set.startRangeSelect);\n\n    if (position & Node.DOCUMENT_POSITION_PRECEDING) {\n        fromNode = set.startRangeSelect;\n        toNode = node;\n\n    } else {\n        fromNode = node;\n        toNode = set.startRangeSelect;\n    }\n\n    if (fromNode && toNode) {\n        let item = fromNode;\n\n        while (item) {\n            if (!setSelected(item)) {\n                break;\n            }\n\n            if (item === toNode) {\n                break;\n            }\n\n            item = item.nextSibling;\n        }\n\n        bubble.bubbling(set);\n    }\n}\n\nfunction all(nodeSet) {\n    slice.call(nodeSet.querySelectorAll(PATH_NOT_SELECTED)).forEach(item => setSelected(item));\n    nodeSet.startRangeSelect = nodeSet.querySelector(PATH_SELECTED);\n\n    bubble.bubbling(nodeSet);\n\n    const selection = context.getSelection();\n    selection && selection.removeAllRanges();\n}\n\nfunction allLeft(nodeSet) {\n    const lastSelectedBubble = last(nodeSet);\n\n    if (!lastSelectedBubble) {\n        return;\n    }\n\n    for (let item = bubbleset.prevBubble(lastSelectedBubble); item; item = bubbleset.prevBubble(item)) {\n        setSelected(item);\n    }\n\n    nodeSet.startRangeSelect = nodeSet.querySelector(PATH_SELECTED);\n\n    bubble.bubbling(nodeSet);\n\n    const selection = context.getSelection();\n    selection && selection.removeAllRanges();\n}\n\nfunction has(nodeSet) {\n    return Boolean(nodeSet.querySelector(PATH_SELECTED));\n}\n\nfunction head(set) {\n    return get(set)[0];\n}\n\nfunction last(set) {\n    const list = get(set);\n    return list[ list.length - 1 ];\n}\n\nfunction get(nodeSet) {\n    return slice.call(nodeSet.querySelectorAll(PATH_SELECTED));\n}\n\nfunction getEditable(nodeSet) {\n    if (!nodeSet.options('selection')) {\n        return false;\n    }\n\n    const selection = utils.getSelection(nodeSet);\n\n    if (selection && selection.rangeCount) {\n        return false;\n    }\n\n    const list = get(nodeSet);\n\n    if (list.length !== 1) {\n        return false;\n    }\n\n    return list[0];\n}\n\nfunction clear(nodeSet) {\n    get(nodeSet).forEach(item => item.removeAttribute('selected'));\n}\n\nfunction add(node) {\n    if (setSelected(node)) {\n        const nodeSet = bubbleset.closestNodeSet(node);\n\n        nodeSet.startRangeSelect = node;\n        // ???\n        bubble.bubbling(nodeSet);\n\n        return true;\n    }\n\n    return false;\n}\n\nfunction uniq(node) {\n    if (!bubble.isBubbleNode(node)) {\n        return false;\n    }\n\n    const nodeSet = bubbleset.closestNodeSet(node);\n    const selection = context.getSelection();\n\n    selection && selection.removeAllRanges();\n    clear(nodeSet);\n\n    return add(node);\n}\n\nfunction setLast(nodeEditor) {\n    return uniq(bubbleset.lastBubble(nodeEditor));\n}\n\nfunction toggleUniq(node) {\n    if (isSelected(node)) {\n        const nodeSet = bubbleset.closestNodeSet(node);\n\n        if (get(nodeSet).length === 1) {\n            return removeSelected(node);\n        }\n    }\n\n    return uniq(node);\n}\n\nfunction isSelected(node) {\n    return bubble.isBubbleNode(node) && node.hasAttribute('selected') || false;\n}\n\nfunction setSelected(node) {\n    if (bubble.isBubbleNode(node)) {\n        node.setAttribute('selected', '');\n        return true;\n    }\n\n    return false;\n}\n\nfunction removeSelected(node) {\n    if (bubble.isBubbleNode(node)) {\n        node.removeAttribute('selected');\n        return true;\n    }\n\n    return false;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/select.js","const native = require('./drag/native');\nconst mouse = require('./drag/mouse');\nconst { canUseDrag } = require('./utils');\n\nexports.init = function (nodeSet) {\n    if (canUseDrag) {\n        return native.init(nodeSet);\n    }\n\n    return mouse.init(nodeSet);\n};\n\nexports.destroy = function (nodeSet) {\n    if (canUseDrag) {\n        return native.destroy(nodeSet);\n    }\n\n    return mouse.destroy(nodeSet);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/drag.js","const context = require('../../context');\nconst select = require('../select');\nconst bubbleset = require('../bubbleset');\nconst events = require('../events');\nconst { CLS } = require('../constant');\nconst { getDragImage, onDropSuccess, DRAG_IMG } = require('./common');\n\nconst EVENTS = {\n    dragend: onDragend,\n    dragenter: onDragenter,\n    dragleave: onDragleave,\n    dragover: onDragover,\n    dragstart: onDragstart,\n    drop: onDrop,\n};\n\nlet currentDragSet = null;\n\nexports.init = function (nodeSet) {\n    events.on(nodeSet, EVENTS);\n};\n\nexports.destroy = function (nodeSet) {\n    events.off(nodeSet, EVENTS);\n};\n\nfunction onDragstart(event) {\n    event.stopPropagation();\n\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n    const nodeBubble = bubbleset.closestNodeBubble(event.target);\n\n    if (!nodeSet || !nodeBubble) {\n        event.preventDefault();\n        return;\n    }\n\n    const selection = context.getSelection();\n    selection && selection.removeAllRanges();\n\n    currentDragSet = nodeSet;\n    nodeSet.classList.add(CLS.DRAGSTART);\n    select.add(nodeBubble);\n\n    event.dataTransfer.effectAllowed = 'move';\n    event.dataTransfer.setData('text/plain', '');\n\n    const list = select.get(currentDragSet);\n\n    if (list.length > 1) {\n        event.dataTransfer.setDragImage(getDragImage(), DRAG_IMG.w, DRAG_IMG.h);\n    }\n}\n\nfunction onDrop(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (!currentDragSet) {\n        return;\n    }\n\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n\n    if (!nodeSet || nodeSet === currentDragSet) {\n        return;\n    }\n\n    const checkBubbleDrop = nodeSet.options('checkBubbleDrop');\n\n    const list = select.get(currentDragSet);\n\n    if (list.length && checkBubbleDrop(list)) {\n        bubbleset.moveBubbles(currentDragSet, nodeSet, list);\n        context.setTimeout(onDropSuccess, 0, currentDragSet, nodeSet);\n    }\n}\n\nfunction onDragover(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (!currentDragSet) {\n        return;\n    }\n\n    event.dataTransfer.dropEffect = 'move';\n}\n\nfunction onDragenter(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (!currentDragSet) {\n        return;\n    }\n\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n    if (nodeSet && nodeSet !== currentDragSet) {\n        nodeSet.classList.add(CLS.DROPZONE);\n    }\n}\n\nfunction onDragleave(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (!currentDragSet) {\n        return;\n    }\n\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n    if (nodeSet && nodeSet !== currentDragSet) {\n        nodeSet.classList.remove(CLS.DROPZONE);\n    }\n}\n\nfunction onDragend(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (!currentDragSet) {\n        return;\n    }\n\n    currentDragSet.classList.remove(CLS.DRAGSTART);\n\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n\n    if (nodeSet && nodeSet !== currentDragSet) {\n        nodeSet.classList.remove(CLS.DROPZONE);\n    }\n\n    currentDragSet = null;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/drag/native.js","const DRAG_IMG = { w: 16, h: 16 };\n\nlet dragImage = null;\n\nexports.DRAG_IMG = DRAG_IMG;\n\nexports.getDragImage = function () {\n    if (!dragImage) {\n        dragImage = new Image();\n        dragImage.src = require('url?mimetype=image/png!./bubbles.png');\n    }\n\n    return dragImage;\n};\n\nexports.onDropSuccess = function (fromNodeSet, toNodeSet) {\n    fromNodeSet.fireChange();\n    toNodeSet.focus();\n    toNodeSet.fireChange();\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/drag/common.js","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE8AAAAVCAMAAAAw/0MlAAABblBMVEUAAABOXIZJWIKCkbeNnMKMmsJNW4VNW4VWZY57ibFHV4KVpMxRYImCkLh9jbpgcJ1fcJ1JWoaZqdNUZpaHmMaVpdJIWolTZJKHmMZEV4iXqNdkdqhjdal2iLx2ib2Knc6PodNJXpJJXpNOYpdpfLKCk8JPYpdofLNugblugrqUptdZdLdZd8Nfeb93js1+ksuGm9SGm9VHaLhJarxKZqxKbL9La7pNbr9Pb71Ucr1Wbag/XqU/X6pAVopffMdjf8ZphMpwicx2js9BW51CWZN/ldCBl9KCmNNFYKRFZbGJndWOodVKX5RKX5ZKYJdWdcNXbKJYdL1KYJtAVYpaeMVJXpJKbMBgebpjeLBjf8VLYp5kd65kgMlofLRog8log8tJYqBth8xugrpviMtNabBxi851jc8/X6t3i8BOaK56kdB9lNFOaa5Ob8FPY5qBl9NGXJODmNOEmdNQbrpRcsJUb7RGXJSTptmUptiUp9kfFguNAAAAK3RSTlMAJCQkJDw8P0JCRUVubpaWlpmZwMDAw8nJzMzV29vb7e3t7fDw+Pn5+fn8jndhZAAAAQhJREFUeF6tz2VXwgAYBtBnhBKKkgoGKPY2urvT7u7ujn/vtsM5fN/e+w8uJEaLa+HvR7Zfl8WILo293Qq8vykQaLXtGnRoPcH6i1L1oEcLidpde6BQc6shslXvaVSHIdD7S9c0Sv5+ACbfFRXftBoYuzijUry1AXPHJ1QK5349pvYOqeSPfCaM8Dkq/EFxHAMst0mDY3cL89Clkis0kqmd/CxgvUt8Ukg8rub4UYCZicTiT0rFY5HnNY4dBNC32GiGwtFt+aLhULOx9CWMdRAMbVXK6cyNfJl0ubL8IYytEDHe0/XX7IZ82e/9S3HsZSDpmSQZT/SiQ+UgGDtU6DKYnYrGTrMBon97+TS1J80efgAAAABJRU5ErkJggg==\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/url-loader?mimetype=image/png!./core/drag/bubbles.png\n// module id = 18\n// module chunks = 0","const context = require('../../context');\nconst events = require('../events');\nconst utils = require('../utils');\nconst select = require('../select');\nconst bubbleset = require('../bubbleset');\nconst Modernizr = require('modernizr');\nconst { CLS, EV } = require('../constant');\nconst { getDragImage, onDropSuccess, DRAG_IMG } = require('./common');\n\nlet currentDragSet = null;\nlet currentMoveSet = null;\nlet currentDragElement = null;\n\nexports.init = function (nodeSet) {\n    events.on(nodeSet, 'mousedown', onMousedown);\n};\n\nexports.destroy = function (nodeSet) {\n    events.off(nodeSet, 'mousedown', onMousedown);\n};\n\nfunction onMousedown(event) {\n    const nodeBubble = bubbleset.closestNodeBubble(event.target);\n    if (!nodeBubble) {\n        return;\n    }\n\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n    if (!nodeSet) {\n        return;\n    }\n\n    event.preventDefault();\n    nodeSet.focus();\n\n    const drag = nodeSet.__drag__ = {\n        nodeBubble: nodeBubble,\n        nodeOffsetX: event.offsetX,\n        nodeOffsetY: event.offsetY,\n        onMousemove: utils.throttle(onMousemove.bind(this, nodeSet)),\n        onMouseup: onMouseup.bind(this, nodeSet),\n        onScroll: utils.throttle(onScroll.bind(this, nodeSet)),\n        x: 0,\n        y: 0,\n    };\n\n    currentDragSet = null;\n    currentMoveSet = null;\n    currentDragElement = null;\n\n    events.one(document, 'mouseup', drag.onMouseup);\n    events.on(document, 'mousemove', drag.onMousemove);\n    events.on(document, 'scroll', drag.onScroll);\n}\n\nfunction onMouseup(dragSet, event) {\n    const drag = dragSet.__drag__;\n    if (!drag) {\n        return;\n    }\n\n    events.off(document, 'mousemove', drag.onMousemove);\n    events.off(document, 'scroll', drag.onScroll);\n    delete dragSet.__drag__;\n\n    if (currentDragElement) {\n        currentDragElement.parentNode && currentDragElement.parentNode.removeChild(currentDragElement);\n        currentDragElement = null;\n    }\n\n    if (currentMoveSet) {\n        const _ = currentMoveSet;\n        currentMoveSet = null;\n\n        _.classList.remove(CLS.DROPZONE);\n        events.dispatch(_, EV.DRAGLEAVE, { bubbles: false, cancelable: false });\n    }\n\n    if (currentDragSet) {\n        const nodeSet = bubbleset.closestNodeSet(event.target);\n\n        if (nodeSet && nodeSet !== currentDragSet) {\n            const list = select.get(currentDragSet);\n            const checkBubbleDrop = nodeSet.options('checkBubbleDrop');\n\n            if (list.length && checkBubbleDrop(list)) {\n                bubbleset.moveBubbles(currentDragSet, nodeSet, list);\n                context.setTimeout(onDropSuccess, 0, currentDragSet, nodeSet);\n            }\n        }\n\n        const tmpDragSet = currentDragSet;\n        currentDragSet = null;\n\n        tmpDragSet.classList.remove(CLS.DRAGSTART);\n        events.dispatch(tmpDragSet, EV.DROP, { bubbles: false, cancelable: false });\n        events.dispatch(\n            tmpDragSet,\n            EV.DRAGEND,\n            { bubbles: false, cancelable: false, detail: { target: select.head(tmpDragSet) } }\n        );\n    }\n}\n\nfunction onMousemove(dragSet) {\n    const drag = dragSet.__drag__;\n    if (!drag) {\n        return;\n    }\n\n    if (!currentDragSet) {\n        const selection = context.getSelection();\n        selection && selection.removeAllRanges();\n\n        currentDragSet = dragSet;\n        currentDragSet.classList.add(CLS.DRAGSTART);\n        select.add(drag.nodeBubble);\n\n        let moveElement;\n\n        const list = select.get(currentDragSet);\n\n        if (list.length === 1) {\n            moveElement = drag.nodeBubble.cloneNode(true);\n        }\n\n        if (!moveElement) {\n            moveElement = getDragImage();\n            drag.nodeOffsetX = DRAG_IMG.w;\n            drag.nodeOffsetY = DRAG_IMG.h;\n        }\n\n        currentDragElement = document.body.appendChild(document.createElement('div'));\n        currentDragElement.style.cssText = 'position:absolute;z-index:9999;pointer-events:none;top:0;left:0;';\n        currentDragElement.appendChild(moveElement);\n\n        events.dispatch(\n            currentDragSet,\n            EV.DRAGSTART,\n            { bubbles: false, cancelable: false, detail: { target: select.head(currentDragSet) } },\n        );\n    }\n\n    drag.x = event.clientX;\n    drag.y = event.clientY;\n    onScroll(dragSet);\n\n    const nodeSet = bubbleset.closestNodeSet(event.target);\n    if (nodeSet && nodeSet !== currentDragSet) {\n        if (currentMoveSet && currentMoveSet !== nodeSet) {\n            currentMoveSet.classList.remove(CLS.DROPZONE);\n            nodeSet.classList.add(CLS.DROPZONE);\n            currentMoveSet = nodeSet;\n            events.dispatch(currentMoveSet, EV.DRAGENTER, { bubbles: false, cancelable: false });\n\n        } else if (!currentMoveSet) {\n            nodeSet.classList.add(CLS.DROPZONE);\n            currentMoveSet = nodeSet;\n            events.dispatch(currentMoveSet, EV.DRAGENTER, { bubbles: false, cancelable: false });\n        }\n\n    } else if (currentMoveSet) {\n        const _ = currentMoveSet;\n        currentMoveSet = null;\n\n        _.classList.remove(CLS.DROPZONE);\n        events.dispatch(_, EV.DRAGLEAVE, { bubbles: false, cancelable: false });\n    }\n}\n\nfunction onScroll(dragSet) {\n    const drag = dragSet.__drag__;\n    if (!drag || !currentDragElement) {\n        return;\n    }\n\n    const x = drag.x - drag.nodeOffsetX + events.scrollX();\n    const y = drag.y - drag.nodeOffsetY + events.scrollY();\n\n    if (Modernizr.csstransforms3d) {\n        currentDragElement.style.transform = `translate3d(${x}px, ${y}px, 0px)`;\n\n    } else if (Modernizr.csstransforms) {\n        currentDragElement.style.transform = `translate(${x}px, ${y}px)`;\n\n    } else {\n        currentDragElement.style.top = `${y}px`;\n        currentDragElement.style.left = `${x}px`;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/drag/mouse.js",";(function(window){\n/*!\n * modernizr v3.3.1\n * Build http://modernizr.com/download?-csstransforms-csstransforms3d-dontmin\n *\n * Copyright (c)\n *  Faruk Ates\n *  Paul Irish\n *  Alex Sexton\n *  Ryan Seddon\n *  Patrick Kettner\n *  Stu Cox\n *  Richard Herrera\n\n * MIT License\n */\n\n/*\n * Modernizr tests which native CSS3 and HTML5 features are available in the\n * current UA and makes the results available to you in two ways: as properties on\n * a global `Modernizr` object, and as classes on the `<html>` element. This\n * information allows you to progressively enhance your pages with a granular level\n * of control over the experience.\n*/\n\n;(function(window, document, undefined){\n  var tests = [];\n  \n\n  /**\n   *\n   * ModernizrProto is the constructor for Modernizr\n   *\n   * @class\n   * @access public\n   */\n\n  var ModernizrProto = {\n    // The current version, dummy\n    _version: '3.3.1',\n\n    // Any settings that don't work as separate modules\n    // can go in here as configuration.\n    _config: {\n      'classPrefix': '',\n      'enableClasses': true,\n      'enableJSClass': true,\n      'usePrefixes': true\n    },\n\n    // Queue of tests\n    _q: [],\n\n    // Stub these for people who are listening\n    on: function(test, cb) {\n      // I don't really think people should do this, but we can\n      // safe guard it a bit.\n      // -- NOTE:: this gets WAY overridden in src/addTest for actual async tests.\n      // This is in case people listen to synchronous tests. I would leave it out,\n      // but the code to *disallow* sync tests in the real version of this\n      // function is actually larger than this.\n      var self = this;\n      setTimeout(function() {\n        cb(self[test]);\n      }, 0);\n    },\n\n    addTest: function(name, fn, options) {\n      tests.push({name: name, fn: fn, options: options});\n    },\n\n    addAsyncTest: function(fn) {\n      tests.push({name: null, fn: fn});\n    }\n  };\n\n  \n\n  // Fake some of Object.create so we can force non test results to be non \"own\" properties.\n  var Modernizr = function() {};\n  Modernizr.prototype = ModernizrProto;\n\n  // Leak modernizr globally when you `require` it rather than force it here.\n  // Overwrite name so constructor name is nicer :D\n  Modernizr = new Modernizr();\n\n  \n\n  var classes = [];\n  \n\n  /**\n   * is returns a boolean if the typeof an obj is exactly type.\n   *\n   * @access private\n   * @function is\n   * @param {*} obj - A thing we want to check the type of\n   * @param {string} type - A string to compare the typeof against\n   * @returns {boolean}\n   */\n\n  function is(obj, type) {\n    return typeof obj === type;\n  }\n  ;\n\n  /**\n   * Run through all tests and detect their support in the current UA.\n   *\n   * @access private\n   */\n\n  function testRunner() {\n    var featureNames;\n    var feature;\n    var aliasIdx;\n    var result;\n    var nameIdx;\n    var featureName;\n    var featureNameSplit;\n\n    for (var featureIdx in tests) {\n      if (tests.hasOwnProperty(featureIdx)) {\n        featureNames = [];\n        feature = tests[featureIdx];\n        // run the test, throw the return value into the Modernizr,\n        // then based on that boolean, define an appropriate className\n        // and push it into an array of classes we'll join later.\n        //\n        // If there is no name, it's an 'async' test that is run,\n        // but not directly added to the object. That should\n        // be done with a post-run addTest call.\n        if (feature.name) {\n          featureNames.push(feature.name.toLowerCase());\n\n          if (feature.options && feature.options.aliases && feature.options.aliases.length) {\n            // Add all the aliases into the names list\n            for (aliasIdx = 0; aliasIdx < feature.options.aliases.length; aliasIdx++) {\n              featureNames.push(feature.options.aliases[aliasIdx].toLowerCase());\n            }\n          }\n        }\n\n        // Run the test, or use the raw value if it's not a function\n        result = is(feature.fn, 'function') ? feature.fn() : feature.fn;\n\n\n        // Set each of the names on the Modernizr object\n        for (nameIdx = 0; nameIdx < featureNames.length; nameIdx++) {\n          featureName = featureNames[nameIdx];\n          // Support dot properties as sub tests. We don't do checking to make sure\n          // that the implied parent tests have been added. You must call them in\n          // order (either in the test, or make the parent test a dependency).\n          //\n          // Cap it to TWO to make the logic simple and because who needs that kind of subtesting\n          // hashtag famous last words\n          featureNameSplit = featureName.split('.');\n\n          if (featureNameSplit.length === 1) {\n            Modernizr[featureNameSplit[0]] = result;\n          } else {\n            // cast to a Boolean, if not one already\n            /* jshint -W053 */\n            if (Modernizr[featureNameSplit[0]] && !(Modernizr[featureNameSplit[0]] instanceof Boolean)) {\n              Modernizr[featureNameSplit[0]] = new Boolean(Modernizr[featureNameSplit[0]]);\n            }\n\n            Modernizr[featureNameSplit[0]][featureNameSplit[1]] = result;\n          }\n\n          classes.push((result ? '' : 'no-') + featureNameSplit.join('-'));\n        }\n      }\n    }\n  }\n  ;\n\n  /**\n   * If the browsers follow the spec, then they would expose vendor-specific style as:\n   *   elem.style.WebkitBorderRadius\n   * instead of something like the following, which would be technically incorrect:\n   *   elem.style.webkitBorderRadius\n\n   * Webkit ghosts their properties in lowercase but Opera & Moz do not.\n   * Microsoft uses a lowercase `ms` instead of the correct `Ms` in IE8+\n   *   erik.eae.net/archives/2008/03/10/21.48.10/\n\n   * More here: github.com/Modernizr/Modernizr/issues/issue/21\n   *\n   * @access private\n   * @returns {string} The string representing the vendor-specific style properties\n   */\n\n  var omPrefixes = 'Moz O ms Webkit';\n  \n\n  var cssomPrefixes = (ModernizrProto._config.usePrefixes ? omPrefixes.split(' ') : []);\n  ModernizrProto._cssomPrefixes = cssomPrefixes;\n  \n\n\n  /**\n   * contains checks to see if a string contains another string\n   *\n   * @access private\n   * @function contains\n   * @param {string} str - The string we want to check for substrings\n   * @param {string} substr - The substring we want to search the first string for\n   * @returns {boolean}\n   */\n\n  function contains(str, substr) {\n    return !!~('' + str).indexOf(substr);\n  }\n\n  ;\n\n  /**\n   * docElement is a convenience wrapper to grab the root element of the document\n   *\n   * @access private\n   * @returns {HTMLElement|SVGElement} The root element of the document\n   */\n\n  var docElement = document.documentElement;\n  \n\n  /**\n   * A convenience helper to check if the document we are running in is an SVG document\n   *\n   * @access private\n   * @returns {boolean}\n   */\n\n  var isSVG = docElement.nodeName.toLowerCase() === 'svg';\n  \n\n  /**\n   * createElement is a convenience wrapper around document.createElement. Since we\n   * use createElement all over the place, this allows for (slightly) smaller code\n   * as well as abstracting away issues with creating elements in contexts other than\n   * HTML documents (e.g. SVG documents).\n   *\n   * @access private\n   * @function createElement\n   * @returns {HTMLElement|SVGElement} An HTML or SVG element\n   */\n\n  function createElement() {\n    if (typeof document.createElement !== 'function') {\n      // This is the case in IE7, where the type of createElement is \"object\".\n      // For this reason, we cannot call apply() as Object is not a Function.\n      return document.createElement(arguments[0]);\n    } else if (isSVG) {\n      return document.createElementNS.call(document, 'http://www.w3.org/2000/svg', arguments[0]);\n    } else {\n      return document.createElement.apply(document, arguments);\n    }\n  }\n\n  ;\n\n  /**\n   * Create our \"modernizr\" element that we do most feature tests on.\n   *\n   * @access private\n   */\n\n  var modElem = {\n    elem: createElement('modernizr')\n  };\n\n  // Clean up this element\n  Modernizr._q.push(function() {\n    delete modElem.elem;\n  });\n\n  \n\n  var mStyle = {\n    style: modElem.elem.style\n  };\n\n  // kill ref for gc, must happen before mod.elem is removed, so we unshift on to\n  // the front of the queue.\n  Modernizr._q.unshift(function() {\n    delete mStyle.style;\n  });\n\n  \n\n  /**\n   * getBody returns the body of a document, or an element that can stand in for\n   * the body if a real body does not exist\n   *\n   * @access private\n   * @function getBody\n   * @returns {HTMLElement|SVGElement} Returns the real body of a document, or an\n   * artificially created element that stands in for the body\n   */\n\n  function getBody() {\n    // After page load injecting a fake body doesn't work so check if body exists\n    var body = document.body;\n\n    if (!body) {\n      // Can't use the real body create a fake one.\n      body = createElement(isSVG ? 'svg' : 'body');\n      body.fake = true;\n    }\n\n    return body;\n  }\n\n  ;\n\n  /**\n   * injectElementWithStyles injects an element with style element and some CSS rules\n   *\n   * @access private\n   * @function injectElementWithStyles\n   * @param {string} rule - String representing a css rule\n   * @param {function} callback - A function that is used to test the injected element\n   * @param {number} [nodes] - An integer representing the number of additional nodes you want injected\n   * @param {string[]} [testnames] - An array of strings that are used as ids for the additional nodes\n   * @returns {boolean}\n   */\n\n  function injectElementWithStyles(rule, callback, nodes, testnames) {\n    var mod = 'modernizr';\n    var style;\n    var ret;\n    var node;\n    var docOverflow;\n    var div = createElement('div');\n    var body = getBody();\n\n    if (parseInt(nodes, 10)) {\n      // In order not to give false positives we create a node for each test\n      // This also allows the method to scale for unspecified uses\n      while (nodes--) {\n        node = createElement('div');\n        node.id = testnames ? testnames[nodes] : mod + (nodes + 1);\n        div.appendChild(node);\n      }\n    }\n\n    style = createElement('style');\n    style.type = 'text/css';\n    style.id = 's' + mod;\n\n    // IE6 will false positive on some tests due to the style element inside the test div somehow interfering offsetHeight, so insert it into body or fakebody.\n    // Opera will act all quirky when injecting elements in documentElement when page is served as xml, needs fakebody too. #270\n    (!body.fake ? div : body).appendChild(style);\n    body.appendChild(div);\n\n    if (style.styleSheet) {\n      style.styleSheet.cssText = rule;\n    } else {\n      style.appendChild(document.createTextNode(rule));\n    }\n    div.id = mod;\n\n    if (body.fake) {\n      //avoid crashing IE8, if background image is used\n      body.style.background = '';\n      //Safari 5.13/5.1.4 OSX stops loading if ::-webkit-scrollbar is used and scrollbars are visible\n      body.style.overflow = 'hidden';\n      docOverflow = docElement.style.overflow;\n      docElement.style.overflow = 'hidden';\n      docElement.appendChild(body);\n    }\n\n    ret = callback(div, rule);\n    // If this is done after page load we don't want to remove the body so check if body exists\n    if (body.fake) {\n      body.parentNode.removeChild(body);\n      docElement.style.overflow = docOverflow;\n      // Trigger layout so kinetic scrolling isn't disabled in iOS6+\n      docElement.offsetHeight;\n    } else {\n      div.parentNode.removeChild(div);\n    }\n\n    return !!ret;\n\n  }\n\n  ;\n\n  /**\n   * domToCSS takes a camelCase string and converts it to kebab-case\n   * e.g. boxSizing -> box-sizing\n   *\n   * @access private\n   * @function domToCSS\n   * @param {string} name - String name of camelCase prop we want to convert\n   * @returns {string} The kebab-case version of the supplied name\n   */\n\n  function domToCSS(name) {\n    return name.replace(/([A-Z])/g, function(str, m1) {\n      return '-' + m1.toLowerCase();\n    }).replace(/^ms-/, '-ms-');\n  }\n  ;\n\n  /**\n   * nativeTestProps allows for us to use native feature detection functionality if available.\n   * some prefixed form, or false, in the case of an unsupported rule\n   *\n   * @access private\n   * @function nativeTestProps\n   * @param {array} props - An array of property names\n   * @param {string} value - A string representing the value we want to check via @supports\n   * @returns {boolean|undefined} A boolean when @supports exists, undefined otherwise\n   */\n\n  // Accepts a list of property names and a single value\n  // Returns `undefined` if native detection not available\n  function nativeTestProps(props, value) {\n    var i = props.length;\n    // Start with the JS API: http://www.w3.org/TR/css3-conditional/#the-css-interface\n    if ('CSS' in window && 'supports' in window.CSS) {\n      // Try every prefixed variant of the property\n      while (i--) {\n        if (window.CSS.supports(domToCSS(props[i]), value)) {\n          return true;\n        }\n      }\n      return false;\n    }\n    // Otherwise fall back to at-rule (for Opera 12.x)\n    else if ('CSSSupportsRule' in window) {\n      // Build a condition string for every prefixed variant\n      var conditionText = [];\n      while (i--) {\n        conditionText.push('(' + domToCSS(props[i]) + ':' + value + ')');\n      }\n      conditionText = conditionText.join(' or ');\n      return injectElementWithStyles('@supports (' + conditionText + ') { #modernizr { position: absolute; } }', function(node) {\n        return getComputedStyle(node, null).position == 'absolute';\n      });\n    }\n    return undefined;\n  }\n  ;\n\n  /**\n   * cssToDOM takes a kebab-case string and converts it to camelCase\n   * e.g. box-sizing -> boxSizing\n   *\n   * @access private\n   * @function cssToDOM\n   * @param {string} name - String name of kebab-case prop we want to convert\n   * @returns {string} The camelCase version of the supplied name\n   */\n\n  function cssToDOM(name) {\n    return name.replace(/([a-z])-([a-z])/g, function(str, m1, m2) {\n      return m1 + m2.toUpperCase();\n    }).replace(/^-/, '');\n  }\n  ;\n\n  // testProps is a generic CSS / DOM property test.\n\n  // In testing support for a given CSS property, it's legit to test:\n  //    `elem.style[styleName] !== undefined`\n  // If the property is supported it will return an empty string,\n  // if unsupported it will return undefined.\n\n  // We'll take advantage of this quick test and skip setting a style\n  // on our modernizr element, but instead just testing undefined vs\n  // empty string.\n\n  // Property names can be provided in either camelCase or kebab-case.\n\n  function testProps(props, prefixed, value, skipValueTest) {\n    skipValueTest = is(skipValueTest, 'undefined') ? false : skipValueTest;\n\n    // Try native detect first\n    if (!is(value, 'undefined')) {\n      var result = nativeTestProps(props, value);\n      if (!is(result, 'undefined')) {\n        return result;\n      }\n    }\n\n    // Otherwise do it properly\n    var afterInit, i, propsLength, prop, before;\n\n    // If we don't have a style element, that means we're running async or after\n    // the core tests, so we'll need to create our own elements to use\n\n    // inside of an SVG element, in certain browsers, the `style` element is only\n    // defined for valid tags. Therefore, if `modernizr` does not have one, we\n    // fall back to a less used element and hope for the best.\n    var elems = ['modernizr', 'tspan'];\n    while (!mStyle.style) {\n      afterInit = true;\n      mStyle.modElem = createElement(elems.shift());\n      mStyle.style = mStyle.modElem.style;\n    }\n\n    // Delete the objects if we created them.\n    function cleanElems() {\n      if (afterInit) {\n        delete mStyle.style;\n        delete mStyle.modElem;\n      }\n    }\n\n    propsLength = props.length;\n    for (i = 0; i < propsLength; i++) {\n      prop = props[i];\n      before = mStyle.style[prop];\n\n      if (contains(prop, '-')) {\n        prop = cssToDOM(prop);\n      }\n\n      if (mStyle.style[prop] !== undefined) {\n\n        // If value to test has been passed in, do a set-and-check test.\n        // 0 (integer) is a valid property value, so check that `value` isn't\n        // undefined, rather than just checking it's truthy.\n        if (!skipValueTest && !is(value, 'undefined')) {\n\n          // Needs a try catch block because of old IE. This is slow, but will\n          // be avoided in most cases because `skipValueTest` will be used.\n          try {\n            mStyle.style[prop] = value;\n          } catch (e) {}\n\n          // If the property value has changed, we assume the value used is\n          // supported. If `value` is empty string, it'll fail here (because\n          // it hasn't changed), which matches how browsers have implemented\n          // CSS.supports()\n          if (mStyle.style[prop] != before) {\n            cleanElems();\n            return prefixed == 'pfx' ? prop : true;\n          }\n        }\n        // Otherwise just return true, or the property name if this is a\n        // `prefixed()` call\n        else {\n          cleanElems();\n          return prefixed == 'pfx' ? prop : true;\n        }\n      }\n    }\n    cleanElems();\n    return false;\n  }\n\n  ;\n\n  /**\n   * List of JavaScript DOM values used for tests\n   *\n   * @memberof Modernizr\n   * @name Modernizr._domPrefixes\n   * @optionName Modernizr._domPrefixes\n   * @optionProp domPrefixes\n   * @access public\n   * @example\n   *\n   * Modernizr._domPrefixes is exactly the same as [_prefixes](#modernizr-_prefixes), but rather\n   * than kebab-case properties, all properties are their Capitalized variant\n   *\n   * ```js\n   * Modernizr._domPrefixes === [ \"Moz\", \"O\", \"ms\", \"Webkit\" ];\n   * ```\n   */\n\n  var domPrefixes = (ModernizrProto._config.usePrefixes ? omPrefixes.toLowerCase().split(' ') : []);\n  ModernizrProto._domPrefixes = domPrefixes;\n  \n\n  /**\n   * fnBind is a super small [bind](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind) polyfill.\n   *\n   * @access private\n   * @function fnBind\n   * @param {function} fn - a function you want to change `this` reference to\n   * @param {object} that - the `this` you want to call the function with\n   * @returns {function} The wrapped version of the supplied function\n   */\n\n  function fnBind(fn, that) {\n    return function() {\n      return fn.apply(that, arguments);\n    };\n  }\n\n  ;\n\n  /**\n   * testDOMProps is a generic DOM property test; if a browser supports\n   *   a certain property, it won't return undefined for it.\n   *\n   * @access private\n   * @function testDOMProps\n   * @param {array.<string>} props - An array of properties to test for\n   * @param {object} obj - An object or Element you want to use to test the parameters again\n   * @param {boolean|object} elem - An Element to bind the property lookup again. Use `false` to prevent the check\n   */\n  function testDOMProps(props, obj, elem) {\n    var item;\n\n    for (var i in props) {\n      if (props[i] in obj) {\n\n        // return the property name as a string\n        if (elem === false) {\n          return props[i];\n        }\n\n        item = obj[props[i]];\n\n        // let's bind a function\n        if (is(item, 'function')) {\n          // bind to obj unless overriden\n          return fnBind(item, elem || obj);\n        }\n\n        // return the unbound function or obj or value\n        return item;\n      }\n    }\n    return false;\n  }\n\n  ;\n\n  /**\n   * testPropsAll tests a list of DOM properties we want to check against.\n   * We specify literally ALL possible (known and/or likely) properties on\n   * the element including the non-vendor prefixed one, for forward-\n   * compatibility.\n   *\n   * @access private\n   * @function testPropsAll\n   * @param {string} prop - A string of the property to test for\n   * @param {string|object} [prefixed] - An object to check the prefixed properties on. Use a string to skip\n   * @param {HTMLElement|SVGElement} [elem] - An element used to test the property and value against\n   * @param {string} [value] - A string of a css value\n   * @param {boolean} [skipValueTest] - An boolean representing if you want to test if value sticks when set\n   */\n  function testPropsAll(prop, prefixed, elem, value, skipValueTest) {\n\n    var ucProp = prop.charAt(0).toUpperCase() + prop.slice(1),\n    props = (prop + ' ' + cssomPrefixes.join(ucProp + ' ') + ucProp).split(' ');\n\n    // did they call .prefixed('boxSizing') or are we just testing a prop?\n    if (is(prefixed, 'string') || is(prefixed, 'undefined')) {\n      return testProps(props, prefixed, value, skipValueTest);\n\n      // otherwise, they called .prefixed('requestAnimationFrame', window[, elem])\n    } else {\n      props = (prop + ' ' + (domPrefixes).join(ucProp + ' ') + ucProp).split(' ');\n      return testDOMProps(props, prefixed, elem);\n    }\n  }\n\n  // Modernizr.testAllProps() investigates whether a given style property,\n  // or any of its vendor-prefixed variants, is recognized\n  //\n  // Note that the property names must be provided in the camelCase variant.\n  // Modernizr.testAllProps('boxSizing')\n  ModernizrProto.testAllProps = testPropsAll;\n\n  \n\n  /**\n   * testAllProps determines whether a given CSS property is supported in the browser\n   *\n   * @memberof Modernizr\n   * @name Modernizr.testAllProps\n   * @optionName Modernizr.testAllProps()\n   * @optionProp testAllProps\n   * @access public\n   * @function testAllProps\n   * @param {string} prop - String naming the property to test (either camelCase or kebab-case)\n   * @param {string} [value] - String of the value to test\n   * @param {boolean} [skipValueTest=false] - Whether to skip testing that the value is supported when using non-native detection\n   * @example\n   *\n   * testAllProps determines whether a given CSS property, in some prefixed form,\n   * is supported by the browser.\n   *\n   * ```js\n   * testAllProps('boxSizing')  // true\n   * ```\n   *\n   * It can optionally be given a CSS value in string form to test if a property\n   * value is valid\n   *\n   * ```js\n   * testAllProps('display', 'block') // true\n   * testAllProps('display', 'penguin') // false\n   * ```\n   *\n   * A boolean can be passed as a third parameter to skip the value check when\n   * native detection (@supports) isn't available.\n   *\n   * ```js\n   * testAllProps('shapeOutside', 'content-box', true);\n   * ```\n   */\n\n  function testAllProps(prop, value, skipValueTest) {\n    return testPropsAll(prop, undefined, undefined, value, skipValueTest);\n  }\n  ModernizrProto.testAllProps = testAllProps;\n  \n/*!\n{\n  \"name\": \"CSS Transforms\",\n  \"property\": \"csstransforms\",\n  \"caniuse\": \"transforms2d\",\n  \"tags\": [\"css\"]\n}\n!*/\n\n  Modernizr.addTest('csstransforms', function() {\n    // Android < 3.0 is buggy, so we sniff and blacklist\n    // http://git.io/hHzL7w\n    return navigator.userAgent.indexOf('Android 2.') === -1 &&\n           testAllProps('transform', 'scale(1)', true);\n  });\n\n\n  /**\n   * testStyles injects an element with style element and some CSS rules\n   *\n   * @memberof Modernizr\n   * @name Modernizr.testStyles\n   * @optionName Modernizr.testStyles()\n   * @optionProp testStyles\n   * @access public\n   * @function testStyles\n   * @param {string} rule - String representing a css rule\n   * @param {function} callback - A function that is used to test the injected element\n   * @param {number} [nodes] - An integer representing the number of additional nodes you want injected\n   * @param {string[]} [testnames] - An array of strings that are used as ids for the additional nodes\n   * @returns {boolean}\n   * @example\n   *\n   * `Modernizr.testStyles` takes a CSS rule and injects it onto the current page\n   * along with (possibly multiple) DOM elements. This lets you check for features\n   * that can not be detected by simply checking the [IDL](https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Interface_development_guide/IDL_interface_rules).\n   *\n   * ```js\n   * Modernizr.testStyles('#modernizr { width: 9px; color: papayawhip; }', function(elem, rule) {\n   *   // elem is the first DOM node in the page (by default #modernizr)\n   *   // rule is the first argument you supplied - the CSS rule in string form\n   *\n   *   addTest('widthworks', elem.style.width === '9px')\n   * });\n   * ```\n   *\n   * If your test requires multiple nodes, you can include a third argument\n   * indicating how many additional div elements to include on the page. The\n   * additional nodes are injected as children of the `elem` that is returned as\n   * the first argument to the callback.\n   *\n   * ```js\n   * Modernizr.testStyles('#modernizr {width: 1px}; #modernizr2 {width: 2px}', function(elem) {\n   *   document.getElementById('modernizr').style.width === '1px'; // true\n   *   document.getElementById('modernizr2').style.width === '2px'; // true\n   *   elem.firstChild === document.getElementById('modernizr2'); // true\n   * }, 1);\n   * ```\n   *\n   * By default, all of the additional elements have an ID of `modernizr[n]`, where\n   * `n` is its index (e.g. the first additional, second overall is `#modernizr2`,\n   * the second additional is `#modernizr3`, etc.).\n   * If you want to have more meaningful IDs for your function, you can provide\n   * them as the fourth argument, as an array of strings\n   *\n   * ```js\n   * Modernizr.testStyles('#foo {width: 10px}; #bar {height: 20px}', function(elem) {\n   *   elem.firstChild === document.getElementById('foo'); // true\n   *   elem.lastChild === document.getElementById('bar'); // true\n   * }, 2, ['foo', 'bar']);\n   * ```\n   *\n   */\n\n  var testStyles = ModernizrProto.testStyles = injectElementWithStyles;\n  \n/*!\n{\n  \"name\": \"CSS Supports\",\n  \"property\": \"supports\",\n  \"caniuse\": \"css-featurequeries\",\n  \"tags\": [\"css\"],\n  \"builderAliases\": [\"css_supports\"],\n  \"notes\": [{\n    \"name\": \"W3 Spec\",\n    \"href\": \"http://dev.w3.org/csswg/css3-conditional/#at-supports\"\n  },{\n    \"name\": \"Related Github Issue\",\n    \"href\": \"github.com/Modernizr/Modernizr/issues/648\"\n  },{\n    \"name\": \"W3 Info\",\n    \"href\": \"http://dev.w3.org/csswg/css3-conditional/#the-csssupportsrule-interface\"\n  }]\n}\n!*/\n\n  var newSyntax = 'CSS' in window && 'supports' in window.CSS;\n  var oldSyntax = 'supportsCSS' in window;\n  Modernizr.addTest('supports', newSyntax || oldSyntax);\n\n/*!\n{\n  \"name\": \"CSS Transforms 3D\",\n  \"property\": \"csstransforms3d\",\n  \"caniuse\": \"transforms3d\",\n  \"tags\": [\"css\"],\n  \"warnings\": [\n    \"Chrome may occassionally fail this test on some systems; more info: https://code.google.com/p/chromium/issues/detail?id=129004\"\n  ]\n}\n!*/\n\n  Modernizr.addTest('csstransforms3d', function() {\n    var ret = !!testAllProps('perspective', '1px', true);\n    var usePrefix = Modernizr._config.usePrefixes;\n\n    // Webkit's 3D transforms are passed off to the browser's own graphics renderer.\n    //   It works fine in Safari on Leopard and Snow Leopard, but not in Chrome in\n    //   some conditions. As a result, Webkit typically recognizes the syntax but\n    //   will sometimes throw a false positive, thus we must do a more thorough check:\n    if (ret && (!usePrefix || 'webkitPerspective' in docElement.style)) {\n      var mq;\n      var defaultStyle = '#modernizr{width:0;height:0}';\n      // Use CSS Conditional Rules if available\n      if (Modernizr.supports) {\n        mq = '@supports (perspective: 1px)';\n      } else {\n        // Otherwise, Webkit allows this media query to succeed only if the feature is enabled.\n        // `@media (transform-3d),(-webkit-transform-3d){ ... }`\n        mq = '@media (transform-3d)';\n        if (usePrefix) {\n          mq += ',(-webkit-transform-3d)';\n        }\n      }\n\n      mq += '{#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}';\n\n      testStyles(defaultStyle + mq, function(elem) {\n        ret = elem.offsetWidth === 7 && elem.offsetHeight === 18;\n      });\n    }\n\n    return ret;\n  });\n\n\n  // Run each test\n  testRunner();\n\n  delete ModernizrProto.addTest;\n  delete ModernizrProto.addAsyncTest;\n\n  // Run the things that are supposed to run after the tests\n  for (var i = 0; i < Modernizr._q.length; i++) {\n    Modernizr._q[i]();\n  }\n\n  // Leak Modernizr namespace\n  window.Modernizr = Modernizr;\n\n\n;\n\n})(window, document);\nmodule.exports = window.Modernizr;\n})(window);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../.modernizrrc\n// module id = 20\n// module chunks = 0","const events = require('../events');\nconst { PROPS } = require('../constant');\n\n/**\n * @param {Event} event\n * @returns {?boolean}\n */\nmodule.exports = function (event) {\n    if (event.currentTarget[ PROPS.LOCK_COPY ]) {\n        return events.prevent(event);\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/common/blur.js","const events = require('../events');\nconst bubbleset = require('../bubbleset');\nconst { PROPS } = require('../constant');\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {HTMLElement} [sharedData.nodeEditor]\n * @param {HTMLElement} [sharedData.nodeBubble]\n * @param {boolean} [sharedData.isDblclick]\n * @returns {?boolean}\n */\nmodule.exports = function (event, sharedData) {\n    const nodeEditor = bubbleset.closestNodeSet(event.target);\n    if (!nodeEditor) {\n        return events.prevent(event);\n    }\n\n    sharedData.nodeEditor = nodeEditor;\n    sharedData.nodeBubble = bubbleset.closestNodeBubble(event.target);\n    sharedData.isDblclick = false;\n    sharedData.canAddBubble = nodeEditor.canAddBubble();\n\n    if (sharedData.nodeBubble) {\n        const clickTime = Date.now();\n        sharedData.isDblclick = nodeEditor[ PROPS.CLICK_TIME ] && (clickTime - nodeEditor[ PROPS.CLICK_TIME ]) < 200;\n\n        nodeEditor[ PROPS.CLICK_TIME ] = clickTime;\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/common/click.js","const raf = require('raf');\nconst context = require('../../context');\nconst events = require('../events');\nconst { PROPS } = require('../constant');\n\n/**\n * @param {Event} event\n * @returns {?boolean}\n */\nmodule.exports = function (event) {\n    const nodeEditor = event.currentTarget;\n    if (nodeEditor[ PROPS.LOCK_COPY ]) {\n        events.prevent(event);\n        delete nodeEditor[ PROPS.LOCK_COPY ];\n\n        // Safary 10 не сбрасывает курсор без задержки\n        raf(() => {\n            const selection = context.getSelection();\n            selection && selection.removeAllRanges();\n        });\n\n        return false;\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/common/focus.js","const utils = require('../utils');\nconst events = require('../events');\nconst { KEY } = require('../constant');\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nmodule.exports = function (event, sharedData) {\n    const code = events.keyCode(event);\n    sharedData.nodeEditor = event.currentTarget;\n\n    switch (code) {\n    case KEY.Left:\n    case KEY.Right:\n    case KEY.Delete:\n    case KEY.Backspace:\n        event.preventDefault();\n        sharedData.selection = utils.getSelection(event.currentTarget);\n        break;\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/common/keydown.js","const bubble = require('../bubble');\n\n/**\n * @param {Event} event\n */\nmodule.exports = function (event) {\n    bubble.bubbling(event.currentTarget);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/editor/blur.js","const events = require('../events');\nconst bubble = require('../bubble');\nconst cursor = require('../cursor');\nconst utils = require('../utils');\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {HTMLElement} sharedData.nodeEditor\n * @param {HTMLElement} [sharedData.nodeBubble]\n * @param {boolean} sharedData.isDblclick\n */\nmodule.exports = function (event, sharedData) {\n    const nodeEditor = sharedData.nodeEditor;\n    const nodeBubble = sharedData.nodeBubble;\n    const isDblclick = sharedData.isDblclick;\n\n    if (nodeBubble) {\n        if (isDblclick) {\n            if (!event.shiftKey && !events.metaKey(event)) {\n                bubble.edit(nodeEditor, nodeBubble);\n            }\n\n        } else if (!nodeEditor.options('selection')) {\n            bubble.bubbling(nodeEditor);\n            cursor.restore(nodeEditor);\n        }\n    } else {\n        const selection = utils.getSelection(nodeEditor);\n\n        if (!selection || selection.anchorNode.nodeType !== Node.TEXT_NODE) {\n            cursor.restore(nodeEditor);\n        }\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/editor/click.js","const bubbleset = require('../bubbleset');\n\nmodule.exports = function (event) {\n    const nodeEditor = bubbleset.closestNodeSet(event.target);\n\n    if (!nodeEditor) {\n        return;\n    }\n\n    const nodeBubble = bubbleset.closestNodeBubble(event.target);\n\n    // Don't show cursor if can't add bubble\n    if (!nodeBubble && !nodeEditor.canAddBubble()) {\n        nodeEditor.focus();\n        event.preventDefault();\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/editor/mousedown.js","const raf = require('raf');\nconst cursor = require('../cursor');\nconst context = require('../../context');\n\n/**\n * @param {Event} event\n */\nmodule.exports = function (event) {\n    const nodeEditor = event.currentTarget;\n\n    // Don't show cursor if can't add bubble\n    if (!nodeEditor.canAddBubble()) {\n        // Safary 10 не сбрасывает курсор без задержки\n        raf(() => {\n            const selection = context.getSelection();\n            selection && selection.removeAllRanges();\n        });\n    }\n\n    cursor.restore(nodeEditor);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/editor/focus.js","const events = require('../events');\nconst bubble = require('../bubble');\nconst cursor = require('../cursor');\nconst text = require('../text');\nconst bubbleset = require('../bubbleset');\nconst { KEY } = require('../constant');\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isTextSelectAll]\n * @param {boolean} [sharedData.isTextSelectedFromBeginToCursor]\n * @param {boolean} [sharedData.isEmptyLeft]\n * @param {boolean} [sharedData.isEmptyRight]\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nmodule.exports = function (event, sharedData) {\n    const code = events.keyCode(event);\n    const metaKey = events.metaKey(event);\n\n    switch (code) {\n    case KEY.Esc:\n        event.preventDefault();\n        bubble.bubbling(sharedData.nodeEditor);\n        cursor.restore(sharedData.nodeEditor);\n        break;\n\n    case KEY.Backspace:\n        onBackspace(event, sharedData);\n        break;\n\n    case KEY.Delete:\n        onDelete(event, sharedData);\n        break;\n\n    case KEY.Left:\n        onArrowLeft(event, sharedData);\n        break;\n\n    case KEY.Right:\n        onArrowRight(event, sharedData);\n        break;\n\n    case KEY.Home:\n        if (event.shiftKey) {\n            event.preventDefault();\n            sharedData.isTextSelectedFromBeginToCursor = text.selectFromCursorToStrBegin(null, sharedData.nodeEditor);\n        }\n        break;\n\n    case KEY.a:\n        if (metaKey) {\n            event.preventDefault();\n            sharedData.isTextSelectAll = text.selectAll(null, sharedData.nodeEditor);\n        }\n        break;\n    }\n};\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isEmptyLeft]\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nfunction onBackspace(event, sharedData) {\n    const selection = sharedData.selection;\n    if (!selection) {\n        return;\n    }\n\n    const nodeEditor = sharedData.nodeEditor;\n\n    if (!selection.isCollapsed || text.arrowLeft(selection, true)) {\n        text.remove(selection);\n        nodeEditor.fireInput();\n\n        // Если после удаления больше нет текста, то, возможно,\n        // удалили какой-то бабл во время его редактирования.\n        // Нужно оповестить о изменениях\n        if (!text.hasNear(selection)) {\n            nodeEditor.fireChange();\n        }\n\n    } else if (!nodeEditor.options('selection')) {\n        const nodeBubble = bubbleset.findBubbleLeft(selection);\n\n        if (nodeBubble) {\n            bubbleset.removeBubbles(nodeEditor, [ nodeBubble ]);\n            nodeEditor.fireChange();\n        }\n\n    } else {\n        sharedData.isEmptyLeft = true;\n    }\n}\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isEmptyRight]\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nfunction onDelete(event, sharedData) {\n    const selection = sharedData.selection;\n    if (!selection) {\n        return;\n    }\n\n    const nodeEditor = sharedData.nodeEditor;\n\n    if (!selection.isCollapsed || text.arrowRight(selection, true)) {\n        text.remove(selection);\n        nodeEditor.fireInput();\n\n        // Если после удаления больше нет текста, то, возможно,\n        // удалили какой-то бабл во время его редактирования.\n        // Нужно оповестить о изменениях\n        if (!text.hasNear(selection)) {\n            nodeEditor.fireChange();\n        }\n\n    } else if (!nodeEditor.options('selection')) {\n        const nodeBubble = bubbleset.findBubbleRight(selection);\n\n        if (nodeBubble) {\n            bubbleset.removeBubbles(nodeEditor, [ nodeBubble ]);\n            nodeEditor.fireChange();\n        }\n\n    } else {\n        sharedData.isEmptyRight = true;\n    }\n}\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isEmptyLeft]\n * @param {Selection} [sharedData.selection]\n */\nfunction onArrowLeft(event, sharedData) {\n    sharedData.isEmptyLeft = !text.arrowLeft(sharedData.selection, event.shiftKey);\n}\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isEmptyRight]\n * @param {Selection} [sharedData.selection]\n */\nfunction onArrowRight(event, sharedData) {\n    sharedData.isEmptyRight = !text.arrowRight(sharedData.selection, event.shiftKey);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/editor/keydown.js","const events = require('../events');\nconst bubble = require('../bubble');\nconst cursor = require('../cursor');\nconst select = require('../select');\nconst { KEY } = require('../constant');\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n */\nmodule.exports = function (event, sharedData) {\n    const code = events.keyCode(event);\n    const nodeEditor = event.currentTarget;\n\n    sharedData.enterBubbling = false;\n\n    if (code === KEY.Enter) {\n        event.preventDefault();\n        if (!nodeEditor.options('disableControls') && !select.getEditable(nodeEditor)) {\n            bubble.bubbling(nodeEditor);\n            cursor.restore(nodeEditor);\n\n            sharedData.enterBubbling = true;\n        }\n\n    } else if (nodeEditor.canAddBubble()) {\n        const separator = nodeEditor.options('separator');\n        if (separator && separator.test(String.fromCharCode(code))) {\n            const separatorCond = nodeEditor.options('separatorCond');\n\n            if (!separatorCond || separatorCond(nodeEditor.inputValue)) {\n                event.preventDefault();\n                bubble.bubbling(nodeEditor);\n                cursor.restore(nodeEditor);\n            }\n        }\n    } else {\n        event.preventDefault();\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/editor/keypress.js","const events = require('../events');\nconst { KEY } = require('../constant');\n\n/**\n * @param {Event} event\n */\nmodule.exports = function (event) {\n    const nodeEditor = event.currentTarget;\n    const code = events.keyCode(event);\n    const isPrintableChar = do {\n        if (event.key) {\n            event.key.length === 1;\n\n        } else {\n            ((code > 47 || code === KEY.Space || code === KEY.Backspace) && code !== KEY.Cmd);\n        }\n    };\n\n    if (isPrintableChar && nodeEditor.canAddBubble()) {\n        nodeEditor.fireInput();\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/editor/keyup.js","const raf = require('raf');\nconst context = require('../../context');\nconst bubble = require('../bubble');\nconst cursor = require('../cursor');\nconst text = require('../text');\nconst { isIE } = require('../utils');\n\nmodule.exports = function (event) {\n    event.preventDefault();\n    const nodeEditor = event.currentTarget;\n\n    if (!nodeEditor.canAddBubble()) {\n        return;\n    }\n\n    if (context.clipboardData && context.clipboardData.getData) {\n        onPasteSuccess(nodeEditor, context.clipboardData.getData('Text'));\n\n    } else if (event.clipboardData) {\n        const contentType = 'text/plain';\n        const clipboardData = event.clipboardData;\n        const data = clipboardData.getData && clipboardData.getData(contentType);\n\n        if (!onPasteSuccess(nodeEditor, data) && clipboardData.items) {\n            Array.prototype.slice.call(clipboardData.items)\n                .filter(item => item.kind === 'string' && item.type === contentType)\n                .some(function (item) {\n                    item.getAsString(function (dataText) {\n                        onPasteSuccess(nodeEditor, dataText);\n                    });\n\n                    return true;\n                });\n        }\n    }\n};\n\nfunction onPasteSuccess(nodeEditor, dataText) {\n    const checkBubblePaste = nodeEditor.options('checkBubblePaste');\n    const selection = context.getSelection();\n    const isBubbling = do {\n        if (dataText && selection.isCollapsed && !nodeEditor.inputValue) {\n            checkBubblePaste(dataText);\n\n        } else {\n            false;\n        }\n    };\n\n    if (text.replaceString(dataText, selection)) {\n        if (isBubbling) {\n            if (isIE) {\n                raf(() => onReplaceSuccess(nodeEditor));\n\n            } else {\n                onReplaceSuccess(nodeEditor);\n            }\n\n        } else {\n            nodeEditor.fireInput();\n        }\n\n        return true;\n    }\n\n    return false;\n}\n\nfunction onReplaceSuccess(nodeEditor) {\n    bubble.bubbling(nodeEditor);\n    nodeEditor.focus();\n    raf(() => cursor.restore(nodeEditor));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/editor/paste.js","const select = require('../select');\n\n/**\n * @param {Event} event\n */\nmodule.exports = function (event) {\n    select.clear(event.currentTarget);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/select/blur.js","const events = require('../events');\nconst select = require('../select');\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {HTMLElement} sharedData.nodeEditor\n * @param {HTMLElement} [sharedData.nodeBubble]\n * @param {boolean} sharedData.isDblclick\n */\nmodule.exports = function (event, sharedData) {\n    const nodeEditor = sharedData.nodeEditor;\n    const nodeBubble = sharedData.nodeBubble;\n    const isDblclick = sharedData.isDblclick;\n    const canAddBubble = sharedData.canAddBubble;\n\n    if (nodeBubble) {\n        if (events.metaKey(event)) {\n            select.add(nodeBubble);\n\n        } else if (event.shiftKey) {\n            if (!nodeEditor.startRangeSelect) {\n                select.uniq(nodeBubble);\n\n            } else {\n                select.range(nodeBubble);\n            }\n\n        } else if (!isDblclick) {\n            canAddBubble ? select.toggleUniq(nodeBubble) : select.uniq(nodeBubble);\n        }\n\n    } else if (canAddBubble) {\n        select.clear(nodeEditor);\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/select/click.js","const raf = require('raf');\nconst events = require('../events');\nconst utils = require('../utils');\nconst bubble = require('../bubble');\nconst select = require('../select');\nconst bubbleset = require('../bubbleset');\nconst cursor = require('../cursor');\nconst { KEY, PROPS } = require('../constant');\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isTextSelectAll]\n * @param {boolean} [sharedData.isTextSelectedFromBeginToCursor]\n * @param {boolean} [sharedData.isEmptyLeft]\n * @param {boolean} [sharedData.isEmptyRight]\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nmodule.exports = function (event, sharedData) {\n    const code = events.keyCode(event);\n    const metaKey = events.metaKey(event);\n\n    switch (code) {\n    case KEY.Backspace:\n        onBackspace(event, sharedData);\n        break;\n\n    case KEY.Delete:\n        onDelete(event, sharedData);\n        break;\n\n    case KEY.Left:\n        onArrowLeft(event, sharedData);\n        break;\n\n    case KEY.Right:\n        onArrowRight(event, sharedData);\n        break;\n\n    // курсор в начало списка\n    case KEY.Top:\n        event.preventDefault();\n        onTop(event, sharedData);\n        break;\n\n    // курсор в конец списка\n    case KEY.Bottom:\n        event.preventDefault();\n        onBottom(event, sharedData);\n        break;\n\n    case KEY.Home:\n        if (event.shiftKey && !sharedData.isTextSelectedFromBeginToCursor && select.has(sharedData.nodeEditor)) {\n            event.preventDefault();\n            select.allLeft(sharedData.nodeEditor);\n        }\n\n        break;\n\n    case KEY.a:\n        if (metaKey && !sharedData.isTextSelectAll) {\n            event.preventDefault();\n            select.all(sharedData.nodeEditor);\n        }\n        break;\n\n    case KEY.c:\n        metaKey && copyBubbles(sharedData.nodeEditor);\n        break;\n\n    case KEY.x:\n        metaKey && copyBubbles(sharedData.nodeEditor, () => onDelete(event, sharedData));\n        break;\n    }\n};\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nfunction onTop(event, sharedData) {\n    const nodeEditor = sharedData.nodeEditor;\n    if (nodeEditor.options('disableControls')) {\n        return;\n    }\n\n    const nodeBubble = bubbleset.headBubble(nodeEditor);\n    nodeBubble && select.uniq(nodeBubble);\n}\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nfunction onBottom(event, sharedData) {\n    const nodeEditor = sharedData.nodeEditor;\n    if (nodeEditor.options('disableControls')) {\n        return;\n    }\n\n    if (select.has(nodeEditor)) {\n        cursor.restore(nodeEditor);\n    }\n}\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isEmptyLeft]\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nfunction onBackspace(event, sharedData) {\n    const nodeEditor = sharedData.nodeEditor;\n    const selection = sharedData.selection;\n\n    if (selection) {\n        if (sharedData.isEmptyLeft) {\n            const nodeBubble = bubbleset.findBubbleLeft(selection);\n            nodeBubble && select.uniq(nodeBubble);\n        }\n\n    } else if (!removeBubbles(nodeEditor)) {\n        nodeEditor.focus();\n        // без задержки не восстанавливает курсор\n        raf(() => cursor.restore(nodeEditor));\n    }\n}\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isEmptyRight]\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nfunction onDelete(event, sharedData) {\n    const nodeEditor = sharedData.nodeEditor;\n    const selection = sharedData.selection;\n\n    if (selection) {\n        if (sharedData.isEmptyRight) {\n            const nodeBubble = bubbleset.findBubbleRight(selection);\n            nodeBubble && select.uniq(nodeBubble);\n        }\n\n    } else if (!removeBubbles(nodeEditor, true)) {\n        nodeEditor.focus();\n        // без задержки не восстанавливает курсор\n        raf(() => cursor.restore(nodeEditor));\n    }\n}\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isEmptyLeft]\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nfunction onArrowLeft(event, sharedData) {\n    const selection = sharedData.selection;\n\n    if (selection) {\n        if (sharedData.isEmptyLeft) {\n            const nodeBubble = bubbleset.findBubbleLeft(selection);\n            nodeBubble && select.uniq(nodeBubble);\n        }\n\n    } else {\n        const nodeEditor = sharedData.nodeEditor;\n        const list = select.get(nodeEditor);\n        const begin = do {\n            if (list.length > 1 && list[ 0 ] === nodeEditor.startRangeSelect) {\n                list[ list.length - 1 ];\n\n            } else {\n                list[ 0 ];\n            }\n        };\n\n        const node = bubbleset.prevBubble(begin);\n\n        if (node) {\n            if (event.shiftKey) {\n                select.range(node);\n\n            } else {\n                select.uniq(node);\n            }\n        }\n    }\n}\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n * @param {boolean} [sharedData.isEmptyRight]\n * @param {Selection} [sharedData.selection]\n * @param {HTMLElement} [sharedData.nodeEditor]\n */\nfunction onArrowRight(event, sharedData) {\n    const selection = sharedData.selection;\n\n    if (selection) {\n        if (sharedData.isEmptyRight) {\n            const nodeBubble = bubbleset.findBubbleRight(selection);\n            nodeBubble && select.uniq(nodeBubble);\n        }\n\n    } else {\n        const nodeEditor = sharedData.nodeEditor;\n        const list = select.get(nodeEditor);\n        const begin = do {\n            if (list.length > 1 && list[ list.length - 1 ] === nodeEditor.startRangeSelect) {\n                list[ 0 ];\n\n            } else {\n                list[ list.length - 1 ];\n            }\n        };\n\n        const node = bubbleset.nextBubble(begin);\n\n        if (node) {\n            if (event.shiftKey) {\n                select.range(node);\n\n            } else {\n                select.uniq(node);\n            }\n\n        // } else if (begin && begin.nextSibling && begin.nextSibling.nodeType === Node.TEXT_NODE) {\n        //     select.clear(nodeEditor);\n        //     selection.collapse(begin.nextSibling, 0);\n\n        } else {\n            cursor.restore(nodeEditor);\n        }\n    }\n}\n\nfunction removeBubbles(nodeEditor, removeFromRight = false) {\n    const list = select.get(nodeEditor);\n    if (!list.length) {\n        return false;\n    }\n\n    let firstBubble = list[ 0 ].previousSibling;\n    let secondBubble = list[ list.length - 1 ].nextSibling;\n\n    if (removeFromRight) {\n        let _ = firstBubble;\n        firstBubble = secondBubble;\n        secondBubble = _;\n    }\n\n    bubbleset.removeBubbles(nodeEditor, list);\n\n    if (bubble.isBubbleNode(firstBubble)) {\n        select.uniq(firstBubble);\n\n    } else if (bubble.isBubbleNode(secondBubble)) {\n        select.uniq(secondBubble);\n\n    } else {\n        nodeEditor.focus();\n        // без задержки не восстанавливает курсор\n        raf(() => cursor.restore(nodeEditor));\n    }\n\n    nodeEditor.fireChange();\n    return true;\n}\n\nfunction copyBubbles(nodeEditor, callback = function () {}) {\n    const selection = utils.getSelection(nodeEditor);\n    if (selection) {\n        return false;\n    }\n\n    const list = select.get(nodeEditor);\n    if (!list.length) {\n        return false;\n    }\n\n    const bubbleCopy = nodeEditor.options('bubbleCopy');\n    const value = bubbleCopy(list);\n\n    if (!value) {\n        return false;\n    }\n\n    nodeEditor[ PROPS.LOCK_COPY ] = true;\n\n    const target = nodeEditor.ownerDocument.createElement('input');\n    target.value = value;\n    target.style.cssText = `\n        position: absolute;\n        left: -9999px;\n        width: 1px;\n        height: 1px;\n        margin: 0;\n        padding: 0;\n        border: none;`;\n\n    nodeEditor.parentNode.appendChild(target);\n\n    events.one(target, {\n        keyup: () => nodeEditor.focus(),\n        blur: () => {\n            target && target.parentNode && target.parentNode.removeChild(target);\n            raf(callback);\n        }\n    });\n\n    target.select();\n    return true;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/select/keydown.js","const events = require('../events');\nconst bubble = require('../bubble');\nconst select = require('../select');\nconst { KEY } = require('../constant');\n\n/**\n * @param {Event} event\n * @param {Object} sharedData\n */\nmodule.exports = function (event, sharedData) {\n    const code = events.keyCode(event);\n    const nodeEditor = event.currentTarget;\n\n    if (code === KEY.Enter) {\n        event.preventDefault();\n        if (!nodeEditor.options('disableControls') && !sharedData.enterBubbling) {\n            editBubbleKeyboardEvent(nodeEditor);\n        }\n\n    } else if (code === KEY.Space) {\n        if (editBubbleKeyboardEvent(nodeEditor)) {\n            event.preventDefault();\n        }\n    }\n};\n\nfunction editBubbleKeyboardEvent(nodeEditor) {\n    const editableBubble = select.getEditable(nodeEditor);\n\n    if (editableBubble) {\n        return bubble.edit(nodeEditor, editableBubble);\n    }\n\n    return false;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/select/keypress.js","const context = require('../context');\nconst { PROPS } = require('./constant');\n\nconst REG_STRREG = /\\/(.+)\\/([gimy]{0,3})/i;\n\nconst OPTIONS = {\n    begining:           [ 'reg', null, 'begining' ],\n    bubbleCopy:         [ 'func', function (list) {\n        return list.map(item => item.innerHTML).join(', ');\n    }, 'bubble-copy' ],\n    bubbleDeformation:  [ 'func', function () {}, 'bubble-deformation' ],\n    bubbleFormation:    [ 'func', function () {}, 'bubble-formation' ],\n    checkBubblePaste:   [ 'func', function () {\n        return true;\n    }, 'check-bubble-paste' ],\n    checkBubbleDrop:    [ 'func', function () {\n        return true;\n    }, 'check-bubble-drop' ],\n    classBubble:        [ 'str', 'bubble', 'class-bubble' ],\n    disableControls:    [ 'bool', false, 'disable-controls' ],\n    draggable:          [ 'bool', true, 'draggable' ],\n    ending:             [ 'reg', null, 'ending' ], // /\\@ya\\.ru/g\n    limit:              [ 'uint', 0, 'limit' ],\n    selection:          [ 'bool', true, 'selection' ],\n    separator:          [ 'reg', /[,;]/, 'separator' ],\n    separatorCond:      [ 'func', null, 'separator-cond' ],\n    tokenizer:          [ 'func', null, 'tokenizer' ]\n};\n\nconst OPTIONS_PREPARE = {\n    func: function (value) {\n        const type = typeof value;\n        switch (type) {\n        case 'string':\n            return new Function('context', `return context.${value};`)(context);\n\n        case 'function':\n            return value;\n        }\n    },\n    bool: function (value) {\n        const type = typeof value;\n        switch (type) {\n        case 'string':\n            return (value === 'true' || value === 'on');\n\n        case 'boolean':\n            return value;\n        }\n    },\n    noop: function (value) {\n        return value;\n    },\n    reg: function (value) {\n        const type = typeof value;\n        switch (type) {\n        case 'string':\n            if (value) {\n                const match = value.match(REG_STRREG);\n                if (match) {\n                    return new RegExp(match[1], match[2]);\n                }\n            }\n\n            return null;\n\n        case 'object':\n            if (value instanceof context.RegExp || value === null) {\n                return value;\n            }\n        }\n    },\n    str: function (value) {\n        if (typeof value !== 'undefined') {\n            return value ? String(value) : '';\n        }\n    },\n    uint: function (value) {\n        value = Number(value);\n\n        if (!isNaN(value) && value > 0) {\n            return value;\n        }\n    }\n};\n\n/**\n * @param {HTMLElement} node\n * @param {array} args\n * @param {string|object} args.0 - string, if only one option is inserted, or object, if many options inserted,\n *  in the second case second argument doing nothing\n * @param {*} args.1 - value of inserted option\n *\n * @returns {*}\n */\nmodule.exports = function (node, ...args) {\n    const value = args[0];\n\n    if (value) {\n        if (!node[ PROPS.OPTIONS ]) {\n            reinitOptions(node);\n        }\n\n        if (typeof value === 'object' && value !== null) {\n            const optionsObj = value;\n\n            Object.keys(optionsObj).forEach((optionName) => {\n                node[ PROPS.OPTIONS ][ optionName ] = optionsObj[ optionName ];\n            });\n\n            prepareOptions(node[ PROPS.OPTIONS ]);\n\n            return;\n        }\n\n        const optionName = value;\n        const optionValue = args[1];\n\n        if (typeof optionValue !== 'undefined') {\n            node[ PROPS.OPTIONS ][ optionName ] = optionValue;\n            prepareOptions(node[ PROPS.OPTIONS ]);\n\n        } else {\n            return node[ PROPS.OPTIONS ][ optionName ];\n        }\n\n    } else {\n        reinitOptions(node);\n    }\n};\n\nfunction reinitOptions(node) {\n    const options = node[ PROPS.OPTIONS ] = node[ PROPS.OPTIONS ] || {};\n\n    for (const optionName in OPTIONS) {\n        const attrName = `data-${OPTIONS[ optionName ][2]}`;\n        if (node.hasAttribute(attrName)) {\n            options[ optionName ] = node.getAttribute(attrName);\n        }\n    }\n\n    prepareOptions(options);\n}\n\nfunction prepareOptions(options) {\n    for (let name in OPTIONS) {\n        const [ type, def ] = OPTIONS[ name ];\n        options[ name ] = OPTIONS_PREPARE[ type ](options[ name ]);\n        if (typeof options[ name ] === 'undefined') {\n            options[ name ] = def;\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./core/options.js"],"sourceRoot":""}